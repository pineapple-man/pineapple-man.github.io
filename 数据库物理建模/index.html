<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="pineapple-man"><title>数据库物理建模 - pineapple-man</title><meta name="author" content="pineapple-man"><meta name="keywords" content="物理建模,三范式"><link rel="icon" href="https://pineapple-man.github.io/assets/images/logo.svg"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"pineapple-man","sameAs":["https://github.com/pineapple-man","mailto://mingchaohu720@gmail.com"],"image":"logo.png"},"articleBody":"\n¶关系型数据库设计规则\n\n关系型数据库的典型数据结构就是数据表，这些数据表的组成都是结构化的(Structured)。\n将数据放到表中，表再放到库中。\n一个数据库中可以有多个表，每个表都有一个名字，用来标识自己。表名具有唯一性。\n表具有一些特性，这些特性定义了数据在表中如何存储，类似 Java 和 Python 中 「 类 」的设计\n\n¶表、记录、字段\nE-R(entity-relationship，实体-联系)模型中有三个主要概念是:实体集、属性、联系集\n\n\n\nER 图概念\n数据库中概念\n\n\n\n\n实体集\n一个实体集对应于数据库中的一个表\n\n\n实体\n一个实体（instance）对应于数据库表中的一行（row），也称为一条记录（record）\n\n\n属性\n一个属性对应于数据库表中的一列（column），也称为一个字段（field）\n\n\n\n¶ORM 思想 (Object Relational Mapping)\n\n\n\n数据库\n面向对象\n\n\n\n\n数据库中的一个表\n面向对象语言中的一个类\n\n\n表中的一条数据\n类实例化的一个对象\n\n\n表中的一列\n类中的一个字段、属性\n\n\n\n¶表的关联关系\n表与表之间的数据记录有关系(relationship)。现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。目前存在四种关联关系：一对一关联、一对多关联、多对多关联以及自我引用\n¶一对一关联(one-to-one)\n在实际的开发中应用并不多，因为一对一可以创建到一张表中，没有必要创建两张表\n\n¶一对多关系(one-to-many)\n常用实际场景：客户表和订单表、分类表和商品表以及部门表和员工表，一对多健表原则：在从表（多方）创建一个字段，字段作为外健指向主表（一方）的主键\n\n¶多对多关系(many-to-many)\n要表示多对多关系必须创建第三个表，该表通常称为联接表，它将多对多关系划分为两个一对多关系，将这两个表的主键都插入到第三个表中\n\n¶自我引用(self reference)\n\n¶物理建模\n✨物理建模就是主要包括两部分内容：确定最基本的表结构，以及对约束建模\n¶理论\n本小节主要记录数据库建模时需要使用的范数理论\n¶第一范式\n第一范式：要求数据库表中的每一列都不可再分，满足原子性\n\n\n上面这个表中部门岗位应该拆分成两个字段：部门名称、岗位\n\n¶第二范式\n第二范式：要求在满足第一范式基础上要求每个字段都和主键完整相关，而不是仅和主键部分相关（主要针对联合主键而言）\n\n\n订单详情表 使用订单编号 和产品编号作为联合主键\n此时产品价格、产品数量都和联合主键整体相关，但订单金额 和下单时间只和联合主键中的订单编号 相关， 和“产品编号” 无关。 所以只关联了主键中的部分字段， 不满足第二范式。\n把“订单金额” 和“下单时间” 移到订单表就符合第二范式了\n\n¶第三范式\n第三范式：要求表中的非主键字段和主键字段直接相关，不允许间接相关\n\n\n🐛上面表中的“部门名称” 和“员工编号” 的关系是“员工编号” →“部门编号”→“部门名称”， 不是直接相关，此时会带来下列问题 ：\n\n数据冗余：部门名称多次重复出现\n插入异常：组件一个新部门时没有员工信息，也就无法单独插入部门信息。就算强行插入部门信息，员工表中没有员工信息的记录同样是非法记录\n删除异常：删除员工信息会连带删除部门信息导致部门信息意外丢失\n更新异常：哪怕只修改一个部门的名称也要更新多条员工记录\n\n💡正确的做法是：把上表拆分成两张表，以外键形式关联\n\n第三范式的另一种表述方式是： 两张表要通过外键关联， 不保存冗余字段。 例如： 不能在“员工表” 中存储“部门名称”\n\n🎶反三范式：反三范式是基于第三范式所调整的，没有冗余的数据库未必是最好的数据库，有时为了提高运行效率，就必须降低 范式标准，适当保留冗余数据\n\n¶实践\n❓项目中如何进行数据库建模\n\n明白规则的变通：三大范式是设计数据库表结构的规则约束，但是在实际开发中允许局部变通\n根据业务功能设计数据库表\n\n看得见的字段（能够从需求文档或原型页面上直接看到的数据都需要设计对应的数据库表、字段来存储）\n看不见的字段（保存一些相关数据）\n冗余字段（为了避免建表时考虑不周有所遗漏，到后期再修改表结构非常麻烦，所以也有的团队会设置一些额外的冗余字段备用）\n\n\n实际开发对接（实际开发中除了一些各个模块都需要使用的公共表再项目启动时创建好，其他专属于各个模块的表由该模块的负责人创建。但通常开发人员不能直接操作数据库服务器，所以需要把建表的 SQL 语句发送给运维工程师执行创建操作）\n\n💡比如为了快速查询到关联数据可能会允许冗余字段的存在。 例如在员工表中存储部门名称虽然违背第三范式， 但是免去了对部门表的关联查询\n\n¶建模工具\n对于数据模型的建模，最有名的要数 PowerDesigner，但是了解到国人开发的 pdMan 也挺好用的【研一暑假做项目时使用过，对于当时还是新手的我还是挺友好的】。其中 PowerDesigner 是一个很方便的建模工具，只需要拉个图形然后自动生成 sql 语句，它的优势在于：不用再使用 create table 等语句创建表结构，数据库设计人员只关注如何进行数据建模即可，将来的数据库语句，可以自动生成\n¶附录\nPowerDesigner 介绍\npdman 介绍\n","dateCreated":"2021-11-01T10:54:07+00:00","dateModified":"2023-06-07T02:13:34+00:00","datePublished":"2021-11-01T10:54:07+00:00","description":"数据库最苦难的两步：创建和维护，本文主要讲解数据库设计应当遵从的规则，并推荐常用的物理建模工具","headline":"数据库物理建模","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://pineapple-man.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%A9%E7%90%86%E5%BB%BA%E6%A8%A1/"},"publisher":{"@type":"Organization","name":"pineapple-man","sameAs":["https://github.com/pineapple-man","mailto://mingchaohu720@gmail.com"],"image":"logo.png","logo":{"@type":"ImageObject","url":"logo.png"}},"url":"https://pineapple-man.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%A9%E7%90%86%E5%BB%BA%E6%A8%A1/","keywords":"MySQL"}</script><meta name="description" content="数据库最苦难的两步：创建和维护，本文主要讲解数据库设计应当遵从的规则，并推荐常用的物理建模工具"><meta property="og:type" content="blog"><meta property="og:title" content="数据库物理建模"><meta property="og:url" content="https://pineapple-man.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%A9%E7%90%86%E5%BB%BA%E6%A8%A1/"><meta property="og:site_name" content="pineapple-man"><meta property="og:description" content="数据库最苦难的两步：创建和维护，本文主要讲解数据库设计应当遵从的规则，并推荐常用的物理建模工具"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-one-to-one.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-one-to-many.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-many-to-many.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-self-reference.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130503266.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130631420.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130847241.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130913085.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903131051787.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903131603870.png"><meta property="article:published_time" content="2021-11-01T10:54:07.000Z"><meta property="article:modified_time" content="2023-06-07T02:13:34.007Z"><meta property="article:author" content="pineapple-man"><meta property="article:tag" content="MySQL"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-one-to-one.png"><meta property="og:image" content="https://pineapple-man.github.io/assets/images/logo.png"><link rel="stylesheet" href="/assets/css/style-oth3meuzcjopbgwqbdvoxqknhcm0sy9wkullcc94zhkkop3pmfrpl5t4fzzz.min.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-210516333-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-210516333-1")</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"></head><body><div id="blog"><header id="header" data-behavior="5"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">pineapple-man</a></div><a class="header-right-picture" href="#about" aria-label="打开链接: /#about"><img class="header-picture" src="/assets/images/logo.png" alt="作者的图片"></a></header><nav id="sidebar" data-behavior="5"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="阅读有关作者的更多信息"><img class="sidebar-profile-picture" src="/assets/images/logo.png" alt="作者的图片"></a><h4 class="sidebar-profile-name">pineapple-man</h4><h5 class="sidebar-profile-bio"><p>做一个菠萝：站得笔直，头戴王冠，内心甜美</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" rel="noopener" title="首页"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">首页</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-categories" rel="noopener" title="分类"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">分类</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-tags" rel="noopener" title="标签"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">标签</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-archives" rel="noopener" title="归档"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">归档</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="#about" rel="noopener" title="关于"><i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i> <span class="sidebar-button-desc">关于</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/pineapple-man" target="_blank" rel="noopener" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="mailto://mingchaohu720@gmail.com" target="_blank" rel="noopener" title="邮箱"><i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i> <span class="sidebar-button-desc">邮箱</span></a></li></ul></div></nav><div id="main" data-behavior="5" class="hasCoverMetaIn"><article class="post"><div class="post-header main-content-wrap text-center"><h1 class="post-title">数据库物理建模</h1><div class="post-meta"><time datetime="2021-11-01T10:54:07+00:00">11月 01, 2021 </time><span>发布在 </span><a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> <i class="fas fa-book-open"></i> 本文共<span class="post-count"> 1.7k </span>字 <i class="far fa-clock"></i> 阅读预计<span class="post-count"> 15 </span>分钟</div></div><div class="post-content markdown"><div class="main-content-wrap"><h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%A7%84%E5%88%99"><span class="toc-text">关系型数据库设计规则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E3%80%81%E8%AE%B0%E5%BD%95%E3%80%81%E5%AD%97%E6%AE%B5"><span class="toc-text">表、记录、字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORM-%E6%80%9D%E6%83%B3-Object-Relational-Mapping"><span class="toc-text">ORM 思想 (Object Relational Mapping)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="toc-text">表的关联关系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94-one-to-one"><span class="toc-text">一对一关联(one-to-one)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB-one-to-many"><span class="toc-text">一对多关系(one-to-many)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB-many-to-many"><span class="toc-text">多对多关系(many-to-many)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E6%88%91%E5%BC%95%E7%94%A8-self-reference"><span class="toc-text">自我引用(self reference)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%BB%BA%E6%A8%A1"><span class="toc-text">物理建模</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%90%86%E8%AE%BA"><span class="toc-text">理论</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F"><span class="toc-text">第一范式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F"><span class="toc-text">第二范式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-text">第三范式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B5"><span class="toc-text">实践</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E6%A8%A1%E5%B7%A5%E5%85%B7"><span class="toc-text">建模工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%95"><span class="toc-text">附录</span></a></li></ol><h2 id="关系型数据库设计规则"><a class="header-anchor" href="#关系型数据库设计规则">¶</a>关系型数据库设计规则</h2><ul><li>关系型数据库的典型数据结构就是数据表，这些数据表的组成都是结构化的(Structured)。</li><li>将数据放到表中，表再放到库中。</li><li>一个数据库中可以有多个表，每个表都有一个名字，用来标识自己。表名具有唯一性。</li><li>表具有一些特性，这些特性定义了数据在表中如何存储，类似 Java 和 Python 中 「 类 」的设计</li></ul><h3 id="表、记录、字段"><a class="header-anchor" href="#表、记录、字段">¶</a>表、记录、字段</h3><p>E-R(entity-relationship，实体-联系)模型中有三个主要概念是:实体集、属性、联系集</p><table><thead><tr><th style="text-align:center">ER 图概念</th><th style="text-align:center">数据库中概念</th></tr></thead><tbody><tr><td style="text-align:center">实体集</td><td style="text-align:center">一个实体集对应于数据库中的一个表</td></tr><tr><td style="text-align:center">实体</td><td style="text-align:center">一个实体（instance）对应于数据库表中的一行（row），也称为一条记录（record）</td></tr><tr><td style="text-align:center">属性</td><td style="text-align:center">一个属性对应于数据库表中的一列（column），也称为一个字段（field）</td></tr></tbody></table><h3 id="ORM-思想-Object-Relational-Mapping"><a class="header-anchor" href="#ORM-思想-Object-Relational-Mapping">¶</a>ORM 思想 (Object Relational Mapping)</h3><table><thead><tr><th style="text-align:center">数据库</th><th style="text-align:center">面向对象</th></tr></thead><tbody><tr><td style="text-align:center">数据库中的一个表</td><td style="text-align:center">面向对象语言中的一个类</td></tr><tr><td style="text-align:center">表中的一条数据</td><td style="text-align:center">类实例化的一个对象</td></tr><tr><td style="text-align:center">表中的一列</td><td style="text-align:center">类中的一个字段、属性</td></tr></tbody></table><h3 id="表的关联关系"><a class="header-anchor" href="#表的关联关系">¶</a>表的关联关系</h3><p>表与表之间的数据记录有关系(relationship)。现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。目前存在四种关联关系：一对一关联、一对多关联、多对多关联以及自我引用</p><h4 id="一对一关联-one-to-one"><a class="header-anchor" href="#一对一关联-one-to-one">¶</a>一对一关联(one-to-one)</h4><p>在实际的开发中应用并不多，因为一对一可以创建到一张表中，没有必要创建两张表</p><p><img src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-one-to-one.png" alt=""></p><h4 id="一对多关系-one-to-many"><a class="header-anchor" href="#一对多关系-one-to-many">¶</a>一对多关系(one-to-many)</h4><p>常用实际场景：客户表和订单表、分类表和商品表以及部门表和员工表，一对多健表原则：在从表（多方）创建一个字段，字段作为外健指向主表（一方）的主键</p><p><img src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-one-to-many.png" alt=""></p><h4 id="多对多关系-many-to-many"><a class="header-anchor" href="#多对多关系-many-to-many">¶</a>多对多关系(many-to-many)</h4><p>要表示多对多关系必须创建第三个表，该表通常称为<code>联接表</code>，它将多对多关系划分为两个一对多关系，将这两个表的主键都插入到第三个表中</p><p><img src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-many-to-many.png" alt=""></p><h4 id="自我引用-self-reference"><a class="header-anchor" href="#自我引用-self-reference">¶</a>自我引用(self reference)</h4><p><img src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql-self-reference.png" alt=""></p><h2 id="物理建模"><a class="header-anchor" href="#物理建模">¶</a>物理建模</h2><p>✨物理建模就是主要包括两部分内容：<strong>确定最基本的表结构</strong>，以及对<strong>约束建模</strong></p><h3 id="理论"><a class="header-anchor" href="#理论">¶</a>理论</h3><p>本小节主要记录数据库建模时需要使用的<strong>范数理论</strong></p><h4 id="第一范式"><a class="header-anchor" href="#第一范式">¶</a>第一范式</h4><div class="alert info no-icon"><p>第一范式：要求数据库表中的每一列都不可再分，满足<font style="color:red;font-weight:700">原子性</font></p></div><div class="figure fig-100 center"><a class="fancybox" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130503266.png" data-caption="" data-fancybox="default"><img class="fig-img" src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130503266.png" alt=""></a></div><p>上面这个表中<strong>部门岗位</strong>应该拆分成两个字段：<strong>部门名称</strong>、<strong>岗位</strong></p><div class="figure fig-100 center"><a class="fancybox" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130631420.png" data-caption="" data-fancybox="default"><img class="fig-img" src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130631420.png" alt=""></a></div><h4 id="第二范式"><a class="header-anchor" href="#第二范式">¶</a>第二范式</h4><div class="alert info no-icon"><p>第二范式：要求在满足第一范式基础上要求<font style="color:red;font-weight:700">每个字段都和主键完整相关</font>，而不是仅和主键部分相关（主要针对联合主键而言）</p></div><div class="figure fig-100 center"><a class="fancybox" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130847241.png" data-caption="" data-fancybox="default"><img class="fig-img" src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130847241.png" alt=""></a></div><p><strong>订单详情表</strong> 使用<strong>订单编号</strong> 和<strong>产品编号</strong>作为联合主键</p><p>此时<strong>产品价格</strong>、<strong>产品数量</strong>都和联合主键整体相关，但<strong>订单金额</strong> 和<strong>下单时间</strong>只和联合主键中的<strong>订单编号</strong> 相关， 和“<strong>产品编号</strong>” 无关。 所以只关联了主键中的部分字段， 不满足第二范式。</p><p>把“<strong>订单金额</strong>” 和“<strong>下单时间</strong>” 移到订单表就符合第二范式了</p><div class="figure fig-100 center"><a class="fancybox" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130913085.png" data-caption="" data-fancybox="default"><img class="fig-img" src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903130913085.png" alt=""></a></div><h4 id="第三范式"><a class="header-anchor" href="#第三范式">¶</a>第三范式</h4><div class="alert info no-icon"><p>第三范式：要求表中的非主键字段和主键字段<font style="color:red;font-weight:700">直接相关</font>，不允许间接相关</p></div><div class="figure fig-100 center"><a class="fancybox" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903131051787.png" data-caption="" data-fancybox="default"><img class="fig-img" src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903131051787.png" alt=""></a></div><p>🐛上面表中的“<strong>部门名称</strong>” 和“<strong>员工编号</strong>” 的关系是“<strong>员工编号</strong>” →“<strong>部门编号</strong>”→“<strong>部门名称</strong>”， 不是直接相关，此时会带来下列问题 ：</p><ul><li>数据冗余：<strong>部门名称</strong>多次重复出现</li><li>插入异常：组件一个新部门时没有员工信息，也就无法单独插入部门信息。就算强行插入部门信息，员工表中没有员工信息的记录同样是非法记录</li><li>删除异常：删除员工信息会连带删除部门信息导致部门信息意外丢失</li><li>更新异常：哪怕只修改一个部门的名称也要更新多条员工记录</li></ul><p>💡正确的做法是：把上表拆分成两张表，以外键形式关联</p><div class="figure fig-100 center"><a class="fancybox" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903131603870.png" data-caption="" data-fancybox="default"><img class="fig-img" src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210903131603870.png" alt=""></a></div><div class="alert success no-icon"><p>第三范式的另一种表述方式是： 两张表要通过外键关联， 不保存冗余字段。 例如： 不能在“<strong>员工表</strong>” 中存储“<strong>部门名称</strong>”</p></div><div class="alert info no-icon"><p>🎶反三范式：反三范式是基于第三范式所调整的，没有冗余的数据库未必是最好的数据库，有时为了提高运行效率，就必须降低 范式标准，适当保留冗余数据</p></div><h3 id="实践"><a class="header-anchor" href="#实践">¶</a>实践</h3><p>❓项目中如何进行数据库建模</p><ul><li>明白规则的变通：三大范式是设计数据库表结构的规则约束，但是在实际开发中允许局部变通</li><li>根据业务功能设计数据库表<ul><li>看得见的字段（能够从需求文档或原型页面上直接看到的数据都需要设计对应的数据库表、字段来存储）</li><li>看不见的字段（保存一些相关数据）</li><li>冗余字段（为了避免建表时考虑不周有所遗漏，到后期再修改表结构非常麻烦，所以也有的团队会设置一些额外的冗余字段备用）</li></ul></li><li>实际开发对接（实际开发中除了一些各个模块都需要使用的公共表再项目启动时创建好，其他<font style="color:#00f;font-weight:700">专属于各个模块的表由该模块的负责人创建</font>。但<font style="color:red;font-weight:700">通常开发人员不能直接操作数据库服务器，所以需要把建表的 SQL 语句发送给运维工程师执行创建操作</font>）</li></ul><div class="alert info no-icon"><p>💡比如为了快速查询到关联数据可能会允许冗余字段的存在。 例如在员工表中存储部门名称<font style="color:red;font-weight:700">虽然违背第三范式， 但是免去了对部门表的关联查询</font></p></div><h2 id="建模工具"><a class="header-anchor" href="#建模工具">¶</a>建模工具</h2><p>对于数据模型的建模，最有名的要数 PowerDesigner，但是了解到国人开发的 pdMan 也挺好用的【研一暑假做项目时使用过，对于当时还是新手的我还是挺友好的】。其中 PowerDesigner 是一个很方便的建模工具，只需要拉个图形然后自动生成 sql 语句，它的优势在于：不用再使用 create table 等语句创建表结构，数据库设计人员只关注如何进行数据建模即可，将来的数据库语句，可以自动生成</p><h2 id="附录"><a class="header-anchor" href="#附录">¶</a>附录</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/huangting/p/12654057.htm">PowerDesigner 介绍</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/xinzhifu1/article/details/111693664">pdman 介绍</a></p></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">标签</span><br><a class="tag tag--primary tag--small t-none-link" href="/tags/MySQL/" rel="tag">MySQL</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%A1%E7%AE%97%E6%9C%BA%E9%9B%86%E7%BE%A4%EF%BC%9F/" data-tooltip="什么是计算机集群？" aria-label="上一篇: 什么是计算机集群？"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/%E8%84%9A%E6%89%8B%E6%9E%B6/" data-tooltip="脚手架" aria-label="下一篇: 脚手架"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></article><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><footer id="footer" class="main-content-wrap"><span class="copyrights">Copyrights &copy; 2023 pineapple-man. All Rights Reserved.</span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><br>Total <span id="busuanzi_value_site_pv"></span> views. 您是pineapple-man的第<span id="busuanzi_value_site_uv"></span>个小伙伴<br><i class="fas fa-book-open"></i> <span class="post-count">博客字数统计：370.7k</span><script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script></footer></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="5"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%A1%E7%AE%97%E6%9C%BA%E9%9B%86%E7%BE%A4%EF%BC%9F/" data-tooltip="什么是计算机集群？" aria-label="上一篇: 什么是计算机集群？"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/%E8%84%9A%E6%89%8B%E6%9E%B6/" data-tooltip="脚手架" aria-label="下一篇: 脚手架"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="/assets/images/logo.png" alt="作者的图片"><h4 id="about-card-name">pineapple-man</h4><div id="about-card-bio"><p>做一个菠萝：站得笔直，头戴王冠，内心甜美</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>刚毕业就失业</p></div><div id="about-card-location"><i class="fa fa-map-marker-alt"></i><br>西安</div></div></div><div id="cover" style="background-image:url(/assets/images/cover-v1.2.0.jpg)"></div><script src="/assets/js/script-kcoiyt1nxfue7qgcpkrcixymglcc3cuxeg98fy01hqww4nblnhd2ees6j6yc.min.js"></script></body></html>