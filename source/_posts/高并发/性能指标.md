---
title: 常见高并发性能指标
toc: true
clearReading: true
thumbnailImagePosition: right
metaAlignment: center
categories: 通用技能
tags: 必备小技能
keywords: 性能
excerpt: 有比较才会有优劣，日常开发中都使用哪些指标来衡量一个后端服务的优劣？
date: 2022-02-15 11:39:08
thumbnailImage:
---
<!-- toc -->

## 概述

经常听到一些`pv`，或者其他到指标，一直搞不清楚是什么意思，希望通过本文简单的了解一下各种指标都是什么含义

## 系统吞吐量

系统的吞吐量与 `request` 对 CPU 的消耗、外部接口、IO等等紧密关联。单个 request 对 CPU 消耗越高，外部系统接口、IO 速度越慢，系统吞吐能力越低，反之越高。吞吐量是指**系统在单位时间内处理请求的数量**，TPS、 QPS、并发数和响应时间都是吞吐量的常用量化指标，各种指标的意义如下：

|                指标                |                             含义                             |
| :--------------------------------: | :----------------------------------------------------------: |
|   QPS<br />(Queries Per Second)    | QPS 表示是每秒查询率 ，是一台服务器每秒能够响应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准，经常用 QPS 来衡量域名系统服务器的机器性能 |
| TPS<br />(Transactions Per Second) | TPS 表示系统每秒处理的事务数量，此指标是一个软件测试结果的测量单位。一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数。 |
|      RT<br />(Response Time)       | 响应时间（RT）是指执行一个请求从开始到最后收到响应数据所花费的总体时间，即从客户端发起请求到收到服务器响应结果的时间。响应时间的大小直接反应了系统的快慢。可以通过Nginx、Apache之类的Web Server得到 |
|               并发数               | 并发数也称之为并发度，指**系统同时能处理的请求（事务）的数量**，这个指标同样反映了系统的负载能力 |

:vs:  QPS 与 TPS 的区别
{% alert success no-icon %}

QPS 基本类似于 TPS，但是不同的是，对于一个页面的一次访问，会形成一个 TPS；但一次页面请求，可能会产生多次对服务器的请求（页面中包括许多其他资源），服务器对这些请求，就可计入 `QPS` 之中。如，访问一个页面会请求服务器2次，那么这样的一次访问，会产生一个`T`，产生 2 个` Q `

{% endalert %}

每套系统的并发数和吞吐量都有一个相对极限值，在应用场景访问压力下，只要某一项达到系统最高值，系统吞吐量就上不去了，如果压力继续增大，系统的吞吐量反而会下降，原因是系统超负荷工作，上下文切换，内存等等其他消耗导致系统性能下降

通过上述介绍的这样几个指标，就可以得到它们之间的相关关系如下：
{% alert info no-icon %}


- **QPS（TPS）= 并发数/平均响应时间**
- **并发数 = QPS\*平均响应时间**

{% endalert %}

并不是说 QPS 越大一个系统的并发数量就越多，QPS 越小一个系统的并发数量就越小。QPS 是一个平均的指标，系统的并发数量与业务有着很强烈的相关性，不能单独由 QPS 来决定系统的并发程度。这里以微博举例。比如，微博每天 1 亿多的 PV 系统一般也就 1500 QPS，5000 QPS 的峰值，这已经算是一个高并发系统了，然而单独考虑 QPS 的大小并不是判断系统并发程度的单独指标，衡量系统的并发程度与业务存在比较强的相关性。

##  网站流量分析

上面小节总结了系统吞吐量相关指标，本小节将对网站流量指标进行总结

|         网站分析指标         |      名称      |                             含义                             |
| :--------------------------: | :------------: | :----------------------------------------------------------: |
|     PV<br />(Page View)      |   网站浏览量   | 页面的浏览次数，用以衡量网站用户访问的网页数量。用户每打开一个页面便记录1次PV，多次打开同一页面则浏览量累计 |
|   UV<br />(Unique Visitor)   |   独立访客数   | 1天内访问某站点的人数，以`cookie` 为依据。1天内同一访客的多次访问只计为1个访客； |
|     VV<br />(Visit View)     | 访客的访问次数 | 记录所有访客1天内访问了多少次您的网站。当访客完成所有浏览并最终关掉该网站的所有页面时便完成了一次访问，同一访客1天内可能有多次访问行为，访问次数累计； |
|              IP              |   独立 IP 数   | 1天内使用不同IP地址的用户访问网站的数量，同一IP无论访问了几个页面，独立IP数均为1 |
| DAU<br />(Daily Active User) | 日活跃用户数量 | DAU通常统计一日（统计日）之内，登录或使用了某个产品的用户数（去除重复登录的用户），与UV概念相似 |
| MAU<br />(Month Active User) | 月活跃用户数量 |              网站、app等去重后的月活跃用户数量               |

:vs: UV 与 IP 的关系 

{% alert success no-icon %}

IP 和 UV 之间的数据不会有太大的差异，通常 UV 量比 IP 量高出一点，每个 UV 相对于每个 IP 更准确地对应一个实际的浏览者

- 如果 UV 大于 IP，这种情况就是在网吧、学校、公司等，公用相同IP的场所中不同的用户，或者多种不同浏览器访问您网站，那么UV数会大于IP数
- 如果 UV 小于 IP，在家庭中大多数电脑使用ADSL拨号上网，所以同一个用户在家里不同时间访问您网站时，IP可能会不同，因为它会根据时间变动IP，即动态的IP地址，但是实际访客数唯一，便会出现UV数小于IP数

{% endalert %}

### 转换率

转换率 = 转换次数/总点击量 * 100%，转换率定义了在一个统计时间内，完成转换行为的次数占总点击次数的比率。转换率是网站最终是否盈利的核心，提升网站转换率是网站综合运营实力的结果
{% alert warning no-icon %}

例如，一天 UV 为 5000，有 50 个用户有了后续的转换行为，转换率 = 50/5000 *100% =1%

{% endalert %}


### 跳出率

跳出率（蹦出率）指用户（独立用户）来到网站之后，只浏览了一个网页就离开与总的访问数量的百分比

跳出率是网站分析的主要指标，跳出率越高，说明网站的吸引力越低，当跳出率达到一定程度时，说明网站页面需要优化或者页面需要更新了

可以通过以下的方法降低跳出率：提高服务器响应速度、不包括欺骗性的跳转、采用面包屑导航以及提高网站的质量

### 退出率

退出率是指用户退出网站的次数除以用户浏览网站次数的百分比，退出率反映了网站对于访客的吸引力，如果退出率很高的话就要想办法改善网站的内容来吸引更多的客户。

{% alert warning no-icon %}

例如，对于一个IP 可能会产生5个PV，有2种可能,第一是他点了5个不同的页面，第二是连续打开5次首页。第二种的跳出率是100%。

{% endalert %}

跳出率是衡量访问的质量的关键，如果跳出率很高的话，说明新用户来了，看了一眼就离开了；如果跳出率很低的话，说明新老用户来了，访问了很多页面才离开

:vs: 跳出率与退出率的区别
{% alert success no-icon %}

跳出率和退出率都能是以网页为基数的，而且都是反映出网站质量的重要参数，严格来区分的话，跳出率是表达访客仅访问了一个页面就离开，反映的是某个网页的质量好坏，能体现的网站问题也比较重要，而退出率能是表达访客仅访问了网站几个(≥1)页面就离开，反映的是多个网页的综合质量。

{% endalert %}



## 附录

[后端性能指标常识](https://www.cnblogs.com/Aaxuan/p/15162502.html)
[一文搞懂高并发性能指标：QPS、TPS、RT、吞吐量](http://blog.itpub.net/69942496/viewspace-2665766/)
[PV、UV、VV、IP的区别!!](https://www.jianshu.com/p/7838d0a9b9e7)
[互联网中一些常用指标（PV、UV、蹦失率、转换率、退出率](https://www.bbsmax.com/A/Gkz1ok6j5R/)