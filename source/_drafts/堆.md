---
title: 堆
toc: true
clearReading: true
thumbnailImagePosition: right
metaAlignment: center
categories: 计算机算法理论
tags: 数据结构与算法
keywords: 堆
excerpt: 除了栈和队列之外，堆算作另一种比较常用的数据结构，本文主要介绍堆数据结构的相关操作
---

# 1. 简介

<font style="color:red;font-weight:bold">逻辑结构下，堆是一棵树</font>，并且每个节点都保存有需要比较的值，这些节点间的关系不同,会产生不同的堆

![](https://gitee.com/mingchaohu/blog-image/raw/master/image/认识堆.png)

> :book:既然已经存在树型结构了，为什么还需要堆结构尼？
>
> - 堆结构的存在，主要就是去解决最值问题，只不过使用树结构来表现而已

<h2 align="center">大根堆</h2>

如果，每个节点的值都<font style="color:red;font-weight:bold">小于等于其父亲的键值</font>，称之为大根堆，反之称为小根堆

:notes:在堆上进行节点元素间的比较时，并非一定是数学上的大小比较，用户可以自定义大小比较关系

:sparkles:(大根)堆支持如下操作:

![](https://gitee.com/mingchaohu/blog-image/raw/master/image/堆的操作.png)

:notes:以上均是堆支持的普通操作，可能存在专门用于解决某类问题而有意设计的堆；如可并堆支持高效地合并操作、有的堆还可以堆任意历史版本进行查询或者操作;<font style="color:red;font-weight:bold">习惯上，堆往往指的都是二叉堆</font>

# 2. 堆的操作



# 堆结构

> :sparkles:对结构的特点
>
> 1. 堆结构就是用数组实现的完全二叉树结构
> 2. 完全二叉树中如果每颗子树的**最大值都在顶部**就是**大根堆**
> 3. 完全二叉树中如果每颗子树的**最小值都在顶部**就是**小根堆**
> 4. 堆结构拥有两种操作`heapInsert()`和`heapify()`
> 5. 堆结构的插入和删除
> 6. 优先级队列就是堆结构



使用数组来模拟完全二叉树，从0出发的连续一段数字，在逻辑上等同于完全二叉树

左孩子： 2*i + 1

右孩子： 2*i -1 

父亲： (i - 1)/2

堆又分为，大根堆和小根堆

heapinsert过程，从下至上

- 如果想要找到最大值，并删除此最大值，使得原数组仍为最大堆

heapify（重新调整堆）

从上至下









优先级队列就是堆结构，



扩容的时间复杂度





有些场景就需要手写堆，才能做到高效，系统提供的不能做到高效

上了堆的问题，需要人为改写堆上的元素，这时就需要重新调整堆

使用比较器，再加上系统自带的堆结构（默认使用小根堆），就可以自定义排序方式，

如果是负数，认为第一个参数应该放在上面，

如果是正数，认为第二个参数应该放在上面



快速找到数据流的中位数



# 堆的进阶

|  操作\数据结构   |          配对堆          |       二叉堆       |       左偏树       |       二项堆       |        斐波那契堆        |
| :--------------: | :----------------------: | :----------------: | :----------------: | :----------------: | :----------------------: |
|       插入       |          $O(1)$          |    $O(log \ n)$    |    $O(log \ n)$    |       $O(1)$       |          $O(1)$          |
|    查询最大值    |          $O(1)$          |       $O(1)$       |       $O(1)$       |    $O(log \ n)$    |          $O(1)$          |
|    删除最大值    |       $O(log \ n)$       |    $O(log \ n)$    |    $O(log \ n)$    |    $O(log \ n)$    |       $O(log \ n)$       |
|       合并       |          $O(1)$          |       $O(n)$       |    $O(log \ n)$    |    $O(log \ n)$    |          $O(1)$          |
| 减小一个元素的值 |       $O(log \ n)$       |    $O(log \ n)$    |    $O(log \ n)$    |    $O(log \ n)$    |          $O(1)$          |
|  是否支持持久化  | :heavy_multiplication_x: | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | :heavy_multiplication_x: |

