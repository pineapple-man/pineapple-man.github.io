---
title: 负载均衡算法
toc: true
clearReading: true
metaAlignment: center
categories: Java Web
tags: 必备小技能
keywords: 负载均衡
excerpt: 本文主要讲解负载均衡相关知识
---
## 概述

:question:什么是负载均衡？

{% alert success no-icon%}

负载均衡，英文名称为Load Balance，指由多台服务器以对称的方式组成一个服务器集合，每台服务器都具有等价的地位，都可以单独对外提供服务而无须其他服务器的辅助。通过某种负载分担算法，将外部发送来的请求均匀分配到对称结构中的某一台服务器上，而接收到请求的服务器独立地回应客户的请求

{% endalert%}

简单的理解，负载均衡就是将请求**均匀分摊**在多个操作单元上执行，负载均衡的关键就在于**均匀**

{% alert success no-icon%}

:sparkles:负载均衡能够平均分配客户请求到服务器阵列，借此提供快速获取重要数据，解决大量并发访问服务问题，这种集群技术可以用最少的投资获得接近于大型主机的性能

{% endalert%}

:book:负载均衡分为软件负载均衡和硬件负载均衡，前者的代表是阿里章文嵩博士研发的`LVS`，后者则是均衡服务器比如`F5`





![](https://gitee.com/mingchaohu/blog-image/raw/master/image/loadBalanceer.png)

## 常用的负载均衡算法

### 轮询法

将请求按顺序轮流地分配到后端服务器上，它均衡地对待后端的每一台服务器，而不关心服务器实际的连接数和当前的系统负载

### 加权轮询法

不同的后端服务器可能机器的配置和当前系统的负载并不相同，因此它们的抗压能力也不相同。给配置高、负载低的机器配置更高的权重，让其处理更多的请；而配置低、负载高的机器，给其分配较低的权重，降低其系统负载，加权轮询能很好地处理这一问题，并将请求顺序且按照权重分配到后端



### 平滑加权轮询



### 随机法

通过系统的随机算法，根据后端服务器的列表大小值来随机选取其中的一台服务器进行访问。由概率统计理论可以得知，随着客户端调用服务端的次数增多，其实际效果越来越接近于平均分配调用量到后端的每一台服务器，也就是轮询的结果

### 加权随机法

与加权轮询法一样，加权随机法也根据后端机器的配置，系统的负载分配不同的权重。不同的是，它是按照权重随机请求后端服务器，而非顺序



### 源地址哈希法



### 最小连接数法

最小连接数算法比较灵活和智能，由于后端服务器的配置不尽相同，对于请求的处理有快有慢，它是根据后端服务器当前的连接情况，动态地选取其中当前积压连接数最少的一台服务器来处理当前的请求，尽可能地提高后端服务的利用效率，将负责合理地分流到每一台服务器

### 一致性哈希





## 附录

[几种简单的负载均衡算法及其Java代码实现](https://www.cnblogs.com/xrq730/p/5154340.html)

[负载均衡的6种算法，Ngnix的5种算法！](https://zhuanlan.zhihu.com/p/68733507)

[关于负载均衡的一切](https://mp.weixin.qq.com/s/xvozZjmn-CvmQMAEAyDc3w)
