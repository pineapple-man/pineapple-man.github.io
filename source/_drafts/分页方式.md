---
title: MyBatis 分页方式
toc: true
clearReading: true
thumbnailImagePosition: right
metaAlignment: center
thumbnailImage: https://gitee.com/mingchaohu/blog-image/raw/master/image/mybatis.jpg
categories: 中间件
tags: MyBatis
keywords: 分页
excerpt: 分页是前后端常见的需求之一，对于MyBatis中某人并没有集成分页功能，那么如果需要分页，我应该如何优雅的实现？
---

## 数组分页

通过查询出全部数据，随后再手动截取需要的部分

```java
//Mybatis 接口
List<Student> queryStudentsByArray();  
```

```xml
<!--Mapper 配置文件-->
 <select id="queryStudentsByArray"  resultMap="studentmapper">
        select * from student
 </select>
```



```java
public List<Student> queryStudentsByArray(int currPage, int pageSize) {
    //查询全部数据
    List<Student> students = studentMapper.queryStudentsByArray();
    //从第几条数据开始
    int firstIndex = (currPage - 1) * pageSize;
    //到第几条数据结束
    int lastIndex = currPage * pageSize;
    return students.subList(firstIndex, lastIndex); //直接在list中截取
}
```

随后通过`Controller`即可调用 Service 完成分页

## Sql 分页

由于Sql自身语法中存在支持分页的操作，所以可以使用这种方式完成功能

```java
//mybatis接口
List<Student> queryStudentsBySql(Map<String,Object> data);
```

```xml
<!--Mapper 配置文件-->
<select id="queryStudentsBySql" parameterType="map" resultMap="studentmapper">
        select * from student limit #{currIndex} , #{pageSize}
</select>
```

```java
public List<Student> queryStudentsBySql(int currPage, int pageSize) {
        Map<String, Object> data = new HashedMap();
        data.put("currIndex", (currPage-1)*pageSize);
        data.put("pageSize", pageSize);
        return studentMapper.queryStudentsBySql(data);
    }
```

## 附录

[Mybatis四种分页方式](https://www.w3cschool.cn/mybatis/mybatis-ypsj3bpi.html)

