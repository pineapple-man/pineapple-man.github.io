---
title: 序列化概述
toc: true
clearReading: true
thumbnailImagePosition: right
metaAlignment: center
thumbnailImage:
categories: 中间件
tags: 必备小技能
keywords: 序列化
excerpt: 本文主要讲解什么是序列化，以及常用的序列化工具（框架）
---
## 概述

:thinking:某个Java 对象只有在 JVM 启动的时候才能存在，是否存在某种持久化技术能够保存这些对象？

- Java 对象**序列化**就能够帮助我们实现对象的持久保存

:question:什么是序列化？

- 序列化是指把一个Java对象变成二进制内容，本质上就是一个`byte[]`数组

:vs:序列化与反序列化

- 序列化就是把对象的状态信息转化为可存储或传输的形式过程，把**对象转化为字节序列的过程称为序列化**
- 反序列化是序列化的逆向过程，把字节数组转化为为对象，把**字节序列恢复为对象的过程称为对象的反序列化**



## 各种序列化技术



### XML 序列化框架

:+1:优点

- 可读性好，方便阅读和调试

:persevere:缺点

- 序列化以后字节码比较大
- 效率不高

:sparkles:使用场景

- 性能不高，QPS 较低的企业级内部系统之间的数据交换场景
- 用于异构系统之间的数据交换和协议

:books:实现方式

- XStream
- Java 自带的 XML 序列化和反序列化

### JSON 序列化框架

:+1:优点

- 传输的字节流更小，可读性非常好

:books:实现方式

- Jackson
- FastJson(:sweat_smile:谁用谁知道）
- Gson

:vs:常用框架对比

- Jackson 与 fastjson 要比 GSON 的性能要好
- Jackson、GSON 的稳定性要比 Fastjson 好  
- FastJson调用的 API 非常容易使用

### Hessian 序列化框架

:sparkles:Hessian 序列化特点

- 支持跨语言传输的二进制序列化协议
- 比 Java 默认的序列化机制有着更好的性能和易用性

:books:Dubbo 就是使用重构后`Hessian`序列化机制，达到更高的性能

### Avro 序列化

:sparkles:Avro 序列化特点

- 支持大批量数据交换的应用
- 支持二进制序列化方式
- 可以便捷，快速地处理大量数据
- 动态语言优化

### kyro 序列化框架

:sparkles:Kryo 是一种非常成熟的序列化实现，已经在 Hive、 Storm）中使用得比较广泛，不过它不能跨语言

:books:Dubbo已经在 2.6 版本支持 kyto 序列化机制，它的性能要优于`Hessian2`

### Protobuf 序列化框架

:sparkles:Protobuf 序列化框架特点

- Protobuf 是 Google 的一种数据交换格式，它独立于语言、独立于平台
- Protobuf 是一个纯粹的表示层协议，可以和各种传输层协议一起使用  
- Protobuf 使用比较广泛，主要是空间开销小和性能比较好，非常适合用于公司内部对性能要求高的 RPC 调用
- 序列化以后数据量相对较少，也可以应用在对象的持久化场景中

:persevere:protobuf 有个缺点就是要传输的每一个类的结构都要生成对应的 proto 文件，如果某个类发生修改，还得重新生成该类对应的 proto 文件  



## 序列化的技术选型

### 技术层面



:older_man:选型建议

- 对性能要求不高的场景，可以采用基于 XML 的 SOAP 协议  
- 对性能和间接性有比较高要求的场景，那么 Hessian、 Protobuf、 Thrift、 Avro 都可以  
- 基于前后端分离，或者独立的对外的 api 服务，选用 JSON 是比较好的，对于调试、可读性都很不错  
- 动态类型语言使用 Avro 











## 附录

[菜鸟教程]:https://www.runoob.com/java/java-serialization.html
[廖雪峰教程]:https://www.liaoxuefeng.com/wiki/1252599548343744/1298366845681698
[为什么我不建议你使用Java序列化]: https://cloud.tencent.com/developer/article/1752784
[transient关键字]:https://blog.csdn.net/u012723673/article/details/80699029

