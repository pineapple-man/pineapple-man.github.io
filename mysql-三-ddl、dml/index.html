<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="pineapple-man"><title>MySQL(三)DDL、DML - pineapple-man</title><meta name="author" content="pineapple-man"><meta name="keywords" content="mysql"><link rel="icon" href="https://pineapple-man.github.io/assets/images/logo.svg"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"pineapple-man","sameAs":["https://github.com/pineapple-man","mailto://mingchaohu720@gmail.com"],"image":"logo.png"},"articleBody":"\n¶数据类型\n🎶 数据类型选取的三大原则:\n\n选取的类型，越准确越好，尽量使用可以正确存储数据的最小数据类型\n类型越简单越好，因为简单数据类型的操作通常需要更少的 CPU 周期\n尽量避免 NULL ，如果查询中包含可为 NULL 的列，对 MySQ L 来说更难优化，这是由于为 NULL 的列增加 、索引统计和值比较都更复杂\n\n\n数据类型主要分为以下四种：数值类型、字符类型、日期类型和二进制类型\n¶数值类型\n数值型主要包括三个部分：整型、小数和位类型\n¶整数类型\n\n\n\n整数类型\n字节\n范围\n\n\n\n\nTinyint\n1\n有符号：-128~127 无符号：0~255\n\n\nSmallint\n2\n有符号：-32768~32767 无符号：0~65535\n\n\nMediumint\n3\n有符号：-8388608~8388607 无符号：0~1677215\n\n\nInt、integer\n4\n有符号：- 2147483648~2147483647 无符号：0~4294967295\n\n\nBigint\n8\n有符号： -9223372036854775808 ~9223372036854775807  无符号：0~ 9223372036854775807*2+1\n\n\n\n🎶整型数据类型相关注意点\n\n如果不指定整型是无符号还是有符号，则默认是有符号。可以手动田间UNSIGNED指定类型位无符号整型\n如果存入的数值超出类型范围，会发生out of range错误提示\nMySQL 支持在类型名称后面的小括号内指定显示宽度，如果数字位数足够或大于，则忽略宽度，如果数字位数不够的空间用字符0填满，但要配合ZEROFILL使用，不手动指定宽度，使用默认宽度\nAUTO_INCREMENT属性，该属性只能用于整型，AUTO_INCREMENT 标识列一般从 1 开始，每行增加 1，不用手动插入，但必须定位此列位PRIMARY_KEY或UNIQUE键\n\n\n123456789101112CREATE TABLE IF NOT EXISTS myTab(\tC1 TINYINT ZEROFILL,\tC2 SMALLINT ZEROFILL,\tC3 MEDIUMINT ZEROFILL,\tC4 INT ZEROFILL,\tC5 BIGINT ZEROFILL,\tC6 TINYINT UNSIGNED ZEROFILL,\tC7 SMALLINT UNSIGNED ZEROFILL,\tC3 MEDIUMINT UNSIGNED ZEROFILL,\tC4 INT UNSIGNED ZEROFILL,\tC5 BIGINT UNSIGNED ZEROFILL,);\t#最终查看表结构信息,发现所有类型自动变为无符号\n¶小数类型\nMySQL 中小数类型共分为两种：浮点数和定点数\n\n\n\n浮点数类型\n字节\n范围\n\n\n\n\nfloat\n4\n±1.75494351E-38~±3.402823466E+38\n\n\ndouble\n8\n±2.2250738585072014E-308~ ±1.7976931348623157E+308\n\n\n定点数类型\n字节\n范围\n\n\nDEC(M,D) DECIMAL(M,D)\nM+2\n最大取值范围与 double 相同，给定 decimal 的有效取值范围由 M 和 D 定\n\n\n\n🎶 小数类型注意事项\n浮点数和定点数都可以用类型名称后加(M,D)的方式来表示。其中 M 表示精度，该值的整数位+小数位一共显示 M 位数字；D 表示标度，小数位数一共显示 D 位数，超出则四舍五入，不够补零\n\n具体的例子如下：\n12345CREATE TABLE IF NOT EXISTS myTab(\tF1 FLOAT(5,3),\tF2 DOUBLE(5,3),\tF3 DECIMAL(5,3));\n\n🆚 浮点数和定点数的区别：\n\n定点数在 MySQL 内部以字符串形式存放，比浮点数更精确，适合用于表示货币等精度高的数据\n在不指定精度时，浮点数默认会按照实际的精度来显示，而定点数在不指定精度时，默认为(10,0)\n浮点数如果数据越过了精度和标度值，则自动将四舍五入后的结果插入，系统不会报错；定点数将会报错\n\n\n¶位类型\n\n\n\n位类型\n字节\n范围\n\n\n\n\nBit(M)\n1~8\nBit(1)~bit(8)\n\n\n\n🎶 位类型注意事项\n\n位类型会将数值转换位二进制数存入数据库中\nM 的范围是:1~64，表示位类型需要的二进制位数，如果超过，会报Out of range错误，不写默认为1\n一般搭配 BIN() 显示为二进制格式或 HEX() 显示为十六进制格式两个函数进行读取\n\n\n1234CREATE TABLE IF NOT EXISTS myTab(\tb1 BIT,\tb2 BIT(8));\n¶字符类型\n🎶 用来保存 MySQL 中较短的字符串\n\n\n\n字符串类型\n最多字符数\n描述及存储需求\n\n\n\n\nchar(M)\nM\nM 为 0~255 之间的整数\n\n\nvarchar(M)\nM\nM 为 0~65535 之间的整数\n\n\ntext\n❌\n字符串类型，存储较长文本\n\n\n\n🆚 char 与 varchar 类型对比\n\n存储的列长度\n\nCHAR：创建表时声明列的长度且长度固定\nVARCHAR：创建时声明列的最大长度\n\n\n数据检索时\n\nCHAR：删除了尾部的空格\nVARCHAR：保留了这些空格\n\n\n效率对比\n\nCHAR 长度固定，效率高于 VARCHAR\n\n\n\n\n12345CREATE TABLE IF NOT EXISTS myTab(\tid INT NOT NULL PRIMARY KEY AUTO_INCREMENT,    n1 VARCHAR(4),    n2 CHAR(4));\n对于字符串类型，常用的就是 char 以及 varchar ；为了使用的完整性，下面介绍不经常使用的字符类型\n\n\n\n类型\n含义\n\n\n\n\nBINARY\n类似于 CHAR,不同的是它包含二进制字符\n\n\nVARBINARY\n类似于 VARCHAR,不同的是它包含可变二进制字符串\n\n\nEnum\n枚举类型，要求插入的值必须属于列表中指定的值之一，如果列表成员为 1~255，则需要 1 个字节存储，如果列表成员为 255~65535，则需要 2 个字节存储；最多存储 65535 个成员\n\n\nSET\n和 Enum 类型类似，里面可以保存 0~64 个成员。和 Enum 类型最大的区别是：SET 类型一次可以选取多个成员，而 Enum 只能选一个\n\n\n\nbinary 和 varbinary 也可以用于存储字符型，不同的是，binary(M)和 varbinary(M):M 代表的是最多字节数\n✨ Enum 类型特点：\n\n必须用单引号引起来\n类型的值忽略大小写\n将一个无效值插入一个 ENUM (即，一个不在允许值列表中的字符串)，空字符串将作为一个特殊的错误值被插入。事实上，这个字符串有别于一个「 普通的 」空字符串，因为这个字符串有个数字索引值为 0\n成员值的索引从 1 开始，所以可以通过插入索引值的方式插入值，会自动显示为对应的成员值\nEnum 类型的值必须为固定的值，不能是函数、表达式、变量\n对于允许插入 null 的 Enum 类型，可以插入 null 值，序列号默认为 null\n\n\nSET 类型根据成员个数不同，存储所占的字节也不同\n\n\n\n成员数\n字节数\n\n\n\n\n1 ～ 8\n1\n\n\n9 ～ 16\n2\n\n\n17 ～ 24\n3\n\n\n25 ～ 32\n4\n\n\n33 ～ 64\n8\n\n\n\n🎶 真正 SET 类型存储的大小，根据版本不同可能有所不同\n¶日期类型\n\n\n\n日期和时间类型\n字节\n最小值\n最大值\n\n\n\n\nDATE(yyyy-MM-dd)\n4\n1000-01-01\n9999-12-31\n\n\nDATETIME(日期+时间)\n8\n1000-01-01 00:00:00\n9999-12-31 23:59:59\n\n\nTIMESTAMP(日期+时间)\n4\n199700101080001\n2038 年的某个时刻\n\n\nTIME(hh:mm:ss)\n3\n-838:59:59\n838:59:59\n\n\nYEAR\n1\n1901\n2155\n\n\n\n🆚 DATETIME与TIMESTAMP的区别\n\nTIMESTAMP支持的时间范围较小；DATETIME支持的时间范围非常大，但使用的字节多\nTIMESTAMP和实际时区有关，更能反映实际的日期，而DATETIME则只能反映出插入时的当地时区\nTIMESTAMP的属性受 MySQL 版本和 SQLMode 的影响很大\n\n\n¶二进制类型\n二进制类型常用的只有 BLOB 类型，BLOB 类型经常用于存储图片数据\n¶DDL 语言\nDDL(Data Define Language)数据定义语言，用于对数据库和表的管理和操作，对应的基本操作如下表：\n\n\n\nDDL 语句\n含义\n\n\n\n\nSHOW DATABASES;\n查看数据库\n\n\nUSE mysql;\n使用 mysql 数据库\n\n\nSHOW CREATE TABLE 表名;\n查看指定表的创建语句\n\n\nSHOW TABLES;\n展示 mysql 数据库中的所有数据表\n\n\nSHOW TABLES FROM information_schema;\n不改变当前所在的数据库，查看相应数据库中的表格\n\n\n\n按照对数据库操作的主体不同，DDL 语言主要可以分为以下两部分：创建数据库、删除数据库\n¶数据库定义操作\n对于数据库的操作，通常使用的只有两种操作：创建数据以及删除数据库\n创建数据库的语句如下：\n\n12CREATE DATABASE databaseName；\t#多次运行会报错CREATE DATABASE [IF NOT EXISTS] databaseName;\n删除数据库的语句如下：\n\n12DROP DATABASE databaseName;\t#没有进行表检查DROP DATABASE IF EXISTS databaseName;\n¶对数据库中的表进行操作\n选择了对应的数据库后，就可以对数据库中存在的表进行操作，对表的操作有以下几种：创建表、删除表和修改表\n¶创建表\n表的创建拥有两种方式：自定义表结构以及使用子查询创建表\n¶自定义表结构\n123456CREATE TABLE [IF NOT EXISTS] 表名(\t字段名 数据类型 [字段约束],\t字段名 数据类型 [字段约束],\t字段名 数据类型 [字段约束],\t字段名 数据类型 [字段约束]);\n🎶命名规则\n\n数据库名不得超过 30 个字符，变量名限制为 29 个\n必须只能包含 A–Z, a–z, 0–9, _共 63 个字符\n不能在对象名的字符间留空格\n必须不能和用户定义的其他对象重名\n必须保证你的字段没有和保留字、数据库系统或常用方法冲突\n保持字段名和类型的一致性,在命名字段并为其指定数据类型的时候一定要保证一致性。假如数据类型在一个表里是整数,那在另一个表里可就别变成字符型了\n\n\n创建 stus 表,要求具有学生学号、姓名、年龄、性别属性\n123456CREATE TABLE stus(\tsid\t    CHAR(6),\tsname\tVARCHAR(20),\tage\t\tINT,\tgender\tVARCHAR(10));\n\n¶使用子查询创建表\n12CREATE TABLE 表名[(column,column,...,column)]AS 子查询\n🎶 使用子查询创建表注意点：\n\n子查询的结果列应当和定义中表的列相互对应\n通过列名和默认值定义列\n\n\n👴 开发中常用如下方式创建表，这是因为这种方式能够保证创建表的确定性\n12DELETE TABLE IF EXISTS 需要创建的表名;CREATE TABLE 需要创建的表名;\n¶删除表\n1DROP TABLE [IF EXISTS ] tableName;\n¶修改表\n对表的修改体现在对表的列进行修改，主要完成以下几点功能：修改表名、增加属性列、修改属性列名、修改属性列的数据类型、修改属性列的完整性约束、删除属性列\n修改表的基本语句如下：\n1ALTER TABLE 表名 ADD|MODIFY|DROP|CHANGE COLUMN 字段名 [字段类型];\n🆚CHANGE与MODIFY的区别\n\nCHANGE:主要操作字段名的修改，同样会进行字段间数据类型的更改，对于字段间的完整性约束并不会进行修改\nMODIFY:主要修改字段类型以及完整性约束\n\n\n¶修改字段名\n1ALTER TABLE CHANGE COLUMN 旧字段名 新字段名 新字段数据类型 新字段约束;\n修改 stu 表的 gender 列名为 sex\n1ALTER TABLE stu CHANGE COLUMN gender sex CHAR(2);\n\n¶修改表名\n123ALTER TABLE 旧表名 RENAME TO 新表名;#修改stu表名称为studentALTER TABLE stu RENAME [TO] student;\n¶修改字段类型和列级约束\n1ALTER TABLE 表名 MODIFY COLUMN 字段名 新字段数据类型;\n修改 stu 表的 gender 列类型为 CHAR(2)\n1ALTER TABLE stu MODIFY COLUMN gender char(2);\n\n¶添加字段\n1ALTER TABLE 表名 ADD COLUMN 新字段名 新字段类型 [新字段约束];\n给 stus 表添加 classname 列\n1ALTER TABLE stu ADD COLUMN classname char(10);\n¶删除字段\n123ALTER TABLE 表名 DROP COLUMN 列名;#删除stu表的classname列ALTER TABLE stu DROP COLUMN classname;\n¶DML 语言\nDML(Data Manipulation Language) 数据操作语言，用来定义数据库记录(数据)\n¶向表中插入数据(增)\n向表中插入数据的基本格式如下：\n12INSERT INTO 表名 (字段名1,字段名2,...,字段名n)VALUES (值1,值2,...,值n),(值1,值2,...,值n),...,(值1,值2,...,值n)\n✨ INSERT 语句特点\n\n字段类型和值类型一致或兼容，而且一一对应(包括类型、约束等匹配)\n可以为空的字段(NULL 约束)，可以不用插入值，或用 NULL 填充\n不可以为空的字段(NOT NULL 约束)，必须插入值\n字段个数和值的个数必须是一致\n字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致\n数值型的值，不用单引号；非数值型的值，必须使用单引号\n\n\n1234567891011# 将所有字段都书写insert into stu (sid,sname,age,sex) values(1,&quot;a&quot;,11,&#x27;m&#x27;),(2,&quot;a&quot;,11,&#x27;m&#x27;),(3,&quot;a&quot;,11,&#x27;m&#x27;);# 省略字段名，表示按创建表时列的顺序插入所有列的值insert into stu values(1,&quot;a&quot;,11,&#x27;m&#x27;),(2,&quot;a&quot;,11,&#x27;m&#x27;),(3,&quot;a&quot;,11,&#x27;m&#x27;);## 只给某些特定字段插入数据，其他字段使用默认值或NULLINSERT INTO stu (sname,sex) VALUES(&quot;c&quot;,&#x27;m&#x27;);\n🎶 所有字符串数据必须使用单引号\n\n¶修改表中数据(改)\n修改表中数据分为：修改单表数据和修改多表数据\n¶修改单表数据\n12UPDATE 表名 SET 字段=新值,字段=新值[WHERE 筛选条件]\n12345#此操作将修改所有记录update stu set sid=&#x27;123456&#x27;,sname=&quot;张三&quot;,age=18,sex=&#x27;m&#x27;;#修改满足特定条件的行update stu set sid=&#x27;123456&#x27;,sname=&quot;李四&quot;,age=18,sex=&#x27;f&#x27; where sid is null;\n\n¶修改多表数据\n修改多表数据类似于多表连接操作 + 更新操作，具体的使用格式如下：\n123456789## SQL 92UPDATE 表1 别名1,表2 别名2SET 字段=新值,字段=新值WHERE 连接条件 AND 筛选条件## SQL 99UPDATE 表1 [AS] 别名1 [INNER] JOIN 表2 [AS] 别名2 ON 连接条件SET 字段=新值,字段=新值WHERE 筛选条件\n12345678910## SQL 92语法进行多表连接update stu as s1, stu2 as s2set s1.`sname`=&#x27;王五&#x27;,s2.`sname`=&#x27;赵六&#x27;where s1.`sid`=s2.`sid` and s1.`sex`=&#x27;f&#x27;;#SQL 99语法进行多表连接update stu as s1 inner join stu2 s2on s1.`sid`=s2.`sid`set s1.`sname`=&#x27;三张&#x27;,s2.`age`=25where s1.`sname`=&#x27;张三&#x27;;\n\n¶删除表中数据(删)\n删除表中数据分为：单表的删除和多表的删除\n¶单表的删除\n123456## 方式一:使用DELETE语句DELETE FROM 表名[WHERE 筛选条件]## 方式二：使用TRUNCATE语句TRUNCATE TABLE 表名\n12345## 删除stu表中名字为王五的记录delete FROM stu where sname=&#x27;王五&#x27;;#删除stu2表中的所有记录truncate table stu2;\n\n¶多表的删除\n123DELETE 别名1,别名2FROM 表1 别名1,表2 别名2WHERE 连接条件 AND 筛选条件\n🆚 DELETE 语句与 TRUNCATE 语句的区别\n🎶 两种方式删除表的区别如下：\n\ndelete 可以添加 WHERE 条件，TRUNCATE 不能添加 WHERE 条件，一次性清除所有数据\nTRUNCATE 效率高于 DELETE\n使用 DELETE 删除后，重新插入数据，记录从断点处开始\n使用 TRUNCATE 删除后，重新插入数据，记录从 1 开始\nTRUNCATE 删除后事务不能回滚，DELETE 删除后可以回滚\ndelete 删除数据，会返回受影响的行数；TRUNCATE 删除数据，不返回受影响的行数\n\n\n🎶 TRUNCATE 实际操作是将表中所有数据删除，而后创建了一个具有相同表结构的新表\n¶完整性约束\n为了保证数据的一致性和完整性，SQL 规范以约束的方式对表数据进行额外的条件限制。其中完整性约束是为了表的数据的正确性！如果数据不正确，那么一开始就不能添加到表中。简而言之，约束是表级的强制规定\n\n可以在创建表时规定约束（通过 CREATE TABLE 语句），或者在表创建之后也可以（通过 ALTER TABLE 语句）\n¶约束分类\n常用的六种约束及其对应的含义如下：\n\n\n\n完整性约束\n含义\n\n\n\n\nNOT NULL\n非空约束\n\n\nDEFAULT\n默认值\n\n\nUNIQUE\n唯一约束，规定某个字段在整个表中是唯一的\n\n\nCHECK\n检查约束\n\n\nPRIMARY KEY\n主键约束(非空且唯一)\n\n\nFOREIGN KEY\n外键约束\n\n\n\n🎶MySQL 不支持 check 约束，但可以使用 check 约束，就是任何效果\n根据约束所要求的列数，可以将约束类型分为以下两种:单列约束和多列约束\n\n\n\n约束类型\n含义\n\n\n\n\n单列约束\n每个约束只约束一列\n\n\n多列约束\n每个约束可约束多列数据\n\n\n\n根据约束的作用范围，约束可分为：列级约束和表记约束\n\n\n\n约束类型\n含义\n\n\n\n\n列级约束\n只能作用在一个列上，跟在列的定义后面\n\n\n表级约束\n可以作用在多个列上，不与列一起，而是单独定义\n\n\n\n¶NOT NULL 约束\n非空约束用于确保当前列的值不为空值，非空约束只能出现在表对象的列上\n\n✨ Null 类型特征：\n\n所有的类型的值都可以是 null，包括 int、float 等数据类型\n空字符串””不等于 null，0 也不等于 null\n\n\n12345678910111213141516171819#创建 not null 约束：CREATE TABLE emp(id INT(10) NOT NULL,NAME VARCHAR(20) NOT NULL,sex CHAR NULL);#增加 not null 约束：ALTER TABLE empMODIFY sex VARCHAR(30) NOT NULL;#取消 not null 约束：ALTER TABLE empMODIFY sex VARCHAR(30) NULL;#取消 not null 约束，增加默认值：ALTER TABLE empMODIFY NAME VARCHAR(15) DEFAULT &#x27;abc&#x27; NULL;\n¶UNIQUE 约束\n唯一约束，允许出现多个空值（ NULL ）\n\n同一个表可以有多个唯一约束，多个列组合的约束。在创建唯一约束的时候，如果不给唯一约束名称，就默认和列名相同。\nMySQL 会给唯一约束的列上默认创建一个唯一索引\n123456789101112131415161718192021222324#创建表时指定唯一键约束CREATE TABLE USER( id INT NOT NULL, NAME VARCHAR(25), PASSWORD VARCHAR(16), #使用表级约束语法 CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD));#添加唯一约束#方式一ALTER TABLE USERADD UNIQUE(NAME,PASSWORD);#方式二ALTER TABLE USERADD CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD);#方式三ALTER TABLE USERMODIFY NAME VARCHAR(20) UNIQUE;## 删除约束ALTER TABLE USERDROP INDEX uk_name_pwd;\n¶PRIMARY KEY 约束\n主键约束相当于唯一约束+非空约束的组合，主键约束列不允许重复，也不允许出现空值\n\n如果是多列组合的主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。每个表最多只允许一个主键，建立主键约束可以在列级别创建，也可以在表级别上创建。MySQL 的主键名总是 PRIMARY，当创建主键约束时，系统默认会在所在的列和列组合上建立对应的唯一索引。\n123456789101112131415161718192021222324252627## 创建表时，在定义字段时就声明主键约束CREATE TABLE emp4(id INT AUTO_INCREMENT PRIMARY KEY,NAME VARCHAR(20));## 表级模式创建主键约束CREATE TABLE emp5(id INT NOT NULL AUTO_INCREMENT,NAME VARCHAR(20),pwd VARCHAR(15),CONSTRAINT emp5_id_pk PRIMARY KEY(id));## 多列组合的主键约束，必须使用表级模式CREATE TABLE emp6(id INT NOT NULL,NAME VARCHAR(20),pwd VARCHAR(15),CONSTRAINT emp7_pk PRIMARY KEY(NAME,pwd));## 删除主键约束ALTER TABLE emp5 DROP PRIMARY KEY;## 添加主键约束ALTER TABLE emp5 ADD  PRIMARY KEY(NAME,pwd);#修改主键约束ALTER TABLE emp5 MODIFY id INT PRIMARY KEY;\n¶FOREIGN KEY 约束\n外键约束是保证一个或两个表之间的参照完整性，外键是构建于一个表的两个字段或是两个表的两个字段之间的参照关系。外键约束只能使用表级模式创建\n\n从表的外键值必须在主表中能找到或者为空。当主表的记录被从表参照时，主表的记录将不允许删除，如果要删除数据，需要先删除从表中依赖该记录的数据，然后才可以删除主表的数据。\n🎶 外键约束的参照列，在主表中引用的只能是主键或唯一键约束的列，同一个表可以有多个外键约束\n1234567891011121314151617## 主表CREATE TABLE classes(id INT,NAME VARCHAR(20),number INT,PRIMARY KEY(NAME,number));## 从表CREATE TABLE student(id INT AUTO_INCREMENT PRIMARY KEY,classes_name VARCHAR(20),classes_number INT,FOREIGN KEY(classes_name,classes_number)REFERENCES classes(NAME,number));\n123456#删除外键约束：ALTER TABLE emp DROP FOREIGN KEY emp_dept_id_fk;## 增加外键约束ALTER TABLE emp ADD [CONSTRAINT emp_dept_id_fk]FOREIGN KEY(dept_id) REFERENCES dept(dept_id);\n123ON DELETE CASCADE(级联删除): 当父表中的列被删除时，子表中相对应的列也被删除ON DELETE SET NULL(级联置空): 当父表中的列被删除时,子表中相应的列置空\n¶CHECK 约束\nMySQL 可以使用 check 约束，但 check 约束对数据验证没有任何作用,添加数据时，没有任何错误或警告\n\n1234567CREATE TABLE temp(id INT AUTO_INCREMENT,NAME VARCHAR(20),age INT CHECK(age &gt; 20),PRIMARY KEY(id));\n¶AUTO_INCREMENT\n自增长列要求必须设置在一个键上，比如主键或唯一键。自增长列要求数据类型为数值型，并且一个表至多只能有一个自增长列\n\n1234CREATE TABLE gradeinfo(\tgradeID INT PRIMARY KEY AUTO_INCREMENT,\tgradeName VARCHAR(20));\n","dateCreated":"2022-01-30T07:18:46+00:00","dateModified":"2023-06-07T02:13:34+00:00","datePublished":"2022-01-30T07:18:46+00:00","description":"mysql DQL 数据查询语言，用来查询记录是学习 SQL 的重点之一","headline":"MySQL(三)DDL、DML","image":["https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://pineapple-man.github.io/mysql-%E4%B8%89-ddl%E3%80%81dml/"},"publisher":{"@type":"Organization","name":"pineapple-man","sameAs":["https://github.com/pineapple-man","mailto://mingchaohu720@gmail.com"],"image":"logo.png","logo":{"@type":"ImageObject","url":"logo.png"}},"url":"https://pineapple-man.github.io/mysql-%E4%B8%89-ddl%E3%80%81dml/","keywords":"MySQL","thumbnailUrl":"https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql.jpg"}</script><meta name="description" content="mysql DQL 数据查询语言，用来查询记录是学习 SQL 的重点之一"><meta property="og:type" content="blog"><meta property="og:title" content="MySQL(三)DDL、DML"><meta property="og:url" content="https://pineapple-man.github.io/mysql-%E4%B8%89-ddl%E3%80%81dml/"><meta property="og:site_name" content="pineapple-man"><meta property="og:description" content="mysql DQL 数据查询语言，用来查询记录是学习 SQL 的重点之一"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-01-30T07:18:46.000Z"><meta property="article:modified_time" content="2023-06-07T02:13:34.007Z"><meta property="article:author" content="pineapple-man"><meta property="article:tag" content="MySQL"><meta name="twitter:card" content="summary"><meta property="og:image" content="https://pineapple-man.github.io/assets/images/logo.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql.jpg"><meta class="swiftype" name="image" data-type="enum" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/mysql/mysql.jpg"><link rel="stylesheet" href="/assets/css/style-oth3meuzcjopbgwqbdvoxqknhcm0sy9wkullcc94zhkkop3pmfrpl5t4fzzz.min.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-210516333-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-210516333-1")</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"></head><body><div id="blog"><header id="header" data-behavior="5"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">pineapple-man</a></div><a class="header-right-picture" href="#about" aria-label="打开链接: /#about"><img class="header-picture" src="/assets/images/logo.png" alt="作者的图片"></a></header><nav id="sidebar" data-behavior="5"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="阅读有关作者的更多信息"><img class="sidebar-profile-picture" src="/assets/images/logo.png" alt="作者的图片"></a><h4 class="sidebar-profile-name">pineapple-man</h4><h5 class="sidebar-profile-bio"><p>做一个菠萝：站得笔直，头戴王冠，内心甜美</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" rel="noopener" title="首页"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">首页</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-categories" rel="noopener" title="分类"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">分类</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-tags" rel="noopener" title="标签"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">标签</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-archives" rel="noopener" title="归档"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">归档</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="#about" rel="noopener" title="关于"><i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i> <span class="sidebar-button-desc">关于</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/pineapple-man" target="_blank" rel="noopener" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="mailto://mingchaohu720@gmail.com" target="_blank" rel="noopener" title="邮箱"><i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i> <span class="sidebar-button-desc">邮箱</span></a></li></ul></div></nav><div id="main" data-behavior="5" class="hasCoverMetaIn"><article class="post"><div class="post-header main-content-wrap text-center"><h1 class="post-title">MySQL(三)DDL、DML</h1><div class="post-meta"><time datetime="2022-01-30T07:18:46+00:00">1月 30, 2022 </time><span>发布在 </span><a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> <i class="fas fa-book-open"></i> 本文共<span class="post-count"> 5.2k </span>字 <i class="far fa-clock"></i> 阅读预计<span class="post-count"> 52 </span>分钟</div></div><div class="post-content markdown"><div class="main-content-wrap"><h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">数值类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">整数类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">小数类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%8D%E7%B1%BB%E5%9E%8B"><span class="toc-text">位类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B"><span class="toc-text">字符类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B"><span class="toc-text">日期类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%B1%BB%E5%9E%8B"><span class="toc-text">二进制类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL-%E8%AF%AD%E8%A8%80"><span class="toc-text">DDL 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9A%E4%B9%89%E6%93%8D%E4%BD%9C"><span class="toc-text">数据库定义操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C"><span class="toc-text">对数据库中的表进行操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-text">创建表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-text">自定义表结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-text">使用子查询创建表</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="toc-text">修改表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="toc-text">修改字段名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-text">修改表名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%88%97%E7%BA%A7%E7%BA%A6%E6%9D%9F"><span class="toc-text">修改字段类型和列级约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5"><span class="toc-text">添加字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5"><span class="toc-text">删除字段</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML-%E8%AF%AD%E8%A8%80"><span class="toc-text">DML 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE-%E5%A2%9E"><span class="toc-text">向表中插入数据(增)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E4%B8%AD%E6%95%B0%E6%8D%AE-%E6%94%B9"><span class="toc-text">修改表中数据(改)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%8D%95%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-text">修改单表数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%A4%9A%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-text">修改多表数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8%E4%B8%AD%E6%95%B0%E6%8D%AE-%E5%88%A0"><span class="toc-text">删除表中数据(删)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-text">单表的删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-text">多表的删除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-text">完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E5%88%86%E7%B1%BB"><span class="toc-text">约束分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NOT-NULL-%E7%BA%A6%E6%9D%9F"><span class="toc-text">NOT NULL 约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNIQUE-%E7%BA%A6%E6%9D%9F"><span class="toc-text">UNIQUE 约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PRIMARY-KEY-%E7%BA%A6%E6%9D%9F"><span class="toc-text">PRIMARY KEY 约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FOREIGN-KEY-%E7%BA%A6%E6%9D%9F"><span class="toc-text">FOREIGN KEY 约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CHECK-%E7%BA%A6%E6%9D%9F"><span class="toc-text">CHECK 约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AUTO-INCREMENT"><span class="toc-text">AUTO_INCREMENT</span></a></li></ol></li></ol><h2 id="数据类型"><a class="header-anchor" href="#数据类型">¶</a>数据类型</h2><p>🎶 数据类型选取的三大原则:</p><div class="alert success no-icon"><ol><li>选取的类型，越准确越好，尽量使用可以正确存储数据的最小数据类型</li><li>类型越简单越好，因为简单数据类型的操作通常需要更少的 CPU 周期</li><li>尽量避免 NULL ，如果查询中包含可为 NULL 的列，对 MySQ L 来说更难优化，这是由于为 NULL 的列增加 、索引统计和值比较都更复杂</li></ol></div><p>数据类型主要分为以下四种：<strong>数值类型</strong>、<strong>字符类型</strong>、<strong>日期类型</strong>和<strong>二进制类型</strong></p><h3 id="数值类型"><a class="header-anchor" href="#数值类型">¶</a>数值类型</h3><p>数值型主要包括三个部分：整型、小数和位类型</p><h4 id="整数类型"><a class="header-anchor" href="#整数类型">¶</a>整数类型</h4><table><thead><tr><th style="text-align:center">整数类型</th><th style="text-align:center">字节</th><th style="text-align:center">范围</th></tr></thead><tbody><tr><td style="text-align:center"><strong>Tinyint</strong></td><td style="text-align:center">1</td><td style="text-align:center">有符号：-128~127 无符号：0~255</td></tr><tr><td style="text-align:center"><strong>Smallint</strong></td><td style="text-align:center">2</td><td style="text-align:center">有符号：-32768~32767 无符号：0~65535</td></tr><tr><td style="text-align:center">Mediumint</td><td style="text-align:center">3</td><td style="text-align:center">有符号：-8388608~8388607 无符号：0~1677215</td></tr><tr><td style="text-align:center"><strong>Int</strong>、integer</td><td style="text-align:center">4</td><td style="text-align:center">有符号：- 2147483648~2147483647 无符号：0~4294967295</td></tr><tr><td style="text-align:center"><strong>Bigint</strong></td><td style="text-align:center">8</td><td style="text-align:center">有符号： -9223372036854775808 ~9223372036854775807<br>无符号：0~ 9223372036854775807*2+1</td></tr></tbody></table><p>🎶整型数据类型相关注意点</p><div class="alert success no-icon"><ol><li>如果不指定整型是无符号还是有符号，则默认是有符号。可以手动田间<code>UNSIGNED</code>指定类型位无符号整型</li><li>如果存入的数值超出类型范围，会发生<code>out of range</code>错误提示</li><li>MySQL 支持在类型名称后面的小括号内指定显示宽度，如果数字位数足够或大于，则忽略宽度，如果数字位数不够的空间用字符<code>0</code>填满，但要配合<code>ZEROFILL</code>使用，不手动指定宽度，使用默认宽度</li><li><code>AUTO_INCREMENT</code>属性，该属性只能用于整型，AUTO_INCREMENT 标识列一般从 1 开始，每行增加 1，不用手动插入，但必须定位此列位<code>PRIMARY_KEY</code>或<code>UNIQUE</code>键</li></ol></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> myTab(</span><br><span class="line">	C1 TINYINT ZEROFILL,</span><br><span class="line">	C2 <span class="type">SMALLINT</span> ZEROFILL,</span><br><span class="line">	C3 MEDIUMINT ZEROFILL,</span><br><span class="line">	C4 <span class="type">INT</span> ZEROFILL,</span><br><span class="line">	C5 <span class="type">BIGINT</span> ZEROFILL,</span><br><span class="line">	C6 TINYINT UNSIGNED ZEROFILL,</span><br><span class="line">	C7 <span class="type">SMALLINT</span> UNSIGNED ZEROFILL,</span><br><span class="line">	C3 MEDIUMINT UNSIGNED ZEROFILL,</span><br><span class="line">	C4 <span class="type">INT</span> UNSIGNED ZEROFILL,</span><br><span class="line">	C5 <span class="type">BIGINT</span> UNSIGNED ZEROFILL,</span><br><span class="line">);	#最终查看表结构信息,发现所有类型自动变为无符号</span><br></pre></td></tr></table></figure><h4 id="小数类型"><a class="header-anchor" href="#小数类型">¶</a>小数类型</h4><p>MySQL 中小数类型共分为两种：<strong>浮点数</strong>和<strong>定点数</strong></p><table><thead><tr><th style="text-align:center">浮点数类型</th><th style="text-align:center">字节</th><th style="text-align:center">范围</th></tr></thead><tbody><tr><td style="text-align:center"><strong>float</strong></td><td style="text-align:center"><strong>4</strong></td><td style="text-align:center">±1.75494351E-38~±3.402823466E+38</td></tr><tr><td style="text-align:center"><strong>double</strong></td><td style="text-align:center"><strong>8</strong></td><td style="text-align:center">±2.2250738585072014E-308~ ±1.7976931348623157E+308</td></tr><tr><td style="text-align:center"><strong>定点数类型</strong></td><td style="text-align:center"><strong>字节</strong></td><td style="text-align:center"><strong>范围</strong></td></tr><tr><td style="text-align:center"><strong>DEC(M,D)</strong> <strong>DECIMAL(M,D)</strong></td><td style="text-align:center"><strong>M+2</strong></td><td style="text-align:center">最大取值范围与 double 相同，给定 decimal 的有效取值范围由 M 和 D 定</td></tr></tbody></table><p>🎶 小数类型注意事项</p><div class="alert info no-icon"><p>浮点数和定点数都可以用类型名称后加<code>(M,D)</code>的方式来表示。其中 <code>M</code> 表示精度，该值的整数位+小数位一共显示 <code>M</code> 位数字；D 表示标度，小数位数一共显示 D 位数，超出则四舍五入，不够补零</p></div><p>具体的例子如下：</p><div class="alert warning no-icon"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> myTab(</span><br><span class="line">	F1 <span class="type">FLOAT</span>(<span class="number">5</span>,<span class="number">3</span>),</span><br><span class="line">	F2 <span class="keyword">DOUBLE</span>(<span class="number">5</span>,<span class="number">3</span>),</span><br><span class="line">	F3 <span class="type">DECIMAL</span>(<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div><p>🆚 浮点数和定点数的区别：</p><div class="alert success no-icon"><ol><li><font style="color:red;font-weight:700">定点数在 MySQL 内部以字符串形式存放</font>，比浮点数更精确，适合用于表示货币等<strong>精度高的数据</strong></li><li>在不指定精度时，浮点数默认会按照实际的精度来显示，而<font style="color:red;font-weight:700">定点数在不指定精度时，默认为(10,0)</font></li><li><strong>浮点数</strong>如果数据<font style="color:red;font-weight:700">越过了精度和标度值</font>，则<font style="color:red;font-weight:700">自动将四舍五入后的结果插入</font>，系统不会报错；<font style="color:red;font-weight:700">定点数将会报错</font></li></ol></div><h4 id="位类型"><a class="header-anchor" href="#位类型">¶</a>位类型</h4><table><thead><tr><th style="text-align:center">位类型</th><th style="text-align:center">字节</th><th style="text-align:center">范围</th></tr></thead><tbody><tr><td style="text-align:center"><strong>Bit(M)</strong></td><td style="text-align:center">1~8</td><td style="text-align:center">Bit(1)~bit(8)</td></tr></tbody></table><p>🎶 位类型注意事项</p><div class="alert success no-icon"><ol><li>位类型会将数值转换位二进制数存入数据库中</li><li>M 的范围是:<code>1~64</code>，表示位类型需要的二进制位数，如果超过，会报<code>Out of range</code>错误，不写默认为<code>1</code></li><li>一般搭配 <code>BIN()</code> 显示为二进制格式或 <code>HEX()</code> 显示为十六进制格式两个函数进行读取</li></ol></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS myTab(</span><br><span class="line">	b1 BIT,</span><br><span class="line">	b2 BIT(8)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="字符类型"><a class="header-anchor" href="#字符类型">¶</a>字符类型</h3><p>🎶 用来保存 MySQL 中较短的字符串</p><table><thead><tr><th style="text-align:center">字符串类型</th><th style="text-align:center">最多字符数</th><th style="text-align:center">描述及存储需求</th></tr></thead><tbody><tr><td style="text-align:center">char(M)</td><td style="text-align:center">M</td><td style="text-align:center">M 为 0~255 之间的整数</td></tr><tr><td style="text-align:center">varchar(M)</td><td style="text-align:center">M</td><td style="text-align:center">M 为 0~65535 之间的整数</td></tr><tr><td style="text-align:center">text</td><td style="text-align:center">❌</td><td style="text-align:center">字符串类型，存储较长文本</td></tr></tbody></table><p>🆚 <code>char</code> 与 <code>varchar</code> 类型对比</p><div class="alert success no-icon"><ol><li>存储的列长度<ul><li>CHAR：创建表时声明列的长度且长度固定</li><li>VARCHAR：创建时声明列的最大长度</li></ul></li><li>数据检索时<ul><li>CHAR：删除了尾部的空格</li><li>VARCHAR：保留了这些空格</li></ul></li><li>效率对比<ul><li>CHAR 长度固定，效率高于 VARCHAR</li></ul></li></ol></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS myTab(</span><br><span class="line">	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    n1 VARCHAR(4),</span><br><span class="line">    n2 CHAR(4)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>对于字符串类型，常用的就是 <code>char</code> 以及 <code>varchar</code> ；为了使用的完整性，下面介绍不经常使用的字符类型</p><table><thead><tr><th style="text-align:center">类型</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">BINARY</td><td style="text-align:center">类似于 CHAR,不同的是它包含二进制字符</td></tr><tr><td style="text-align:center">VARBINARY</td><td style="text-align:center">类似于 VARCHAR,不同的是它包含可变二进制字符串</td></tr><tr><td style="text-align:center">Enum</td><td style="text-align:center">枚举类型，要求插入的值必须属于列表中指定的值之一，如果列表成员为 1~255，则需要 1 个字节存储，如果列表成员为 255~65535，则需要 2 个字节存储；最多存储 65535 个成员</td></tr><tr><td style="text-align:center">SET</td><td style="text-align:center">和 Enum 类型类似，里面可以保存 0~64 个成员。和 Enum 类型最大的区别是：SET 类型一次可以选取多个成员，而 Enum 只能选一个</td></tr></tbody></table><p>binary 和 varbinary 也可以用于存储字符型，不同的是，binary(M)和 varbinary(M):M 代表的是最多字节数</p><p>✨ Enum 类型特点：</p><div class="alert success no-icon"><ol><li>必须用单引号引起来</li><li>类型的值忽略大小写</li><li>将一个无效值插入一个 ENUM (即，一个不在允许值列表中的字符串)，空字符串将作为一个特殊的错误值被插入。事实上，这个字符串有别于一个「 普通的 」空字符串，因为这个字符串有个数字索引值为 0</li><li>成员值的索引从 1 开始，所以可以通过插入索引值的方式插入值，会自动显示为对应的成员值</li><li>Enum 类型的值必须为固定的值，不能是函数、表达式、变量</li><li>对于允许插入 null 的 Enum 类型，可以插入 null 值，序列号默认为 null</li></ol></div><p>SET 类型根据成员个数不同，存储所占的字节也不同</p><table><thead><tr><th style="text-align:center">成员数</th><th style="text-align:center">字节数</th></tr></thead><tbody><tr><td style="text-align:center">1 ～ 8</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">9 ～ 16</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">17 ～ 24</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">25 ～ 32</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">33 ～ 64</td><td style="text-align:center">8</td></tr></tbody></table><p>🎶 真正 <code>SET</code> 类型存储的大小，根据版本不同可能有所不同</p><h3 id="日期类型"><a class="header-anchor" href="#日期类型">¶</a>日期类型</h3><table><thead><tr><th style="text-align:center">日期和时间类型</th><th style="text-align:center">字节</th><th style="text-align:center">最小值</th><th style="text-align:center">最大值</th></tr></thead><tbody><tr><td style="text-align:center">DATE(yyyy-MM-dd)</td><td style="text-align:center">4</td><td style="text-align:center">1000-01-01</td><td style="text-align:center">9999-12-31</td></tr><tr><td style="text-align:center">DATETIME(日期+时间)</td><td style="text-align:center">8</td><td style="text-align:center">1000-01-01 00:00:00</td><td style="text-align:center">9999-12-31 23:59:59</td></tr><tr><td style="text-align:center">TIMESTAMP(日期+时间)</td><td style="text-align:center">4</td><td style="text-align:center">199700101080001</td><td style="text-align:center">2038 年的某个时刻</td></tr><tr><td style="text-align:center">TIME(hh:mm:ss)</td><td style="text-align:center">3</td><td style="text-align:center">-838:59:59</td><td style="text-align:center">838:59:59</td></tr><tr><td style="text-align:center">YEAR</td><td style="text-align:center">1</td><td style="text-align:center">1901</td><td style="text-align:center">2155</td></tr></tbody></table><p>🆚 <code>DATETIME</code>与<code>TIMESTAMP</code>的区别</p><div class="alert success no-icon"><ol><li><code>TIMESTAMP</code>支持的时间范围较小；<code>DATETIME</code>支持的时间范围非常大，但使用的字节多</li><li><code>TIMESTAMP</code>和实际时区有关，更能反映实际的日期，而<code>DATETIME</code>则只能反映出插入时的当地时区</li><li><code>TIMESTAMP</code>的属性受 MySQL 版本和 SQLMode 的影响很大</li></ol></div><h3 id="二进制类型"><a class="header-anchor" href="#二进制类型">¶</a>二进制类型</h3><p>二进制类型常用的只有 BLOB 类型，BLOB 类型经常用于存储图片数据</p><h2 id="DDL-语言"><a class="header-anchor" href="#DDL-语言">¶</a>DDL 语言</h2><p>DDL(Data Define Language)数据定义语言，用于对数据库和表的管理和操作，对应的基本操作如下表：</p><table><thead><tr><th style="text-align:center">DDL 语句</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">SHOW DATABASES;</td><td style="text-align:center">查看数据库</td></tr><tr><td style="text-align:center">USE mysql;</td><td style="text-align:center">使用 mysql 数据库</td></tr><tr><td style="text-align:center">SHOW CREATE TABLE 表名;</td><td style="text-align:center">查看指定表的创建语句</td></tr><tr><td style="text-align:center">SHOW TABLES;</td><td style="text-align:center">展示 mysql 数据库中的所有数据表</td></tr><tr><td style="text-align:center">SHOW TABLES FROM information_schema;</td><td style="text-align:center">不改变当前所在的数据库，查看相应数据库中的表格</td></tr></tbody></table><p>按照对数据库操作的主体不同，DDL 语言主要可以分为以下两部分：<strong>创建数据库</strong>、<strong>删除数据库</strong></p><h3 id="数据库定义操作"><a class="header-anchor" href="#数据库定义操作">¶</a>数据库定义操作</h3><p>对于数据库的操作，通常使用的只有两种操作：创建数据以及删除数据库</p><div class="alert warning no-icon"><p>创建数据库的语句如下：</p></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE databaseName；	#多次运行会报错</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] databaseName;</span><br></pre></td></tr></table></figure><div class="alert warning no-icon"><p>删除数据库的语句如下：</p></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE databaseName;	#没有进行表检查</span><br><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> databaseName;</span><br></pre></td></tr></table></figure><h3 id="对数据库中的表进行操作"><a class="header-anchor" href="#对数据库中的表进行操作">¶</a>对数据库中的表进行操作</h3><p>选择了对应的数据库后，就可以对数据库中存在的表进行操作，对表的操作有以下几种：创建表、删除表和修改表</p><h4 id="创建表"><a class="header-anchor" href="#创建表">¶</a>创建表</h4><p>表的创建拥有两种方式：<strong>自定义表结构</strong>以及<strong>使用子查询创建表</strong></p><h5 id="自定义表结构"><a class="header-anchor" href="#自定义表结构">¶</a>自定义表结构</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 表名(</span><br><span class="line">	字段名 数据类型 [字段约束],</span><br><span class="line">	字段名 数据类型 [字段约束],</span><br><span class="line">	字段名 数据类型 [字段约束],</span><br><span class="line">	字段名 数据类型 [字段约束]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>🎶命名规则</p><div class="alert success no-icon"><ol><li>数据库名不得超过 30 个字符，变量名限制为 29 个</li><li>必须只能包含 A–Z, a–z, 0–9, _共 63 个字符</li><li>不能在对象名的字符间留空格</li><li>必须不能和用户定义的其他对象重名</li><li>必须保证你的字段没有和保留字、数据库系统或常用方法冲突</li><li>保持字段名和类型的一致性,在命名字段并为其指定数据类型的时候一定要保证一致性。假如数据类型在一个表里是整数,那在另一个表里可就别变成字符型了</li></ol></div><div class="alert warning no-icon"><p>创建 stus 表,要求具有学生学号、姓名、年龄、性别属性</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stus(</span><br><span class="line">	sid	    <span class="type">CHAR</span>(<span class="number">6</span>),</span><br><span class="line">	sname	<span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	age		<span class="type">INT</span>,</span><br><span class="line">	gender	<span class="type">VARCHAR</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div><h5 id="使用子查询创建表"><a class="header-anchor" href="#使用子查询创建表">¶</a>使用子查询创建表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名[(<span class="keyword">column</span>,<span class="keyword">column</span>,...,<span class="keyword">column</span>)]</span><br><span class="line"><span class="keyword">AS</span> 子查询</span><br></pre></td></tr></table></figure><p>🎶 使用子查询创建表注意点：</p><div class="alert success no-icon"><ol><li>子查询的结果列应当和定义中表的列相互对应</li><li>通过列名和默认值定义列</li></ol></div><p>👴 开发中常用如下方式创建表，这是因为这种方式能够保证创建表的确定性</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> 需要创建的表名;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 需要创建的表名;</span><br></pre></td></tr></table></figure><h4 id="删除表"><a class="header-anchor" href="#删除表">¶</a>删除表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span> ] tableName;</span><br></pre></td></tr></table></figure><h4 id="修改表"><a class="header-anchor" href="#修改表">¶</a>修改表</h4><p>对表的修改体现在对表的列进行修改，主要完成以下几点功能：<strong>修改表名</strong>、<strong>增加属性列</strong>、<strong>修改属性列名</strong>、<strong>修改属性列的数据类型</strong>、<strong>修改属性列的完整性约束</strong>、<strong>删除属性列</strong></p><p>修改表的基本语句如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span><span class="operator">|</span>MODIFY<span class="operator">|</span><span class="keyword">DROP</span><span class="operator">|</span>CHANGE <span class="keyword">COLUMN</span> 字段名 [字段类型];</span><br></pre></td></tr></table></figure><p>🆚<code>CHANGE</code>与<code>MODIFY</code>的区别</p><div class="alert success no-icon"><ul><li>CHANGE:主要操作字段名的修改，同样会进行字段间数据类型的更改，对于字段间的完整性约束并不会进行修改</li><li>MODIFY:主要修改字段类型以及完整性约束</li></ul></div><h5 id="修改字段名"><a class="header-anchor" href="#修改字段名">¶</a>修改字段名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> CHANGE <span class="keyword">COLUMN</span> 旧字段名 新字段名 新字段数据类型 新字段约束;</span><br></pre></td></tr></table></figure><div class="alert warning no-icon"><p>修改 stu 表的 gender 列名为 sex</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu CHANGE <span class="keyword">COLUMN</span> gender sex <span class="type">CHAR</span>(<span class="number">2</span>);</span><br></pre></td></tr></table></figure></div><h5 id="修改表名"><a class="header-anchor" href="#修改表名">¶</a>修改表名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 旧表名 RENAME <span class="keyword">TO</span> 新表名;</span><br><span class="line">#修改stu表名称为student</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu RENAME [<span class="keyword">TO</span>] student;</span><br></pre></td></tr></table></figure><h5 id="修改字段类型和列级约束"><a class="header-anchor" href="#修改字段类型和列级约束">¶</a>修改字段类型和列级约束</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY <span class="keyword">COLUMN</span> 字段名 新字段数据类型;</span><br></pre></td></tr></table></figure><div class="alert warning no-icon"><p>修改 stu 表的 gender 列类型为 CHAR(2)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu MODIFY <span class="keyword">COLUMN</span> gender <span class="type">char</span>(<span class="number">2</span>);</span><br></pre></td></tr></table></figure></div><h5 id="添加字段"><a class="header-anchor" href="#添加字段">¶</a>添加字段</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> 新字段名 新字段类型 [新字段约束];</span><br></pre></td></tr></table></figure><p>给 stus 表添加 classname 列</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> classname <span class="type">char</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><h5 id="删除字段"><a class="header-anchor" href="#删除字段">¶</a>删除字段</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> 列名;</span><br><span class="line">#删除stu表的classname列</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> classname;</span><br></pre></td></tr></table></figure><h2 id="DML-语言"><a class="header-anchor" href="#DML-语言">¶</a>DML 语言</h2><p>DML(Data Manipulation Language) 数据操作语言，用来定义数据库记录(数据)</p><h3 id="向表中插入数据-增"><a class="header-anchor" href="#向表中插入数据-增">¶</a>向表中插入数据(增)</h3><p>向表中插入数据的基本格式如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 (字段名<span class="number">1</span>,字段名<span class="number">2</span>,...,字段名n)</span><br><span class="line"><span class="keyword">VALUES</span> (值<span class="number">1</span>,值<span class="number">2</span>,...,值n),(值<span class="number">1</span>,值<span class="number">2</span>,...,值n),...,(值<span class="number">1</span>,值<span class="number">2</span>,...,值n)</span><br></pre></td></tr></table></figure><p>✨ <code>INSERT</code> 语句特点</p><div class="alert success no-icon"><ol><li>字段类型和值类型一致或兼容，而且一一对应(包括类型、约束等匹配)</li><li>可以为空的字段(NULL 约束)，可以不用插入值，或用 NULL 填充</li><li>不可以为空的字段(NOT NULL 约束)，必须插入值</li><li>字段个数和值的个数必须是一致</li><li>字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致</li><li>数值型的值，不用单引号；非数值型的值，必须使用单引号</li></ol></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 将所有字段都书写</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu (sid,sname,age,sex) <span class="keyword">values</span></span><br><span class="line">(<span class="number">1</span>,&quot;a&quot;,<span class="number">11</span>,<span class="string">&#x27;m&#x27;</span>),(<span class="number">2</span>,&quot;a&quot;,<span class="number">11</span>,<span class="string">&#x27;m&#x27;</span>),(<span class="number">3</span>,&quot;a&quot;,<span class="number">11</span>,<span class="string">&#x27;m&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 省略字段名，表示按创建表时列的顺序插入所有列的值</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu <span class="keyword">values</span></span><br><span class="line">(<span class="number">1</span>,&quot;a&quot;,<span class="number">11</span>,<span class="string">&#x27;m&#x27;</span>),(<span class="number">2</span>,&quot;a&quot;,<span class="number">11</span>,<span class="string">&#x27;m&#x27;</span>),(<span class="number">3</span>,&quot;a&quot;,<span class="number">11</span>,<span class="string">&#x27;m&#x27;</span>);</span><br><span class="line"></span><br><span class="line">## 只给某些特定字段插入数据，其他字段使用默认值或<span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stu (sname,sex) <span class="keyword">VALUES</span></span><br><span class="line">(&quot;c&quot;,<span class="string">&#x27;m&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="alert info no-icon"><p>🎶 所有字符串数据必须使用单引号</p></div><h3 id="修改表中数据-改"><a class="header-anchor" href="#修改表中数据-改">¶</a>修改表中数据(改)</h3><p>修改表中数据分为：修改单表数据和修改多表数据</p><h4 id="修改单表数据"><a class="header-anchor" href="#修改单表数据">¶</a>修改单表数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 字段<span class="operator">=</span>新值,字段<span class="operator">=</span>新值</span><br><span class="line">[<span class="keyword">WHERE</span> 筛选条件]</span><br></pre></td></tr></table></figure><div class="alert warning no-icon"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#此操作将修改所有记录</span><br><span class="line"><span class="keyword">update</span> stu <span class="keyword">set</span> sid<span class="operator">=</span><span class="string">&#x27;123456&#x27;</span>,sname<span class="operator">=</span>&quot;张三&quot;,age<span class="operator">=</span><span class="number">18</span>,sex<span class="operator">=</span><span class="string">&#x27;m&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#修改满足特定条件的行</span><br><span class="line"><span class="keyword">update</span> stu <span class="keyword">set</span> sid<span class="operator">=</span><span class="string">&#x27;123456&#x27;</span>,sname<span class="operator">=</span>&quot;李四&quot;,age<span class="operator">=</span><span class="number">18</span>,sex<span class="operator">=</span><span class="string">&#x27;f&#x27;</span> <span class="keyword">where</span> sid <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure></div><h4 id="修改多表数据"><a class="header-anchor" href="#修改多表数据">¶</a>修改多表数据</h4><p>修改多表数据类似于多表连接操作 + 更新操作，具体的使用格式如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## <span class="keyword">SQL</span> <span class="number">92</span></span><br><span class="line"><span class="keyword">UPDATE</span> 表<span class="number">1</span> 别名<span class="number">1</span>,表<span class="number">2</span> 别名<span class="number">2</span></span><br><span class="line"><span class="keyword">SET</span> 字段<span class="operator">=</span>新值,字段<span class="operator">=</span>新值</span><br><span class="line"><span class="keyword">WHERE</span> 连接条件 <span class="keyword">AND</span> 筛选条件</span><br><span class="line"></span><br><span class="line">## <span class="keyword">SQL</span> <span class="number">99</span></span><br><span class="line"><span class="keyword">UPDATE</span> 表<span class="number">1</span> [<span class="keyword">AS</span>] 别名<span class="number">1</span> [<span class="keyword">INNER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> [<span class="keyword">AS</span>] 别名<span class="number">2</span> <span class="keyword">ON</span> 连接条件</span><br><span class="line"><span class="keyword">SET</span> 字段<span class="operator">=</span>新值,字段<span class="operator">=</span>新值</span><br><span class="line"><span class="keyword">WHERE</span> 筛选条件</span><br></pre></td></tr></table></figure><div class="alert warning no-icon"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">## <span class="keyword">SQL</span> <span class="number">92</span>语法进行多表连接</span><br><span class="line"><span class="keyword">update</span> stu <span class="keyword">as</span> s1, stu2 <span class="keyword">as</span> s2</span><br><span class="line"><span class="keyword">set</span> s1.`sname`<span class="operator">=</span><span class="string">&#x27;王五&#x27;</span>,s2.`sname`<span class="operator">=</span><span class="string">&#x27;赵六&#x27;</span></span><br><span class="line"><span class="keyword">where</span> s1.`sid`<span class="operator">=</span>s2.`sid` <span class="keyword">and</span> s1.`sex`<span class="operator">=</span><span class="string">&#x27;f&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#<span class="keyword">SQL</span> <span class="number">99</span>语法进行多表连接</span><br><span class="line"><span class="keyword">update</span> stu <span class="keyword">as</span> s1 <span class="keyword">inner</span> <span class="keyword">join</span> stu2 s2</span><br><span class="line"><span class="keyword">on</span> s1.`sid`<span class="operator">=</span>s2.`sid`</span><br><span class="line"><span class="keyword">set</span> s1.`sname`<span class="operator">=</span><span class="string">&#x27;三张&#x27;</span>,s2.`age`<span class="operator">=</span><span class="number">25</span></span><br><span class="line"><span class="keyword">where</span> s1.`sname`<span class="operator">=</span><span class="string">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure></div><h3 id="删除表中数据-删"><a class="header-anchor" href="#删除表中数据-删">¶</a>删除表中数据(删)</h3><p>删除表中数据分为：单表的删除和多表的删除</p><h4 id="单表的删除"><a class="header-anchor" href="#单表的删除">¶</a>单表的删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">## 方式一:使用<span class="keyword">DELETE</span>语句</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名</span><br><span class="line">[<span class="keyword">WHERE</span> 筛选条件]</span><br><span class="line"></span><br><span class="line">## 方式二：使用<span class="keyword">TRUNCATE</span>语句</span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名</span><br></pre></td></tr></table></figure><div class="alert warning no-icon"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 删除stu表中名字为王五的记录</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">FROM</span> stu <span class="keyword">where</span> sname<span class="operator">=</span><span class="string">&#x27;王五&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#删除stu2表中的所有记录</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> stu2;</span><br></pre></td></tr></table></figure></div><h4 id="多表的删除"><a class="header-anchor" href="#多表的删除">¶</a>多表的删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> 别名<span class="number">1</span>,别名<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span> 别名<span class="number">1</span>,表<span class="number">2</span> 别名<span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> 连接条件 <span class="keyword">AND</span> 筛选条件</span><br></pre></td></tr></table></figure><p>🆚 <code>DELETE</code> 语句与 <code>TRUNCATE</code> 语句的区别</p><p>🎶 两种方式删除表的区别如下：</p><div class="alert success no-icon"><ol><li>delete 可以添加 WHERE 条件，TRUNCATE 不能添加 WHERE 条件，一次性清除所有数据</li><li>TRUNCATE 效率高于 DELETE</li><li>使用 DELETE 删除后，重新插入数据，记录从断点处开始<br>使用 TRUNCATE 删除后，重新插入数据，记录从 1 开始</li><li>TRUNCATE 删除后事务不能回滚，DELETE 删除后可以回滚</li><li>delete 删除数据，会返回受影响的行数；TRUNCATE 删除数据，不返回受影响的行数</li></ol></div><p>🎶 TRUNCATE 实际操作是将表中所有数据删除，而后创建了一个具有相同表结构的新表</p><h2 id="完整性约束"><a class="header-anchor" href="#完整性约束">¶</a>完整性约束</h2><div class="alert success no-icon"><p>为了保证数据的一致性和完整性，SQL 规范以约束的方式对表数据进行额外的条件限制。其中完整性约束是为了表的数据的正确性！如果数据不正确，那么一开始就不能添加到表中。简而言之，约束是表级的强制规定</p></div><p>可以在创建表时规定约束（通过 CREATE TABLE 语句），或者在表创建之后也可以（通过 ALTER TABLE 语句）</p><h3 id="约束分类"><a class="header-anchor" href="#约束分类">¶</a>约束分类</h3><p>常用的六种约束及其对应的含义如下：</p><table><thead><tr><th style="text-align:center">完整性约束</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">NOT NULL</td><td style="text-align:center">非空约束</td></tr><tr><td style="text-align:center">DEFAULT</td><td style="text-align:center">默认值</td></tr><tr><td style="text-align:center">UNIQUE</td><td style="text-align:center">唯一约束，规定某个字段在整个表中是唯一的</td></tr><tr><td style="text-align:center">CHECK</td><td style="text-align:center">检查约束</td></tr><tr><td style="text-align:center">PRIMARY KEY</td><td style="text-align:center">主键约束(非空且唯一)</td></tr><tr><td style="text-align:center">FOREIGN KEY</td><td style="text-align:center">外键约束</td></tr></tbody></table><p>🎶MySQL 不支持 check 约束，但可以使用 check 约束，就是任何效果</p><p>根据<strong>约束所要求的列数</strong>，可以将约束类型分为以下两种:单列约束和多列约束</p><table><thead><tr><th style="text-align:center">约束类型</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">单列约束</td><td style="text-align:center">每个约束只约束一列</td></tr><tr><td style="text-align:center">多列约束</td><td style="text-align:center">每个约束可约束多列数据</td></tr></tbody></table><p>根据约束的<strong>作用范围</strong>，约束可分为：列级约束和表记约束</p><table><thead><tr><th style="text-align:center">约束类型</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">列级约束</td><td style="text-align:center">只能作用在一个列上，跟在列的定义后面</td></tr><tr><td style="text-align:center">表级约束</td><td style="text-align:center">可以作用在多个列上，不与列一起，而是单独定义</td></tr></tbody></table><h3 id="NOT-NULL-约束"><a class="header-anchor" href="#NOT-NULL-约束">¶</a>NOT NULL 约束</h3><div class="alert success no-icon"><p>非空约束用于确保当前列的值不为空值，非空约束只能出现在表对象的列上</p></div><p>✨ Null 类型特征：</p><div class="alert success no-icon"><ol><li>所有的类型的值都可以是 null，包括 int、float 等数据类型</li><li>空字符串””不等于 null，0 也不等于 null</li></ol></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#创建 <span class="keyword">not</span> <span class="keyword">null</span> 约束：</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">id <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">sex <span class="type">CHAR</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#增加 <span class="keyword">not</span> <span class="keyword">null</span> 约束：</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp</span><br><span class="line">MODIFY sex <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line">#取消 <span class="keyword">not</span> <span class="keyword">null</span> 约束：</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp</span><br><span class="line">MODIFY sex <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line">#取消 <span class="keyword">not</span> <span class="keyword">null</span> 约束，增加默认值：</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp</span><br><span class="line">MODIFY NAME <span class="type">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;abc&#x27;</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="UNIQUE-约束"><a class="header-anchor" href="#UNIQUE-约束">¶</a>UNIQUE 约束</h3><div class="alert success no-icon"><p>唯一约束，允许出现多个空值（ <code>NULL</code> ）</p></div><p>同一个表可以有多个唯一约束，多个列组合的约束。在创建唯一约束的时候，如果不给唯一约束名称，就默认和列名相同。</p><p>MySQL 会给唯一约束的列上默认创建一个唯一索引</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#创建表时指定唯一键约束</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span>(</span><br><span class="line"> id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"> NAME <span class="type">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line"> PASSWORD <span class="type">VARCHAR</span>(<span class="number">16</span>),</span><br><span class="line"> #使用表级约束语法</span><br><span class="line"> <span class="keyword">CONSTRAINT</span> uk_name_pwd <span class="keyword">UNIQUE</span>(NAME,PASSWORD)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#添加唯一约束</span><br><span class="line">#方式一</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(NAME,PASSWORD);</span><br><span class="line">#方式二</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> uk_name_pwd <span class="keyword">UNIQUE</span>(NAME,PASSWORD);</span><br><span class="line">#方式三</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span></span><br><span class="line">MODIFY NAME <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span>;</span><br><span class="line"></span><br><span class="line">## 删除约束</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span></span><br><span class="line"><span class="keyword">DROP</span> INDEX uk_name_pwd;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="PRIMARY-KEY-约束"><a class="header-anchor" href="#PRIMARY-KEY-约束">¶</a>PRIMARY KEY 约束</h3><div class="alert success no-icon"><p>主键约束相当于唯一约束+非空约束的组合，主键约束列不允许重复，也不允许出现空值</p></div><p>如果是多列组合的主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。每个表最多只允许一个主键，建立主键约束可以在列级别创建，也可以在表级别上创建。MySQL 的主键名总是 PRIMARY，当创建主键约束时，系统默认会在所在的列和列组合上建立对应的唯一索引。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">## 创建表时，在定义字段时就声明主键约束</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp4(</span><br><span class="line">id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line">## 表级模式创建主键约束</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp5(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">pwd <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> emp5_id_pk <span class="keyword">PRIMARY</span> KEY(id)</span><br><span class="line">);</span><br><span class="line">## 多列组合的主键约束，必须使用表级模式</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp6(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">pwd <span class="type">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> emp7_pk <span class="keyword">PRIMARY</span> KEY(NAME,pwd)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">## 删除主键约束</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp5 <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line">## 添加主键约束</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp5 <span class="keyword">ADD</span>  <span class="keyword">PRIMARY</span> KEY(NAME,pwd);</span><br><span class="line">#修改主键约束</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp5 MODIFY id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="FOREIGN-KEY-约束"><a class="header-anchor" href="#FOREIGN-KEY-约束">¶</a>FOREIGN KEY 约束</h3><div class="alert success no-icon"><p>外键约束是保证一个或两个表之间的参照完整性，外键是构建于一个表的两个字段或是两个表的两个字段之间的参照关系。外键约束只能使用表级模式创建</p></div><p>从表的外键值必须在主表中能找到或者为空。当主表的记录被从表参照时，主表的记录将不允许删除，如果要删除数据，需要先删除从表中依赖该记录的数据，然后才可以删除主表的数据。</p><p>🎶 外键约束的参照列，在主表中引用的只能是主键或唯一键约束的列，同一个表可以有多个外键约束</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">## 主表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> classes(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">number <span class="type">INT</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(NAME,number)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">## 从表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line">id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">classes_name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">classes_number <span class="type">INT</span>,</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY(classes_name,classes_number)</span><br><span class="line"><span class="keyword">REFERENCES</span> classes(NAME,number)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#删除外键约束：</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY emp_dept_id_fk;</span><br><span class="line">## 增加外键约束</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span> emp_dept_id_fk]</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY(dept_id) <span class="keyword">REFERENCES</span> dept(dept_id);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE(级联删除): 当父表中的列被删除时，子表中相对应的列也被删除</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">SET</span> <span class="keyword">NULL</span>(级联置空): 当父表中的列被删除时,子表中相应的列置空</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="CHECK-约束"><a class="header-anchor" href="#CHECK-约束">¶</a>CHECK 约束</h3><div class="alert success no-icon"><p>MySQL 可以使用 check 约束，但 check 约束对数据验证没有任何作用,添加数据时，没有任何错误或警告</p></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> temp(</span><br><span class="line">id <span class="type">INT</span> AUTO_INCREMENT,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">INT</span> <span class="keyword">CHECK</span>(age <span class="operator">&gt;</span> <span class="number">20</span>),</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(id)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="AUTO-INCREMENT"><a class="header-anchor" href="#AUTO-INCREMENT">¶</a>AUTO_INCREMENT</h3><div class="alert success no-icon"><p>自增长列要求必须设置在一个键上，比如主键或唯一键。自增长列要求数据类型为数值型，并且一个表至多只能有一个自增长列</p></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> gradeinfo(</span><br><span class="line">	gradeID <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	gradeName <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">标签</span><br><a class="tag tag--primary tag--small t-none-link" href="/tags/MySQL/" rel="tag">MySQL</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/mysql-%E5%9B%9B-%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E6%B5%81%E7%A8%8B/" data-tooltip="MySQL(四)简单查询语句流程" aria-label="上一篇: MySQL(四)简单查询语句流程"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/shiro-%E4%B8%8E-spring-%E6%95%B4%E5%90%88/" data-tooltip="Shiro 与 Spring 整合" aria-label="下一篇: Shiro 与 Spring 整合"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></article><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><footer id="footer" class="main-content-wrap"><span class="copyrights">Copyrights &copy; 2023 pineapple-man. All Rights Reserved.</span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><br>Total <span id="busuanzi_value_site_pv"></span> views. 您是pineapple-man的第<span id="busuanzi_value_site_uv"></span>个小伙伴<br><i class="fas fa-book-open"></i> <span class="post-count">博客字数统计：370.7k</span><script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script></footer></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="5"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/mysql-%E5%9B%9B-%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E6%B5%81%E7%A8%8B/" data-tooltip="MySQL(四)简单查询语句流程" aria-label="上一篇: MySQL(四)简单查询语句流程"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/shiro-%E4%B8%8E-spring-%E6%95%B4%E5%90%88/" data-tooltip="Shiro 与 Spring 整合" aria-label="下一篇: Shiro 与 Spring 整合"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="/assets/images/logo.png" alt="作者的图片"><h4 id="about-card-name">pineapple-man</h4><div id="about-card-bio"><p>做一个菠萝：站得笔直，头戴王冠，内心甜美</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>刚毕业就失业</p></div><div id="about-card-location"><i class="fa fa-map-marker-alt"></i><br>西安</div></div></div><div id="cover" style="background-image:url(/assets/images/cover-v1.2.0.jpg)"></div><script src="/assets/js/script-kcoiyt1nxfue7qgcpkrcixymglcc3cuxeg98fy01hqww4nblnhd2ees6j6yc.min.js"></script></body></html>