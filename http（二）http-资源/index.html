<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="pineapple-man"><title>HTTP（二）HTTP 资源 - pineapple-man</title><meta name="author" content="pineapple-man"><meta name="keywords" content="HTTP"><link rel="icon" href="https://pineapple-man.github.io/assets/images/logo.svg"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"pineapple-man","sameAs":["https://github.com/pineapple-man","mailto://mingchaohu720@gmail.com"],"image":"logo.png"},"articleBody":"\n¶概述\n❓什么是资源？\n互联网最初搭建的目的就是能够让使用者之间相互共享资源，我们可以认为计算机网络中的任何东西都是资源。但是，日常生活中我们接触最多的就是 Web 应用程序，所以我们的关注点也是 Web 资源\n\n最简单的 Web 资源就是 Web 服务器文件系统中的静态文件，这些文件可以是任意格式，如：文本文件（TXT）、HTML 文件、微软的 Word 文件、Adobe 的 Acrobat 文件、 JPEG 图片文件、AVI 电影文件等等。\n🎶需要注意的是，资源不一定非得是静态文件，资源还可以是根据需要生成内容的软件程序（动态文件）\n¶资源类型\n❓HTTP 对每种要通过 Web 传输的对象都打上了名为 MIME 类型的数据格式标签，为什么要设计MIME类型？\n最初设计 MIME （Multipurpose Internet Mail Extension，多用途因特网邮件扩展）是为了解决在不同的电子邮件系统之间搬移报文时存在的问题。MIME 在电子邮件系统中工作得非常好，因此 HTTP 也采纳了它，用它来描述并标记多媒体内容。Web 服务器会为所有 HTTP 对象数据附加一个 MIME 类型。当 Web 浏览器从服务器中取回一个对象时，会去查看相关的 MIME 类型，看看它是否知道应该如何处理这个对象\n\n¶定位资源\n每个 Web 服务器资源都有一个名字，这样客户端就可以说明它们感兴趣的资源是什么了。服务器资源名被称为统一资源标识符（Uniform Resource Identifier, URI）。URI 就像因特网上的邮政地址一样，用于在计算机的世界内唯一标识并定位信息资源\n¶URI\nURI 是一类通用的资源标识符，由两个主要的子集 URL 和 URN 构成。URL 是通过描述资源的位置来标识资源的，而 URN 则是通过名字来识别资源的，与资源当前所处位置无关\n✨URI 有两种形式，分别称为 URL 和 URN\n\n¶URL\nURL 是浏览器寻找信息时所需的资源位置。URL 描述了一台特定服务器上某资源的特定位置，通过 URL 可以明确说明如何从一个精确、固定的位置获取资源。常见的 URL 实例如下：\n\n\n\nURL\n描述\n\n\n\n\nhttp://www.oreilly.com/index.html\nO’Reilly &amp; Associates 公司的主 URL\n\n\nhttps://pineapple-man.github.io/assets/images/logo.jpg\n我博客 logo 的 URL\n\n\nftp://joe:tools4u@ftp.joes-hardware.com/locking-pliers.gif\n用 FTP 作为访问协议的 locking-pliers.gif 图片文件的 URL\n\n\n\n大部分 URL 都遵循如下这样一种标准格式，这种格式包含三个部分\n1scheme://PATH/TO/HOST/:PORT/PATH/TO/RESOURCE\n\n\n\n部分\n含义\n\n\n\n\nscheme://\nURL 的第一部分被称为方案（scheme），说明了访问资源所使用的协议类型。这部分通常是 HTTP 协议（http://）以告知 Web 客户端怎样访问资源\n\n\nPATH/TO/HOST/:PORT\n第二部分给出了服务器的因特网地址（比如，www.joes-hardware.com）告知 Web 客户端资源位于何处\n\n\n/PATH/TO/RESOURCE\n指定了 Web 服务器上的某个资源路径（比如，/specials/saw-blade.gif）路径说明了请求的是服务器上哪个路径下的本地资源\n\n\n\nURL 可以通过 HTTP 之外的其他协议来访问资源。它们可以指向因特网上的任意资源，或者个人的 E-mail 账户，比如mailto:president@whitehouse.gov，或者通过其他协议（比如 FTP 协议）访问的各种文件：ftp://ftp.lots-o-books.com/pub/complete-price-list.xls\nURL 提供了一种统一的资源命名方式，大多数 URL 都有同样的：scheme://PATH/TO/HOST/:PORT/PATH/TO/RESOURCE 结构。因此，对网络上的每个资源来说，命名资源的方法只有一种，这样不管是谁都可以用名字来找到这个资源\n¶URN\nURI 的第二种形式就是统一资源名（URN），URN 是作为特定内容的唯一名称使用的，与资源所在地无关。使用这些与位置无关的 URN，就可以将资源四处搬移，通过 URN 可以用同一个名字通过多种网络访问协议来访问资源\nURN 仍然处于试验阶段，还未大范围使用\n\n¶URL 的语法\nURL 提供了一种定位因特网上任意资源的手段，但这些资源是可以通过各种不同的方案（比如 HTTP、FTP、SMTP）来访问的，因此 URL 语法随方案的不同而有所不同\n🤔这是不是意味着每种不同的 URL 方案都会有完全不同的语法呢？\n实际上，不是的。 大部分 URL 都遵循通用的 URL 语法，而且不同 URL 方案的风格和语法都有不少重叠，多数 URL 方案的 URL 语法都建立在这个由 9 部分构成的通用格式上：\n\n1&lt;scheme&gt;://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;path&gt;;&lt;params&gt;?&lt;query&gt;#&lt;frag&gt;\n几乎没有哪个 URL 中包含了所有这些组件，URL 最重要的三个部分是方案（Scheme）、主机（host）和路径（path）\n\n\n\n组件\n描述\n默认值\n\n\n\n\n方案\n访问服务器以获取资源时要使用哪种协议\n无\n\n\n用户\n某些方案访问资源时需要的用户名\n匿名\n\n\n密码\n用户名后面可能要包含的密码，中间由冒号（:）分隔\n&lt;E-mail 地址 &gt;\n\n\n主机\n资源宿主服务器的主机名或点分 IP 地址\n无\n\n\n端口\n资源宿主服务器正在监听的端口号。很多方案都有默认端 口号（HTTP 的默认端口号为 80）\n每个方案特有\n\n\n路径\n服务器上资源的本地名，由一个斜杠（/）将其与前面的 URL 组件分隔开来。路径组件的语法是与服务器和方案有关的（本章稍后会讲到 URL 路径可以分为若干个段，每段都可以有其特有的组件。\n无\n\n\n参数\n某些方案会用这个组件来指定输入参数。参数为名 / 值对。 URL 中可以包含多个参数字段，它们相互之间以及与路径 的其余部分之间用分号（;）分隔\n无\n\n\n查询\n某些方案会用这个组件传递参数以激活应用程序（比如数 据库、公告板、搜索引擎以及其他因特网网关）。查询组件的内容没有通用格式。用字符?将其与 URL 的其余 部分分隔开来\n无\n\n\n片段\n一小片或一部分资源的名字。引用对象时，不会将 frag 字 段传送给服务器；这个字段是在客户端内部使用的。通过 字符“#”将其与 URL 的其余部分分隔开来\n无\n\n\n\n¶方案\n方案也就是通常所说的众多协议（HTTP、HTTPS、FTP、JDBC），方案组件必须以一个字母符号开始，由第一个 : 符号将其与 URL 的其余部分隔开。方案名是大小写无关的，因此无论是http://www.joes-hardware.com和``HTTP://www.joes-hardware.com`是等价的\n\n¶主机与端口号\n要想在因特网上找到资源，应用程序要知道是：在什么地方可以找到能对目标资源进行访问的服务器，URL 的主机和端口组件提供了这两组信息。主机组件标识了因特网上能够访问资源的宿主机器。可以用上述主机名（www.joes-hardware.com），或者 IP 地址来表示主机名。\n\n¶用户名和密码\n很多服务器都要求输入用户名和密码才会允许用户访问数据（如今使用的不多，大部分会在前后端程序中进行认证操作，不在 URL 上限制用于）。FTP 服务器就是这样一个常见的实例，这里有几个例子：\nftp://ftp.prep.ai.mit.edu/pub/gnu \nftp://anonymous@ftp.prep.ai.mit.edu/pub/gnu\nftp://anonymous:my_passwd@ftp.prep.ai.mit.edu/pub/gnu\nhttp://joe:joespasswd@www.joes-hardware.com/sales_info.txt\n\n第一个例子没有用户或密码组件，只有标准的方案、主机和路径。如果某应用程序使用的 URL 方案要求输入用户名和密码，但用户没有提供，它通常会插入一个默认的用户名和密码\n如果向浏览器提供一个 FTP URL，但没有指定用户名和密码，它就会插入 anonymous（匿名用户）作为你的用户名，并发 送一个默认的密码（Internet Explorer 会发送 IEUser，Netscape Navigator 则会发送 mozilla）\n¶路径\nURL 的路径组件说明了资源位于服务器的什么地方。路径通常很像一个分级的文件系统路径。比如： http://www.joes-hardware.com:80/seasonal/index-fall.html，这个 URL 中的路径为 /seasonal/index-fall.html，很像 UNIX 文件系统中的文件系统路径，路径是服务器定位资源时所需的信息。其实这是一种简化的说法，路径并不总能为资源定位提供足够的信息，有时候服务器还需要其他的信息，可以用字符/将 HTTP URL 的路径组件划分成一些路径段（path segment）每个路径段都有自己的参数（param）组件\n\n¶参数\n对很多方案来说，只有简单的主机名和到达对象的路径是不够的。除了服务器正在监听的端口，以及是否能够通过用户名和密码访问资源外，很多协议都还需要更多的信息才能工作\n\n负责解析 URL 的应用程序需要这些协议参数来访问资源，如果缺少相关的协议参数可能访问不到请求的服务。为了向应用程序提供它们所需的输入参数，以便正确地与服务器进行交互，URL 中有一个参数组件。这个组件就是 URL 中的键值对列表，由字符 ; 将各种参数分隔开来，丰富了应用程序提供访问资源的方式\n比如：\n\nftp://prep.ai.mit.edu/pub/gnu;type=d，在这个例子中，有一个参数 type=d，参数名为 type，值为 d\n如前所述，HTTP URL 的路径组件可以分成若干路径段。每段都可以有自己的参数，http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true,这个例子就有两个路径段，hammers 和 index.html。hammers 路径段有参数 sale，其值为 false。index.html 段有参数 graphics，其值为 true\n\n\n¶查询字符串\n很多资源（如：数据库服务），都是可以通过提问题或进行查询来缩小所请求资源类型范围的。\n\n假设 Joe 的五金商店在数据库中维护着一个未售货物的清单，并可以对清单进行查询，以判断产品是否有货，那就可以用下列 URL 来查询 Web 数据库网关，看看编号为 12731 的条目是否有货\n1http://www.joes-hardware.com/inventory-check.cgi?item=12731\n\n这个 URL 的大部分都与我们见过的其他 URL 类似。只有问号（?）右边的内容是新出现的。这部分被称为查询（query）组件。URL 的查询组件和标识网关资源的 URL 路径组件一起被发送给网关资源。基本上可以将网关当作访问其他应用程序的访问点\n除了有些不合规则的字符需要特别处理之外，对查询组件的格式没什么要求。按照常规，很多网关都希望查询字符串以一系列 key=value 的形式出现，键值对之间用字符 &amp; 分隔：\n1http://www.joes-hardware.com/inventory-check.cgi?item=12731&amp;color=blue\n¶片段\n有些资源类型，比如 HTML，除了资源级之外，还可以做进一步的划分\n\n比如，对一个带有章节的大型文本文档来说，资源的 URL 会指向整个文本文档，但理想的情况是，能够指定资源中的那些章节\n\n为了引用部分资源或资源的一个片段，URL 支持使用片段（frag）组件来表示一个资源内部的片段。比如，URL 可以指向 HTML 文档中一个特定的图片或小节片段挂在 URL 的右手边，最前面有一个字符 #\n比如下面这个例子，片段 drills 引用了 Joe 的五金商店 Web 服务器上页面 /tools.html 中的一个部分。这部分的名字叫做 drills\n1http:://www.joes-hardware.com/tools.html#drills\n\n📓HTTP 服务器通常只处理整个对象，而不是对象的片段，客户端不能将片段传送给服务器，浏览器从服务器获得了整个资源之后，会根据片段来显示你感兴趣的那部分资源\n\n¶URL 快捷方式\nWeb 客户端可以理解并使用几种 URL 快捷方式。相对 URL 是在某资源内部指定一个资源的便捷缩略方式。很多浏览器还支持 URL 的自动扩展，也就是用户输入 URL 的一个关键（可记忆的）部分，然后由浏览器将其余部分填充起来\n¶相对 URL\nURL 有两种路径记录方式：绝对的和相对的\n到目前为止，我们只见过绝对 URL。绝对 URL 中包含有访问资源所需的全部信息，相对 URL 是不完整的。要从相对 URL 中获取访问资源所需的全部信息，就必须有基准，这个基准被称为基础（base）的 URL ，所有的相对 URL 都是相对于这个基础 URL 进行解析的\n\n相对 URL 是 URL 的一种便捷缩略记法。如果你手工写过 HTML 的话，就会发现相对 URL 是多么便捷了。下面是一个嵌入了相对 URL 的 HTML 文档实例\n1234567891011&lt;html&gt;  &lt;head&gt;    &lt;title&gt;Joe&#x27;s Tools&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;h1&gt;Tools Page&lt;/h1&gt;    &lt;h2&gt;Hammers&lt;/h2&gt;    &lt;p&gt;Joe&#x27;s Hardware Online has the largest selection of&lt;/p&gt;    &lt;a href=&quot;./hammers.html&quot;&gt;hammers&lt;/a&gt; on earth.  &lt;/body&gt;&lt;/html&gt;\n在这个 HTML 文档中有一个包含了 URL ./hammers.html 的超链接。这个 URL 看起 来是不完整的，但实际上是个合法的相对 URL。可以相对于它所在文档的 URL 对 其进行解释；在这个例子中，就是相对于 Joe 的五金商店 Web 服务器的资源 /tools.html\n\n¶基础 URL(Base URL)\n转换处理的第一步就是找到 Base URL，Base URL 是作为相对 URL 的参考点使用的，可以来自以下几个不同的地方：\n\n在资源中显式提供\n\n有些资源会显式地指定 Base URL。比如，HTML 文档中可能会包含一个定义了 Base URL 的 HTML 标记 ，通过它来转换那个 HTML 文档中的所有相对 URL\n\n\n封装资源的 Base URL - 如果在一个没有显式指定 Base URL 的资源中发现了一个相对 URL，可以将它所属资源的 URL 作为 Base URL\n\n\n¶解析相对引用\n要将相对 URL 转换为一个绝对 URL，下一步要做的就是将相对 URL 和基础 URL 划分成组件段，实际上，这样只是在解析 URL，但这种做法会将其划分成一个个组件，因此通常会称作分解（decomposing）URL。只要将基础和相对 URL 划分成了组件，就可以使用相关的算法将一个相对 URL 抓换成其绝对模式，之后就可以用它来引用资源了\n¶自动扩展 URL\n有些浏览器会在用户提交 URL 之后，或者在用户输入的时候尝试着自动扩展 URL。 这就为用户提供了一条捷径：用户不需要输入完整的 URL，因为浏览器会自动扩展，这些自动扩展特性有以下两种方式：主机名扩展和历史扩展\n¶主机名扩展\n在主机名扩展中，只要有些小提示，浏览器通常就可以在没有帮助的情况下，将你输入的主机名扩展为完整的主机名。 比如，如果在地址栏中输入 yahoo，浏览器就会自动在主机名中插入 www. 和 .com，构建出 www.yahoo.com。如果找不到与 yahoo 匹配的站点，有些浏览器会在放弃之前尝试几种扩展形式。浏览器通过这些简单的技巧来节省你的时间，减少找不到的可能。 但是，这些主机名扩展技巧可能会为其他一些 HTTP 应用程序带来问题（比如代理）\n¶历史扩展\n浏览器用来节省用户输入 URL 时间的另一种技巧是，将以前用户访问过的 URL 历史存储起来。当你输入 URL 时，它们就可以将你输入的 URL 与历史记录中 URL 的前缀进行匹配，并提供一些完整的选项供你选择。因此，如果你输入了一个以前访问过的 URL 的开始部分，比如 http://www.joes-，浏览器就可能会建议使用 http://www.joes-hardware.com。然后你就可以选择这个地址，不用输入完整的 URL 了。\n¶URL 中的字符处理\nURL 是可移植的（portable）。它要统一地命名因特网上所有的资源，这也就意味着 要通过各种不同的协议来传送这些资源。这些协议在传输数据时都会使用不同的机制，所以，设计 URL，使其可以通过任意因特网协议安全地传输是很重要的\n\n安全传输意味着 URL 的传输不能丢失信息。有些协议，比如传输电子邮件的简单邮件传输协议（Simple Mail Transfer Protocol，SMTP），所使用的传输方法就会剥去一些特定的字符。为了避开这些问题，URL 只能使用一些相对较小的、通用的安全字母表中的字符。\n除了希望 URL 可以被所有因特网协议进行传送之外，设计者们还希望 URL 也可供人类阅读。因此，即使不可见、不可打印的字符能够穿过邮件程序，从而成为可移植的，也不能在 URL 中使用（其中最重要的一个字符就是空格）\nURL 还得是完整的，这就使问题变得更加复杂了。URL 的设计者们认识到有时人们可能会希望 URL 中包含除通用的安全字母表之外的二进制数据或字符。因此，需要有一种转义机制，能够将不安全的字符编码为安全字符，再进行传输\n¶URL 字符集\n默认的计算机系统字符集都倾向于以英语为中心，有些 URL 中还会包含任意的二进制数据。认识到对完整性的需求之后，URL 的设计者就将转义序列集成了进去，通过转义序列，就可以用 US-ASCII 字符集的有限子集对任意字符值或数据进行编码了，这样就实现了可移植性和完整性\n\n¶编码机制\n为了避开安全字符集表示法带来的限制，人们设计了一种编码机制，用来在 URL 中表示各种不安全的字符。这种编码机制就是通过一种转义表示法表示不安全字符的，这种转义表示法包含一个百分号（%），后面跟着两个表示字符 ASCII 码的 十六进制数\n\n\n\n字符\nASCII 码\n示例\n\n\n\n\n~\n126(0x7E)\nhttp://www.joes-hardware.com/%7Ejoe\n\n\n空格\n32（0x20）\nhttp://www.joes-hardware.com/more%20tools.html\n\n\n%\n37（0x25）\nhttp://www.joes-hardware.com/100%25satisfaction.html\n\n\n\n¶字符限制\n在 URL 中，有几个字符被保留起来，有着特殊的含义。有些字符不在定义的 US-ASCII 可打印字符集中。还有些字符会与某些因特网网关和协议产生混淆，因此不赞成使用\n\n\n\n字符\n保留/受限原因\n\n\n\n\n%\n保留作为编码字符的转义标志\n\n\n/\n保留作为路径组件中分隔路径段的定界符\n\n\n.\n保留在路径组件中使用\n\n\n…\n保留在路径组件中使用\n\n\n#\n保留作为分段定界符使用\n\n\n?\n保留作为查询字符串定界符使用\n\n\n;\n保留作为参数定界符使用\n\n\n:\n保留作为方案、用户/口令，以及主机/端口组件的定界符使用\n\n\n$,+\n保留\n\n\n@ &amp; =\n在某些方案的上下文中有特殊的含义，保留\n\n\n{ }| \\ ^ ~ [ ] `\n由于各种传输 Agent 代理，比如各种网关的不安全处理，使用受限\n\n\n&lt;&gt; &quot;\n不安全；这些字符在 URL 范围之外通常是有意义的，比如在文档中对 URL 自身 进行定界（比如 http://www.joes-hardware.com），所以应该对其进行编码\n\n\n0x00-0x1F,0x7F\n受限，这些十六进制范围内的字符都在 US-ASCII 字符集的不可打印区间内\n\n\n&gt;0x7F\n受限，十六进制值在此范围内的字符都不在 US-ASCII 字符集的 7 比特范围内\n\n\n\n¶其他\n应用程序要按照一定规范工作。客户端应用程序在向其他应用程序发送任意 URL 之前，最好把所有不安全或受限字符都进行转换。只要对所有不安全字符都进行了编码，这个 URL 就是可在各应用程序之间共享的规范形式；也就无需操心其他应用程序会被字符的任何特殊含义所迷惑了\n另一种极端的做法就是应用程序对所有字符都进行编码。尽管并不建议这么做，但也没有什么强硬且严格的规则规定不能对那些安全字符进行编码；但在实际应用中，有些应用程序可能会假定不对安全字符进行编码，这么做的话可能会产生一些奇怪的破坏性行为。\n\n📓总之，解释 URL 的应用程序必须在处理 URL 之前对其进行解码\n¶总结\nURL 是一种强有力的工具，可以用来命名所有现存对象，可以很方便地包含一些新格式。URL 还提供了一种可以在各种因特网协议间共享的统一命名机制。但 URL 并不完美。它们表示的是实际的地址，而不是准确的名字。这就意味着 URL 会告诉你资源此时处于什么位置。它会为你提供特定端口上特定服务器的名字，告诉你在何处可以找到这个资源。\n😣这种方案的缺点在于如果资源被移走了， URL 也就不再有效了。那时，它就无法对对象进行定位了\n\n在可预见的未来，因特网资源仍然会以 URL 来命名。它们是 Web 能够成功非常重要的部分。其他命名方案想要取代 URL 还要一段时间。但是，URL 由于有其局限型，可能会出现新的标准（可能是 URN），对这种标准进行部署会解决其中的某些问题\n","dateCreated":"2021-11-14T14:19:25+00:00","dateModified":"2023-06-07T02:13:34+00:00","datePublished":"2021-11-14T14:19:25+00:00","description":"本文主要讲解HTTP协议中如何管理资源","headline":"HTTP（二）HTTP 资源","image":["https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/http权威指南.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://pineapple-man.github.io/http%EF%BC%88%E4%BA%8C%EF%BC%89http-%E8%B5%84%E6%BA%90/"},"publisher":{"@type":"Organization","name":"pineapple-man","sameAs":["https://github.com/pineapple-man","mailto://mingchaohu720@gmail.com"],"image":"logo.png","logo":{"@type":"ImageObject","url":"logo.png"}},"url":"https://pineapple-man.github.io/http%EF%BC%88%E4%BA%8C%EF%BC%89http-%E8%B5%84%E6%BA%90/","keywords":"HTTP","thumbnailUrl":"https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/http权威指南.jpg"}</script><meta name="description" content="本文主要讲解HTTP协议中如何管理资源"><meta property="og:type" content="blog"><meta property="og:title" content="HTTP（二）HTTP 资源"><meta property="og:url" content="https://pineapple-man.github.io/http%EF%BC%88%E4%BA%8C%EF%BC%89http-%E8%B5%84%E6%BA%90/"><meta property="og:site_name" content="pineapple-man"><meta property="og:description" content="本文主要讲解HTTP协议中如何管理资源"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-11-14T14:19:25.000Z"><meta property="article:modified_time" content="2023-06-07T02:13:34.007Z"><meta property="article:author" content="pineapple-man"><meta property="article:tag" content="HTTP"><meta name="twitter:card" content="summary"><meta property="og:image" content="https://pineapple-man.github.io/assets/images/logo.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/http权威指南.jpg"><meta class="swiftype" name="image" data-type="enum" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/http权威指南.jpg"><link rel="stylesheet" href="/assets/css/style-oth3meuzcjopbgwqbdvoxqknhcm0sy9wkullcc94zhkkop3pmfrpl5t4fzzz.min.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-210516333-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-210516333-1")</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"></head><body><div id="blog"><header id="header" data-behavior="5"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">pineapple-man</a></div><a class="header-right-picture" href="#about" aria-label="打开链接: /#about"><img class="header-picture" src="/assets/images/logo.png" alt="作者的图片"></a></header><nav id="sidebar" data-behavior="5"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="阅读有关作者的更多信息"><img class="sidebar-profile-picture" src="/assets/images/logo.png" alt="作者的图片"></a><h4 class="sidebar-profile-name">pineapple-man</h4><h5 class="sidebar-profile-bio"><p>做一个菠萝：站得笔直，头戴王冠，内心甜美</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" rel="noopener" title="首页"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">首页</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-categories" rel="noopener" title="分类"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">分类</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-tags" rel="noopener" title="标签"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">标签</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-archives" rel="noopener" title="归档"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">归档</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="#about" rel="noopener" title="关于"><i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i> <span class="sidebar-button-desc">关于</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/pineapple-man" target="_blank" rel="noopener" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="mailto://mingchaohu720@gmail.com" target="_blank" rel="noopener" title="邮箱"><i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i> <span class="sidebar-button-desc">邮箱</span></a></li></ul></div></nav><div id="main" data-behavior="5" class="hasCoverMetaIn"><article class="post"><div class="post-header main-content-wrap text-center"><h1 class="post-title">HTTP（二）HTTP 资源</h1><div class="post-meta"><time datetime="2021-11-14T14:19:25+00:00">11月 14, 2021 </time><span>发布在 </span><a class="category-link" href="/categories/Web/">Web</a> <i class="fas fa-book-open"></i> 本文共<span class="post-count"> 5.9k </span>字 <i class="far fa-clock"></i> 阅读预计<span class="post-count"> 57 </span>分钟</div></div><div class="post-content markdown"><div class="main-content-wrap"><h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8B"><span class="toc-text">资源类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%BD%8D%E8%B5%84%E6%BA%90"><span class="toc-text">定位资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#URI"><span class="toc-text">URI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL"><span class="toc-text">URL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URN"><span class="toc-text">URN</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#URL-%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-text">URL 的语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%A1%88"><span class="toc-text">方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E4%B8%8E%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-text">主机与端口号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81"><span class="toc-text">用户名和密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84"><span class="toc-text">路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0"><span class="toc-text">参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">查询字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%87%E6%AE%B5"><span class="toc-text">片段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#URL-%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F"><span class="toc-text">URL 快捷方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9-URL"><span class="toc-text">相对 URL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80-URL-Base-URL"><span class="toc-text">基础 URL(Base URL)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E7%9B%B8%E5%AF%B9%E5%BC%95%E7%94%A8"><span class="toc-text">解析相对引用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%89%A9%E5%B1%95-URL"><span class="toc-text">自动扩展 URL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E5%90%8D%E6%89%A9%E5%B1%95"><span class="toc-text">主机名扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2%E6%89%A9%E5%B1%95"><span class="toc-text">历史扩展</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL-%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E5%A4%84%E7%90%86"><span class="toc-text">URL 中的字符处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL-%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-text">URL 字符集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E6%9C%BA%E5%88%B6"><span class="toc-text">编码机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E9%99%90%E5%88%B6"><span class="toc-text">字符限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol><h2 id="概述"><a class="header-anchor" href="#概述">¶</a>概述</h2><p>❓什么是资源？</p><div class="alert success no-icon"><p>互联网最初搭建的目的就是能够<strong>让使用者之间相互共享资源</strong>，我们可以认为<strong>计算机网络中的任何东西都是资源</strong>。但是，日常生活中我们接触最多的就是 Web 应用程序，所以我们的关注点也是 Web 资源</p></div><p>最简单的 Web 资源就是 Web 服务器文件系统中的静态文件，这些文件可以是任意格式，如：文本文件（TXT）、HTML 文件、微软的 Word 文件、Adobe 的 Acrobat 文件、 JPEG 图片文件、AVI 电影文件等等。</p><p>🎶需要注意的是，<strong>资源不一定非得是静态文件</strong>，资源还可以是<strong>根据需要生成内容的软件程序（动态文件）</strong></p><h2 id="资源类型"><a class="header-anchor" href="#资源类型">¶</a>资源类型</h2><p>❓HTTP 对每种要通过 Web 传输的对象都打上了名为 MIME 类型的数据格式标签，为什么要设计<code>MIME</code>类型？</p><div class="alert success no-icon"><p>最初设计 MIME （Multipurpose Internet Mail Extension，多用途因特网邮件扩展）是为了解决在不同的电子邮件系统之间搬移报文时存在的问题。MIME 在电子邮件系统中工作得非常好，因此 HTTP 也采纳了它，用它来描述并标记多媒体内容。Web 服务器会为所有 HTTP 对象数据附加一个 MIME 类型。当 Web 浏览器从服务器中取回一个对象时，会去查看相关的 MIME 类型，看看它是否知道应该如何处理这个对象</p></div><h2 id="定位资源"><a class="header-anchor" href="#定位资源">¶</a>定位资源</h2><p>每个 Web 服务器资源都有一个名字，这样客户端就可以说明它们感兴趣的资源是什么了。服务器资源名被称为统一资源标识符（Uniform Resource Identifier, URI）。URI 就像因特网上的邮政地址一样，用于在计算机的世界内唯一标识并定位信息资源</p><h3 id="URI"><a class="header-anchor" href="#URI">¶</a>URI</h3><p>URI 是一类通用的<strong>资源标识符</strong>，由两个主要的子集 <code>URL</code> 和 <code>URN</code> 构成。URL 是通过<strong>描述资源的位置</strong>来标识资源的，而 URN 则是<strong>通过名字</strong>来识别资源的，与资源当前所处位置无关</p><div class="alert success no-icon"><p>✨URI 有两种形式，分别称为 URL 和 URN</p></div><h3 id="URL"><a class="header-anchor" href="#URL">¶</a>URL</h3><p>URL 是浏览器寻找信息时所需的资源位置。URL 描述了一台特定服务器上某资源的特定位置，通过 URL 可以明确说明如何从一个精确、固定的位置获取资源。常见的 URL 实例如下：</p><table><thead><tr><th style="text-align:center">URL</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center"><a target="_blank" rel="noopener" href="http://www.oreilly.com/index.html">http://www.oreilly.com/index.html</a></td><td style="text-align:center">O’Reilly &amp; Associates 公司的主 URL</td></tr><tr><td style="text-align:center"><a href="https://pineapple-man.github.io/assets/images/logo.jpg">https://pineapple-man.github.io/assets/images/logo.jpg</a></td><td style="text-align:center">我博客 logo 的 URL</td></tr><tr><td style="text-align:center"><a href="ftp://joe:tools4u@ftp.joes-hardware.com/locking-pliers.gif">ftp://joe:tools4u@ftp.joes-hardware.com/locking-pliers.gif</a></td><td style="text-align:center">用 FTP 作为访问协议的 locking-pliers.gif 图片文件的 URL</td></tr></tbody></table><p>大部分 URL 都遵循如下这样一种标准格式，这种格式包含三个部分</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheme://PATH/TO/HOST/:PORT/PATH/TO/RESOURCE</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">部分</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">scheme://</td><td style="text-align:center">URL 的第一部分被称为方案（scheme），说明了访问资源所使用的协议类型。这部分通常是 HTTP 协议（http://）以告知 Web 客户端怎样访问资源</td></tr><tr><td style="text-align:center">PATH/TO/HOST/:PORT</td><td style="text-align:center">第二部分给出了服务器的因特网地址（比如，<a target="_blank" rel="noopener" href="http://www.joes-hardware.com">www.joes-hardware.com</a>）告知 Web 客户端资源位于何处</td></tr><tr><td style="text-align:center">/PATH/TO/RESOURCE</td><td style="text-align:center">指定了 Web 服务器上的某个资源路径（比如，/specials/saw-blade.gif）路径说明了请求的是服务器上哪个路径下的本地资源</td></tr></tbody></table><p>URL 可以通过 HTTP 之外的其他协议来访问资源。它们可以指向因特网上的任意资源，或者个人的 E-mail 账户，比如<code>mailto:president@whitehouse.gov</code>，或者通过其他协议（比如 FTP 协议）访问的各种文件：<code>ftp://ftp.lots-o-books.com/pub/complete-price-list.xls</code></p><p>URL 提供了一种统一的资源命名方式，大多数 URL 都有同样的：<code>scheme://PATH/TO/HOST/:PORT/PATH/TO/RESOURCE</code> 结构。因此，对网络上的每个资源来说，命名资源的方法只有一种，这样不管是谁都可以用名字来找到这个资源</p><h3 id="URN"><a class="header-anchor" href="#URN">¶</a>URN</h3><p>URI 的第二种形式就是统一资源名（URN），URN 是作为特定内容的唯一名称使用的，与资源所在地无关。使用这些与位置无关的 URN，就可以将资源四处搬移，通过 URN 可以用同一个名字通过多种网络访问协议来访问资源</p><div class="alert success no-icon"><p>URN 仍然处于试验阶段，还未大范围使用</p></div><h2 id="URL-的语法"><a class="header-anchor" href="#URL-的语法">¶</a>URL 的语法</h2><p>URL 提供了一种定位因特网上任意资源的手段，但这些资源是可以通过各种不同的方案（比如 HTTP、FTP、SMTP）来访问的，因此 URL 语法随方案的不同而有所不同</p><p>🤔这是不是意味着每种不同的 URL 方案都会有完全不同的语法呢？</p><div class="alert success no-icon"><p>实际上，不是的。 大部分 URL 都遵循通用的 URL 语法，而且不同 URL 方案的风格和语法都有不少重叠，多数 URL 方案的 URL 语法都建立在这个由 9 部分构成的通用格式上：</p></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;scheme&gt;://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;path&gt;;&lt;params&gt;?&lt;query&gt;#&lt;frag&gt;</span><br></pre></td></tr></table></figure><p>几乎没有哪个 URL 中包含了所有这些组件，URL 最重要的三个部分是<strong>方案（Scheme）</strong>、<strong>主机（host）<strong>和</strong>路径（path）</strong></p><table><thead><tr><th style="text-align:center">组件</th><th style="text-align:center">描述</th><th style="text-align:center">默认值</th></tr></thead><tbody><tr><td style="text-align:center">方案</td><td style="text-align:center">访问服务器以获取资源时要使用哪种协议</td><td style="text-align:center">无</td></tr><tr><td style="text-align:center">用户</td><td style="text-align:center">某些方案访问资源时需要的用户名</td><td style="text-align:center">匿名</td></tr><tr><td style="text-align:center">密码</td><td style="text-align:center">用户名后面可能要包含的密码，中间由冒号（:）分隔</td><td style="text-align:center">&lt;E-mail 地址 &gt;</td></tr><tr><td style="text-align:center">主机</td><td style="text-align:center">资源宿主服务器的主机名或点分 IP 地址</td><td style="text-align:center">无</td></tr><tr><td style="text-align:center">端口</td><td style="text-align:center">资源宿主服务器正在监听的端口号。很多方案都有默认端 口号（HTTP 的默认端口号为 80）</td><td style="text-align:center">每个方案特有</td></tr><tr><td style="text-align:center">路径</td><td style="text-align:center">服务器上资源的本地名，由一个斜杠（/）将其与前面的 URL 组件分隔开来。路径组件的语法是与服务器和方案有关的（本章稍后会讲到 URL 路径可以分为若干个段，每段都可以有其特有的组件。</td><td style="text-align:center">无</td></tr><tr><td style="text-align:center">参数</td><td style="text-align:center">某些方案会用这个组件来指定输入参数。参数为名 / 值对。 URL 中可以包含多个参数字段，它们相互之间以及与路径 的其余部分之间用分号（;）分隔</td><td style="text-align:center">无</td></tr><tr><td style="text-align:center">查询</td><td style="text-align:center">某些方案会用这个组件传递参数以激活应用程序（比如数 据库、公告板、搜索引擎以及其他因特网网关）。查询组件的内容没有通用格式。用字符<code>?</code>将其与 URL 的其余 部分分隔开来</td><td style="text-align:center">无</td></tr><tr><td style="text-align:center">片段</td><td style="text-align:center">一小片或一部分资源的名字。引用对象时，不会将 frag 字 段传送给服务器；这个字段是在客户端内部使用的。通过 字符“#”将其与 URL 的其余部分分隔开来</td><td style="text-align:center">无</td></tr></tbody></table><h3 id="方案"><a class="header-anchor" href="#方案">¶</a>方案</h3><div class="alert success no-icon"><p>方案也就是通常所说的众多协议（<code>HTTP</code>、<code>HTTPS</code>、<code>FTP</code>、<code>JDBC</code>），方案组件必须以一个字母符号开始，由第一个 <code>:</code> 符号将其与 URL 的其余部分隔开。<strong>方案名是大小写无关的</strong>，因此无论是<code>http://www.joes-hardware.com</code>和``HTTP://www.joes-hardware.com`是等价的</p></div><h3 id="主机与端口号"><a class="header-anchor" href="#主机与端口号">¶</a>主机与端口号</h3><div class="alert success no-icon"><p>要想在因特网上找到资源，应用程序要知道是：在什么地方可以找到能对目标资源进行访问的服务器，URL 的<strong>主机和端口</strong>组件提供了这两组信息。主机组件标识了因特网上能够访问资源的宿主机器。可以用上述主机名（<code>www.joes-hardware.com</code>），或者 IP 地址来表示主机名。</p></div><h3 id="用户名和密码"><a class="header-anchor" href="#用户名和密码">¶</a>用户名和密码</h3><p>很多服务器都要求输入用户名和密码才会允许用户访问数据（<span class="highlight-text red">如今使用的不多，大部分会在前后端程序中进行认证操作，不在 URL 上限制用于</span>）。FTP 服务器就是这样一个常见的实例，这里有几个例子：</p><div class="alert warning no-icon"><p><code>ftp://ftp.prep.ai.mit.edu/pub/gnu</code></p><p><code>ftp://anonymous@ftp.prep.ai.mit.edu/pub/gnu</code></p><p><code>ftp://anonymous:my_passwd@ftp.prep.ai.mit.edu/pub/gnu</code></p><p><code>http://joe:joespasswd@www.joes-hardware.com/sales_info.txt</code></p></div><p>第一个例子没有用户或密码组件，只有标准的方案、主机和路径。如果某应用程序使用的 URL 方案要求输入用户名和密码，但用户没有提供，它通常会插入一个默认的用户名和密码</p><p>如果向浏览器提供一个 FTP URL，但没有指定用户名和密码，它就会插入 anonymous（匿名用户）作为你的用户名，并发 送一个默认的密码（Internet Explorer 会发送 IEUser，Netscape Navigator 则会发送 mozilla）</p><h3 id="路径"><a class="header-anchor" href="#路径">¶</a>路径</h3><div class="alert success no-icon"><p>URL 的路径组件说明了资源位于服务器的什么地方。路径通常很像一个分级的文件系统路径。比如： <code>http://www.joes-hardware.com:80/seasonal/index-fall.html</code>，这个 URL 中的路径为 <code>/seasonal/index-fall.html</code>，很像 UNIX 文件系统中的文件系统路径，路径是服务器定位资源时所需的信息。其实这是一种简化的说法，<span class="highlight-text red">路径并不总能为资源定位提供足够的信息，有时候服务器还需要其他的信息</span>，可以用字符<code>/</code>将 HTTP URL 的路径组件划分成一些路径段（path segment）每个路径段都有自己的参数（param）组件</p></div><h3 id="参数"><a class="header-anchor" href="#参数">¶</a>参数</h3><div class="alert success no-icon"><p>对很多方案来说，只有简单的主机名和到达对象的路径是不够的。除了服务器正在监听的端口，以及是否能够通过用户名和密码访问资源外，很多协议都还需要更多的信息才能工作</p></div><p>负责解析 URL 的应用程序需要这些协议参数来访问资源，如果缺少相关的协议参数可能访问不到请求的服务。为了向应用程序提供它们所需的输入参数，以便正确地与服务器进行交互，URL 中有一个参数组件。这个组件就是 URL 中的<strong>键值对</strong>列表，由字符 <code>;</code> 将各种参数分隔开来，丰富了应用程序提供访问资源的方式</p><p>比如：</p><div class="alert success no-icon"><ul><li><code>ftp://prep.ai.mit.edu/pub/gnu;type=d</code>，在这个例子中，有一个参数 <code>type=d</code>，参数名为 <code>type</code>，值为 <code>d</code></li><li>如前所述，HTTP URL 的路径组件可以分成若干路径段。每段都可以有自己的参数，<code>http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true</code>,这个例子就有两个路径段，<code>hammers</code> 和 <code>index.html</code>。<code>hammers</code> 路径段有参数 <code>sale</code>，其值为 <code>false</code>。<code>index.html</code> 段有参数 <code>graphics</code>，其值为 <code>true</code></li></ul></div><h3 id="查询字符串"><a class="header-anchor" href="#查询字符串">¶</a>查询字符串</h3><div class="alert success no-icon"><p>很多资源（如：数据库服务），都是可以通过提问题或进行查询来缩小所请求资源类型范围的。</p></div><div class="alert warning no-icon"><p>假设 Joe 的五金商店在数据库中维护着一个未售货物的清单，并可以对清单进行查询，以判断产品是否有货，那就可以用下列 URL 来查询 Web 数据库网关，看看编号为 12731 的条目是否有货</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.joes-hardware.com/inventory-check.cgi?item=12731</span><br></pre></td></tr></table></figure></div><p>这个 URL 的大部分都与我们见过的其他 URL 类似。只有问号（?）右边的内容是新出现的。这部分被称为<strong>查询（query）组件</strong>。URL 的查询组件和标识网关资源的 URL 路径组件一起被发送给网关资源。基本上<strong>可以将网关当作访问其他应用程序的访问点</strong></p><p>除了有些不合规则的字符需要特别处理之外，对查询组件的格式没什么要求。按照常规，很多网关都希望查询字符串以一系列 <code>key=value</code> 的形式出现，键值对之间用字符 <code>&amp;</code> 分隔：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.joes-hardware.com/inventory-check.cgi?item=12731&amp;color=blue</span><br></pre></td></tr></table></figure><h3 id="片段"><a class="header-anchor" href="#片段">¶</a>片段</h3><div class="alert success no-icon"><p>有些资源类型，比如 HTML，除了资源级之外，还可以做进一步的划分</p></div><div class="alert warning no-icon"><p>比如，对一个带有章节的大型文本文档来说，资源的 URL 会指向整个文本文档，但理想的情况是，能够指定资源中的那些章节</p></div><p>为了引用部分资源或资源的一个片段，URL 支持使用<strong>片段（frag）组件</strong>来表示一个资源内部的片段。比如，URL 可以指向 HTML 文档中一个特定的图片或小节片段挂在 URL 的右手边，最前面有一个字符 <code>#</code></p><div class="alert warning no-icon"><p>比如下面这个例子，片段 drills 引用了 Joe 的五金商店 Web 服务器上页面 /tools.html 中的一个部分。这部分的名字叫做 drills</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:://www.joes-hardware.com/tools.html#drills</span><br></pre></td></tr></table></figure></div><div class="alert info no-icon"><p>📓HTTP 服务器通常只处理整个对象，而不是对象的片段，客户端不能将片段传送给服务器，浏览器从服务器获得了整个资源之后，会根据片段来显示你感兴趣的那部分资源</p></div><h2 id="URL-快捷方式"><a class="header-anchor" href="#URL-快捷方式">¶</a>URL 快捷方式</h2><p>Web 客户端可以理解并使用几种 URL 快捷方式。<strong>相对 URL</strong> 是在某资源内部指定一个资源的便捷缩略方式。很多浏览器还支持 URL 的<span class="highlight-text red">自动扩展</span>，也就是用户输入 URL 的一个关键（可记忆的）部分，然后由浏览器将其余部分填充起来</p><h3 id="相对-URL"><a class="header-anchor" href="#相对-URL">¶</a>相对 URL</h3><div class="alert success no-icon"><p>URL 有两种路径记录方式：<strong>绝对</strong>的和<strong>相对</strong>的</p><p>到目前为止，我们只见过绝对 URL。绝对 URL 中包含有访问资源所需的全部信息，相对 URL 是不完整的。要从相对 URL 中获取访问资源所需的全部信息，就必须有基准，这个基准被称为基础（base）的 URL ，所有的相对 URL 都是相对于这个基础 URL 进行解析的</p></div><p>相对 URL 是 URL 的一种便捷缩略记法。如果你手工写过 HTML 的话，就会发现相对 URL 是多么便捷了。下面是一个嵌入了相对 URL 的 HTML 文档实例</p><div class="alert warning no-icon"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Joe&#x27;s Tools<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Tools Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hammers<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Joe&#x27;s Hardware Online has the largest selection of<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;./hammers.html&quot;</span>&gt;</span>hammers<span class="tag">&lt;/<span class="name">a</span>&gt;</span> on earth.</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在这个 HTML 文档中有一个包含了 URL <code>./hammers.html</code> 的超链接。这个 URL 看起 来是不完整的，但实际上是个合法的相对 URL。可以相对于它所在文档的 URL 对 其进行解释；在这个例子中，就是相对于 Joe 的五金商店 Web 服务器的资源 <code>/tools.html</code></p></div><h4 id="基础-URL-Base-URL"><a class="header-anchor" href="#基础-URL-Base-URL">¶</a>基础 URL(Base URL)</h4><p>转换处理的第一步就是找到 Base URL，Base URL 是作为相对 URL 的参考点使用的，可以来自以下几个不同的地方：</p><div class="alert success no-icon"><ul><li>在资源中显式提供<ul><li>有些资源会显式地指定 Base URL。比如，HTML 文档中可能会包含一个定义了 Base URL 的 HTML 标记 ，通过它来转换那个 HTML 文档中的所有相对 URL</li></ul></li><li>封装资源的 Base URL - 如果在一个没有显式指定 Base URL 的资源中发现了一个相对 URL，可以将它所属资源的 URL 作为 Base URL</li></ul></div><h4 id="解析相对引用"><a class="header-anchor" href="#解析相对引用">¶</a>解析相对引用</h4><p>要将相对 URL 转换为一个绝对 URL，下一步要做的就是将相对 URL 和基础 URL 划分成组件段，实际上，这样只是在解析 URL，但这种做法会将其划分成一个个组件，因此通常会称作分解（decomposing）URL。只要将基础和相对 URL 划分成了组件，就可以使用相关的算法将一个相对 URL 抓换成其绝对模式，之后就可以用它来引用资源了</p><h3 id="自动扩展-URL"><a class="header-anchor" href="#自动扩展-URL">¶</a>自动扩展 URL</h3><p>有些浏览器会在用户提交 URL 之后，或者在用户输入的时候尝试着自动扩展 URL。 这就为用户提供了一条捷径：<strong>用户不需要输入完整的 URL，因为浏览器会自动扩展</strong>，这些<strong>自动扩展</strong>特性有以下两种方式：<strong>主机名扩展</strong>和<strong>历史扩展</strong></p><h4 id="主机名扩展"><a class="header-anchor" href="#主机名扩展">¶</a>主机名扩展</h4><p>在主机名扩展中，只要有些小提示，浏览器通常就可以在没有帮助的情况下，将你输入的主机名扩展为完整的主机名。 比如，如果在地址栏中输入 <code>yahoo</code>，浏览器就会自动在主机名中插入 <code>www.</code> 和 <code>.com</code>，构建出 <code>www.yahoo.com</code>。如果找不到与 yahoo 匹配的站点，有些浏览器会在放弃之前尝试几种扩展形式。浏览器通过这些简单的技巧来节省你的时间，减少找不到的可能。 但是，这些主机名扩展技巧可能会为其他一些 HTTP 应用程序带来问题（比如代理）</p><h4 id="历史扩展"><a class="header-anchor" href="#历史扩展">¶</a>历史扩展</h4><p>浏览器用来节省用户输入 URL 时间的另一种技巧是，<strong>将以前用户访问过的 URL 历史存储起来</strong>。当你输入 URL 时，它们就可以将你输入的 URL 与历史记录中 URL 的前缀进行匹配，并提供一些完整的选项供你选择。因此，如果你输入了一个以前访问过的 URL 的开始部分，比如 <code>http://www.joes-</code>，浏览器就可能会建议使用 <code>http://www.joes-hardware.com</code>。然后你就可以选择这个地址，不用输入完整的 URL 了。</p><h3 id="URL-中的字符处理"><a class="header-anchor" href="#URL-中的字符处理">¶</a>URL 中的字符处理</h3><div class="alert success no-icon"><p>URL 是可移植的（portable）。它要统一地命名因特网上所有的资源，这也就意味着 要通过各种不同的协议来传送这些资源。这些协议在传输数据时都会使用不同的机制，所以，设计 URL，使其可以通过任意因特网协议安全地传输是很重要的</p></div><p><strong>安全</strong>传输意味着 URL 的传输不能丢失信息。有些协议，比如传输电子邮件的简单邮件传输协议（Simple Mail Transfer Protocol，SMTP），所使用的传输方法就会剥去一些特定的字符。<span class="highlight-text red">为了避开这些问题，URL 只能使用一些相对较小的、通用的安全字母表中的字符。</span></p><p>除了希望 URL 可以被所有因特网协议进行传送之外，设计者们<strong>还希望 URL 也可供人类阅读</strong>。因此，即使不可见、不可打印的字符能够穿过邮件程序，从而成为可移植的，也不能在 URL 中使用（其中最重要的一个字符就是<strong>空格</strong>）</p><p><strong>URL 还得是完整的</strong>，这就使问题变得更加复杂了。URL 的设计者们认识到<strong>有时人们可能会希望 URL 中包含除通用的安全字母表之外的二进制数据或字符</strong>。因此，需要有一种<strong>转义机制</strong>，<span class="highlight-text red">能够将不安全的字符编码为安全字符，再进行传输</span></p><h3 id="URL-字符集"><a class="header-anchor" href="#URL-字符集">¶</a>URL 字符集</h3><div class="alert success no-icon"><p>默认的计算机系统字符集都倾向于以英语为中心，有些 URL 中还会包含任意的二进制数据。认识到对完整性的需求之后，URL 的设计者就将转义序列集成了进去，通过转义序列，就可以用 US-ASCII 字符集的有限子集对任意字符值或数据进行编码了，这样就实现了可移植性和完整性</p></div><h3 id="编码机制"><a class="header-anchor" href="#编码机制">¶</a>编码机制</h3><p>为了避开安全字符集表示法带来的限制，人们设计了一种编码机制，用来在 URL 中表示各种不安全的字符。这种编码机制就是通过一种<strong>转义</strong>表示法表示不安全字符的，这种转义表示法包含一个百分号（<code>%</code>），后面跟着两个表示字符 ASCII 码的 十六进制数</p><table><thead><tr><th style="text-align:center">字符</th><th style="text-align:center">ASCII 码</th><th style="text-align:center">示例</th></tr></thead><tbody><tr><td style="text-align:center">~</td><td style="text-align:center">126(<code>0x7E</code>)</td><td style="text-align:center"><code>http://www.joes-hardware.com/%7Ejoe</code></td></tr><tr><td style="text-align:center">空格</td><td style="text-align:center">32（<code>0x20</code>）</td><td style="text-align:center"><code>http://www.joes-hardware.com/more%20tools.html</code></td></tr><tr><td style="text-align:center">%</td><td style="text-align:center">37（<code>0x25</code>）</td><td style="text-align:center"><code>http://www.joes-hardware.com/100%25satisfaction.html</code></td></tr></tbody></table><h3 id="字符限制"><a class="header-anchor" href="#字符限制">¶</a>字符限制</h3><p>在 URL 中，有几个字符被保留起来，有着特殊的含义。有些字符不在定义的 <code>US-ASCII</code> 可打印字符集中。还有些字符会与某些因特网网关和协议产生混淆，因此不赞成使用</p><table><thead><tr><th style="text-align:center">字符</th><th style="text-align:center">保留/受限原因</th></tr></thead><tbody><tr><td style="text-align:center">%</td><td style="text-align:center">保留作为编码字符的转义标志</td></tr><tr><td style="text-align:center">/</td><td style="text-align:center">保留作为路径组件中分隔路径段的定界符</td></tr><tr><td style="text-align:center">.</td><td style="text-align:center">保留在路径组件中使用</td></tr><tr><td style="text-align:center">…</td><td style="text-align:center">保留在路径组件中使用</td></tr><tr><td style="text-align:center">#</td><td style="text-align:center">保留作为分段定界符使用</td></tr><tr><td style="text-align:center">?</td><td style="text-align:center">保留作为查询字符串定界符使用</td></tr><tr><td style="text-align:center">;</td><td style="text-align:center">保留作为参数定界符使用</td></tr><tr><td style="text-align:center">:</td><td style="text-align:center">保留作为方案、用户/口令，以及主机/端口组件的定界符使用</td></tr><tr><td style="text-align:center">$,+</td><td style="text-align:center">保留</td></tr><tr><td style="text-align:center">@ &amp; =</td><td style="text-align:center">在某些方案的上下文中有特殊的含义，保留</td></tr><tr><td style="text-align:center">{ }| \ ^ ~ [ ] `</td><td style="text-align:center">由于各种传输 Agent 代理，比如各种网关的不安全处理，使用受限</td></tr><tr><td style="text-align:center">&lt;&gt; &quot;</td><td style="text-align:center">不安全；这些字符在 URL 范围之外通常是有意义的，比如在文档中对 URL 自身 进行定界（比如 <a target="_blank" rel="noopener" href="http://www.joes-hardware.com">http://www.joes-hardware.com</a>），所以应该对其进行编码</td></tr><tr><td style="text-align:center">0x00-0x1F,0x7F</td><td style="text-align:center">受限，这些十六进制范围内的字符都在 US-ASCII 字符集的不可打印区间内</td></tr><tr><td style="text-align:center">&gt;0x7F</td><td style="text-align:center">受限，十六进制值在此范围内的字符都不在 US-ASCII 字符集的 7 比特范围内</td></tr></tbody></table><h3 id="其他"><a class="header-anchor" href="#其他">¶</a>其他</h3><div class="alert success no-icon"><p>应用程序要按照一定规范工作。客户端应用程序在向其他应用程序发送任意 URL 之前，最好把所有不安全或受限字符都进行转换。只要对所有不安全字符都进行了编码，这个 URL 就是可在各应用程序之间共享的规范形式；也就无需操心其他应用程序会被字符的任何特殊含义所迷惑了</p><p>另一种极端的做法就是应用程序对所有字符都进行编码。尽管并不建议这么做，但也没有什么强硬且严格的规则规定不能对那些安全字符进行编码；但在实际应用中，有些应用程序可能会假定不对安全字符进行编码，这么做的话可能会产生一些奇怪的破坏性行为。</p></div><p>📓总之，解释 URL 的应用程序必须在处理 URL 之前对其进行解码</p><h2 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h2><div class="alert info no-icon"><p>URL 是一种强有力的工具，可以用来命名所有现存对象，可以很方便地包含一些新格式。URL 还提供了一种可以在各种因特网协议间共享的统一命名机制。但 URL 并不完美。它们表示的是实际的地址，而不是准确的名字。这就意味着 URL 会告诉你资源此时处于什么位置。它会为你提供特定端口上特定服务器的名字，<strong>告诉你在何处可以找到这个资源</strong>。</p><p>😣这种方案的缺点在于<strong>如果资源被移走了， URL 也就不再有效了。那时，它就无法对对象进行定位了</strong></p></div><p>在可预见的未来，因特网资源仍然会以 URL 来命名。它们是 Web 能够成功非常重要的部分。其他命名方案想要取代 URL 还要一段时间。但是，URL 由于有其局限型，可能会出现新的标准（可能是 URN），对这种标准进行部署会解决其中的某些问题</p></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">标签</span><br><a class="tag tag--primary tag--small t-none-link" href="/tags/HTTP/" rel="tag">HTTP</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/rest/" data-tooltip="REST" aria-label="上一篇: REST"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE/" data-tooltip="开源协议" aria-label="下一篇: 开源协议"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></article><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><footer id="footer" class="main-content-wrap"><span class="copyrights">Copyrights &copy; 2023 pineapple-man. All Rights Reserved.</span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><br>Total <span id="busuanzi_value_site_pv"></span> views. 您是pineapple-man的第<span id="busuanzi_value_site_uv"></span>个小伙伴<br><i class="fas fa-book-open"></i> <span class="post-count">博客字数统计：370.7k</span><script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script></footer></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="5"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/rest/" data-tooltip="REST" aria-label="上一篇: REST"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE/" data-tooltip="开源协议" aria-label="下一篇: 开源协议"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="/assets/images/logo.png" alt="作者的图片"><h4 id="about-card-name">pineapple-man</h4><div id="about-card-bio"><p>做一个菠萝：站得笔直，头戴王冠，内心甜美</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>刚毕业就失业</p></div><div id="about-card-location"><i class="fa fa-map-marker-alt"></i><br>西安</div></div></div><div id="cover" style="background-image:url(/assets/images/cover-v1.2.0.jpg)"></div><script src="/assets/js/script-kcoiyt1nxfue7qgcpkrcixymglcc3cuxeg98fy01hqww4nblnhd2ees6j6yc.min.js"></script></body></html>