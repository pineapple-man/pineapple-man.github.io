<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="pineapple-man"><title>Spring IoC - pineapple-man</title><meta name="author" content="pineapple-man"><meta name="keywords" content="Spring IOC,自动注入"><link rel="icon" href="https://pineapple-man.github.io/assets/images/logo.svg"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"pineapple-man","sameAs":["https://github.com/pineapple-man","mailto://mingchaohu720@gmail.com"],"image":"logo.png"},"articleBody":"\n¶Spring IoC\nSpring 提供 IoC 容器实现两种方式（两个接口）：\n\nBeanFactory\nIoC 容器基本实现，是 Spring 内部使用接口\n不提倡开发人员进行使用\n. 加载配置文件时不会创建对象，获取（使用）对象时才会创建对象\nApplicationContext\nBeanFactory的子接口\n推荐开发人员使用\n. 加载配置文件时，就会将配置文件中的对象进行创建\n\n❓为什么读取配置文件时，就创建对象？\n\n服务端，为了能够更快速高效的为用户提供服务；需要使用的对象，最好启动服务时就创建，以免出现请求时，对象才开始创建的现象\n\n¶ApplicationContext 主要实现类\n\n\n\n实现类\n区别\n\n\n\n\nClassPathXmlApplicationContext\n读取类路径下的 XML 格式的配置文件\n\n\nFileSystemXmlApplicationContext\n文件系统中的 XML 格式的配置文件\n\n\n\n\n¶ConfigurableApplicationContext\n✨ConfigurableApplicationContext类\n\n是ApplicationContext的子接口\nrefresh()和close()让ApplicationContext具有启动、关闭和刷新上下文的能力\n\n¶WebApplicationContext\n✨专门为 WEB 应用而准备，允许从相对于 WEB 根目录的路径中完成初始化工作\n¶Bean 管理\n✨IoC 中进行 Bean 管理，主要指的时两个操作：\n\nSpring 创建 Bean 对象\nSpring 注入属性\n\nBean 管理操作存在两种方式：\n\n基于 XML 配置文件方式实现（新手）\n基于注解方式实现（老鸟）\n\n¶XML 方式创建 Bean 对象\nSpring 项目的构建至少需要如下几个包\n\nspring-beans\nspring-context\nspring-core\nspring-expression\n\n¶创建 Java Bean\n12345678public class User &#123; private String name; private Integer age; public void add() &#123;  System.out.println(&quot;from User&#x27;s add method...&quot;); &#125;&#125;\n¶Spring 配置文件\n123456&lt;?xml version=&quot;0&quot; encoding=&quot;UTF-?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www..org/0XMLSchema-instance&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;    &lt;bean id=&quot;user&quot; class=&quot;com.pineapple_man.spring.User&quot;&gt;&lt;/bean&gt;&lt;/beans&gt;\n✨Spring 配置文件特点\n\n使用&lt;bean&gt;标签，实现对象创建\nid属性：唯一标识\nclass属性：创建类的全路径\n\n🎶Spring 创建对象时，默认执行无参数构造方法完成对象创建\n¶代码测试\n123456789public class UserTest &#123; @Test public void add() &#123;  ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;beanxml&quot;);        //getBean()的第一个参数是 beanxml 中 bean 的 id  User user = applicationContext.getBean(&quot;user&quot;, User.class);  user.add(); &#125;&#125;\n¶XML 方式注入属性\n对于大项目通常使用注解方式，XML 方式使得项目复杂并且难以管理，但是便于学习\n\n¶set 方法注入\n创建类，定义属性\n123456789101112131415161718192021222324public class User &#123; private String name; private Integer age; public void add() &#123;  System.out.println(&quot;from User&#x27;s add method...&quot;); &#125; public void setName(String name) &#123;  this.name = name; &#125; public void setAge(Integer age) &#123;  this.age = age; &#125; @Override public String toString() &#123;  return &quot;User&#123;&quot; +    &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; +    &quot;, age=&quot; + age +    &#x27;&#125;&#x27;; &#125;&#125;\n在 Spring 配置文件配置对象创建，配置属性注入\n1234&lt;bean id=&quot;user&quot; class=&quot;com.pineapple_man.spring.User&quot;&gt; &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;name&quot; value=&quot;张三丰&quot;&gt;&lt;/property&gt;&lt;/bean&gt;\n🎶&lt;property&gt;标签中属性值含义\n\nname类里面属性名称\nvalue向属性注入的值\n\n¶有参构造进行注入\n创建有参数构造\n1234567891011121314151617public class User &#123; private String name; private Integer age; public User(String name, Integer age) &#123;  this.name = name;  this.age = age; &#125; @Override public String toString() &#123;  return &quot;User&#123;&quot; +    &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; +    &quot;, age=&quot; + age +    &#x27;&#125;&#x27;; &#125;&#125;\n在 Spring 配置文件中进行配置\n1234&lt;bean id=&quot;user&quot; class=&quot;com.pineapple_man.spring.User&quot;&gt; &lt;constructor-arg name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/constructor-arg&gt; &lt;constructor-arg name=&quot;name&quot; value=&quot;达摩老祖&quot;&gt;&lt;/constructor-arg&gt;&lt;/bean&gt;\n¶p 名称空间注入\n添加 p 名称空间到配置文件中\n123456&lt;?xml version=&quot;0&quot; encoding=&quot;UTF-?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www.worg/0XMLSchema-instance&quot;       xmlns:p=&quot;http://www.springframework.org/schema/p&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;&lt;/beans&gt;\n进行属性注入\n1&lt;bean id=&quot;user&quot; class=&quot;com.pineapple_man.spring.User&quot; p:age=&quot; p:name=&quot;超哥&quot;&gt;&lt;/bean&gt;\n¶XML 方式注入特殊值\n主要是通过 xml 注入其他类型的数据\n¶注入 null\n123456&lt;bean id=&quot;user&quot; class=&quot;com.pineapple_man.spring.User&quot;&gt; &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;name&quot;&gt;  &lt;null&gt;&lt;/null&gt; &lt;/property&gt;&lt;/bean&gt;\n¶注入属性包含特殊符号\n存在两种方式:\n\n使用转移字符(&amp;lt,&amp;gt)\n将带特殊符号内容写到 CDATA 中\n\n123456&lt;bean id=&quot;user&quot; class=&quot;com.pineapple_man.spring.User&quot;&gt; &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;name&quot;&gt;  &lt;value&gt;&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;&lt;/value&gt; &lt;/property&gt;&lt;/bean&gt;\n¶注入外部 bean\n在Service类的内部，调用了dao类方法\n123456789101112public class UserService &#123; UserDao dao = new UserImpl(); public void setDao(UserDao dao) &#123;  this.dao = dao; &#125; public void update() &#123;  System.out.println(&quot;from service update method.&quot;);  dao.update(); &#125;&#125;\n123456public class UserImpl implements UserDao &#123; @Override public void update() &#123;  System.out.println(&quot;from userimple update method&quot;); &#125;&#125;\n配置文件中进行配置\n1234&lt;bean id=&quot;userService&quot; class=&quot;com.pineapple_man.spring.service.UserService&quot;&gt; &lt;property name=&quot;dao&quot; ref=&quot;userDao&quot;/&gt;&lt;/bean&gt;&lt;bean id=&quot;userDao&quot; class=&quot;com.pineapple_man.spring.dao.impl.UserImpl&quot;&gt;&lt;/bean&gt;\n✨ref属性：只想另一个javaBean的id\n¶注入内部 bean\n书写对应实体类\n1234567891011121314151617181920public class Class &#123; private String name; private int stuentsNumber; public void setName(String name) &#123;  this.name = name; &#125; public void setStuentsNumber(int stuentsNumber) &#123;  this.stuentsNumber = stuentsNumber; &#125; @Override public String toString() &#123;  return &quot;Class&#123;&quot; +    &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; +    &quot;, stuentsNumber=&quot; + stuentsNumber +    &#x27;&#125;&#x27;; &#125;&#125;\n1234567891011121314151617181920212223242526272829303132333435363738public class Student &#123; private String name; private Integer age; private String gender; //一个学生属于一个班级 private Class aClass; //内部注入，不需要getter方法 public void setaClass(Class aClass) &#123;  this.aClass = aClass; &#125; @Override public String toString() &#123;  return &quot;Student&#123;&quot; +    &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; +    &quot;, age=&quot; + age +    &quot;, gender=&#x27;&quot; + gender + &#x27;\\&#x27;&#x27; +    &#x27;&#125;&#x27;; &#125; public void setName(String name) &#123;  this.name = name; &#125; public void setAge(Integer age) &#123;  this.age = age; &#125; public void setGender(String gender) &#123;  this.gender = gender; &#125; public Student(String name, Integer age, String gender) &#123;  this.name = name;  this.age = age;  this.gender = gender; &#125;&#125;\n内部 bean 配置\n1234567891011&lt;bean id=&quot;student&quot; class=&quot;com.pineapple_man.spring.bean.Student&quot;&gt; &lt;constructor-arg name=&quot;name&quot; value=&quot;Tony&quot;&gt;&lt;/constructor-arg&gt; &lt;constructor-arg name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/constructor-arg&gt; &lt;constructor-arg name=&quot;gender&quot; value=&quot;male&quot;&gt;&lt;/constructor-arg&gt; &lt;property name=&quot;aClass&quot;&gt;  &lt;bean id=&quot;class&quot; class=&quot;com.pineapple_man.spring.bean.Class&quot;&gt;   &lt;property name=&quot;name&quot; value=&quot;S00&quot;&gt;&lt;/property&gt;   &lt;property name=&quot;stuentsNumber&quot; value=&quot;&quot;&gt;&lt;/property&gt;  &lt;/bean&gt; &lt;/property&gt;&lt;/bean&gt;\n¶级联赋值\n级联赋值，用于向一个对象中注入另一个对象\n¶注入外部 bean 方式\n1234567891011&lt;bean id=&quot;student&quot; class=&quot;com.pineapple_man.spring.bean.Student&quot;&gt; &lt;constructor-arg name=&quot;name&quot; value=&quot;Tony&quot;&gt;&lt;/constructor-arg&gt; &lt;constructor-arg name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/constructor-arg&gt; &lt;constructor-arg name=&quot;gender&quot; value=&quot;male&quot;&gt;&lt;/constructor-arg&gt; &lt;!--级联赋值--&gt;    &lt;property name=&quot;aClass&quot; ref=&quot;class&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;class&quot; class=&quot;com.pineapple_man.spring.bean.Class&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;S00&quot;&gt;&lt;/property&gt; &lt;property name=&quot;stuentsNumber&quot; value=&quot;&quot;&gt;&lt;/property&gt;&lt;/bean&gt;\n¶指定属性注入\n12345678910&lt;bean id=&quot;student&quot; class=&quot;com.pineapple_man.spring.bean.Student&quot;&gt; &lt;constructor-arg name=&quot;name&quot; value=&quot;Tony&quot;&gt;&lt;/constructor-arg&gt; &lt;constructor-arg name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/constructor-arg&gt; &lt;constructor-arg name=&quot;gender&quot; value=&quot;male&quot;&gt;&lt;/constructor-arg&gt; &lt;!--级联赋值--&gt;    &lt;property name=&quot;aClass&quot; ref=&quot;class&quot;&gt;&lt;/property&gt; &lt;property name=&quot;aClass.name&quot; value=&quot;S00&quot;/&gt;&lt;/bean&gt;&lt;bean id=&quot;class&quot; class=&quot;com.pineapple_man.spring.bean.Class&quot;&gt;&lt;/bean&gt;\n🎶ref指定的类需要在当前类中存在setter和getter方法\n¶注入集合属性\n对集合类属性注入\n¶常见类型注入\n创建包含集合属性的类，拥有数组、List、Map、Set属性\n123456789101112131415161718192021222324252627public class Student &#123; private String name; private Integer age; private String gender; private String[] courses; private List&lt;String&gt; list; private Map&lt;String, String&gt; map; private Set&lt;String&gt; set; public void setSet(Set&lt;String&gt; set) &#123;  this.set = set; &#125; public void setCourses(String[] courses) &#123;  this.courses = courses; &#125; public void setList(List&lt;String&gt; list) &#123;  this.list = list; &#125; public void setMap(Map&lt;String, String&gt; map) &#123;  this.map = map; &#125; public Student() &#123; &#125;&#125;\n配置文件\n12345678910111213141516171819202122232425262728&lt;bean id=&quot;student&quot; class=&quot;com.pineapple_man.spring.bean.Student&quot;&gt;    &lt;property name=&quot;courses&quot;&gt;        &lt;array&gt;            &lt;value&gt;语文&lt;/value&gt;            &lt;value&gt;数学&lt;/value&gt;            &lt;value&gt;英语&lt;/value&gt;        &lt;/array&gt;    &lt;/property&gt;    &lt;property name=&quot;list&quot;&gt;        &lt;list&gt;            &lt;value&gt;语文&lt;/value&gt;            &lt;value&gt;数学&lt;/value&gt;            &lt;value&gt;英语&lt;/value&gt;        &lt;/list&gt;    &lt;/property&gt;    &lt;property name=&quot;set&quot;&gt;        &lt;set&gt;            &lt;value&gt;MySQL&lt;/value&gt;            &lt;value&gt;ELK&lt;/value&gt;        &lt;/set&gt;    &lt;/property&gt;    &lt;property name=&quot;score&quot;&gt;        &lt;map&gt;            &lt;entry key=&quot;语文&quot; value=&quot;&quot;&gt;&lt;/entry&gt;            &lt;entry key=&quot;数学&quot; value=&quot;0&quot;&gt;&lt;/entry&gt;        &lt;/map&gt;    &lt;/property&gt;&lt;/bean&gt;\n¶bean 类型注入\n1234567891011121314151617&lt;bean id=&quot;user class=&quot;com.pineapple_man.spring.bean.User&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;超哥&quot;&gt;&lt;/property&gt; &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;user class=&quot;com.pineapple_man.spring.bean.User&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;龙哥&quot;&gt;&lt;/property&gt; &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;student&quot; class=&quot;com.pineapple_man.spring.bean.Student&quot;&gt; &lt;!--注入list集合类型，值是对象--&gt;    &lt;property name=&quot;teachers&quot;&gt;     &lt;list&gt;         &lt;ref bean=&quot;user&gt;&lt;/ref&gt;            &lt;ref bean=&quot;user&gt;&lt;/ref&gt;  &lt;/list&gt; &lt;/property&gt;&lt;/bean&gt;\n1234567public class Student &#123;   private List&lt;User&gt; teachers;   public void setTeachers(List&lt;User&gt; teachers) &#123;      this.teachers = teachers;   &#125;&#125;\n¶提取共同代码\n在 Spring 配置文件中引入名称空间util\n123456&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www.worg/0XMLSchema-instance&quot;       xmlns:util=&quot;http://www.springframework.org/schema/util&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;&lt;/beans&gt;\n使用utils标签完成 list 集合公共部分的提取\n12345678910111213&lt;bean id=&quot;user class=&quot;com.pineapple_man.spring.bean.User&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;龙哥&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;user class=&quot;com.pineapple_man.spring.bean.User&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;超哥&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;util:list id=&quot;teacherList&quot;&gt; &lt;ref bean=&quot;user&gt;&lt;/ref&gt;    &lt;ref bean=&quot;user&gt;&lt;/ref&gt;&lt;/util:list&gt;&lt;bean id=&quot;stu class=&quot;com.pineapple_man.spring.bean.Student&quot;&gt; &lt;property name=&quot;teachers&quot; ref=&quot;teacherList&quot;&gt;&lt;/property&gt;&lt;/bean&gt;\n¶FactoryBean\n✨Spring 有两种类型bean：普通bean和FactoryBean\n\n普通 bean：配置文件中定义bean类型就是返回类型\n工厂 bean：配置文件定义bean类型可以和返回类型不同\n\n⛵FactoryBean 使用步骤：\n\n创建工厂 bean 类，实现FactoryBean接口\n实现接口中的方法，在实现的方法中返回声明的 bean 类型\n\n1234567891011121314151617public class MyBean implements FactoryBean&lt;User&gt; &#123;    //定义返回的 bean 类型 @Override public User getObject() throws Exception &#123;  return new User(&quot;龙哥&quot;, ); &#125; @Override public java.lang.Class&lt;?&gt; getObjectType() &#123;  return null; &#125; @Override public boolean isSingleton() &#123;  return FactoryBean.super.isSingleton(); &#125;&#125;\n\n书写配置文件\n\n1&lt;bean id=&quot;mybean&quot; class=&quot;com.pineapple_man.spring.bean.MyBean&quot;&gt;&lt;/bean&gt;\n\n检查结果\n\n12345678public void beanTest() &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;beanxml&quot;); User mybean= applicationContext.getBean(&quot;mybean&quot;, User.class); User mybean= applicationContext.getBean(&quot;mybean&quot;, User.class); System.out.println(mybeangetClass().hashCode()); System.out.println(mybeangetClass().hashCode());    //mybean与 mybean的hash值相同&#125;\n¶Bean 作用域\n默认情况下，Spring 中 bean 是单实例对象，通过修改配置文件，可以选择是单实例还是多实例\nscope属性有两个值：singleton和prototype\n1&lt;bean id=&quot;mybean&quot; class=&quot;com.pineapple_man.spring.bean.MyBean&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;\n✨singleton和prototype的区别\n\nsingleton是单实例，prototype是多实例\nscope 为singleton时，加载配置文件就会创建单实例对象\nscope 为prototype时，调用getnBean()方法时创建多实例对象\n\n¶bean 生命周期\n✨ bean 的生命周期（七个阶段）：\n通过构造器创建bean实例（无参数构造）\n为bean的属性注入以及对其他bean引用(调用set()方法) 3. 将bean实例传递给bean后置处理器的方法postProcessBeforeInitialization 4. 调用bean的初始化方法（需要进行配置初始化的方法） 5. 将bean实例传递给bean后置处理器方法postProcessAfterInitialization\n使用bean\n在容器关闭时，调用bean的销毁方法（需要配置销毁方法）\n¶Java Bean\n1234567891011121314151617181920public class LifeCycle &#123;   private String step;   public LifeCycle() &#123;      System.out.println(&quot; 来自于无参构造函数&quot;);   &#125;   public void setStep(String step) &#123;      System.out.println(&quot; 来自于set方法&quot;);      this.step = step;   &#125;   public void initMethod() &#123;      System.out.println(. 来自于initMethod&quot;);   &#125;   public void destoryMethod() &#123;      System.out.println(&quot;5.来自destoryMethod&quot;);   &#125;&#125;\n¶预处理和后处理类\n12345678910111213public class PostProcess implements BeanPostProcessor &#123; @Override public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123;  System.out.println(&quot;from postProcessBeforeInitialization&quot;);  return BeanPostProcessor.super.postProcessBeforeInitialization(bean, beanName); &#125; @Override public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123;  System.out.println(&quot;from postProcessAfterInitialization&quot;);  return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName); &#125;&#125;\n¶Spring 配置\n12345678910&lt;?xml version=&quot;0&quot; encoding=&quot;UTF-?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www..org/0XMLSchema-instance&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;    &lt;bean id=&quot;lifecycle&quot; class=&quot;com.pineapple_man.spring.bean.LifeCycle&quot; init-method=&quot;initMethod&quot;          destroy-method=&quot;destoryMethod&quot;&gt;        &lt;property name=&quot;step&quot; value=&quot;start&quot;&gt;&lt;/property&gt;    &lt;/bean&gt;    &lt;bean id=&quot;postprocess&quot; class=&quot;com.pineapple_man.spring.bean.PostProcess&quot;&gt;&lt;/bean&gt;&lt;/beans&gt;\n🎶预处理和后处理将会作用在此文件的所有 bean 对象\n¶xml 自动装配\n✨自动状态就是——根据指定装配规则（属性名称或者属性类型），Spring 自动将匹配的属性值进行注入\n123456789101112131415161718192021222324//Java Beanpublic class AutoInject &#123; private User user; private User teacher; public AutoInject() &#123; &#125; @Override public String toString() &#123;  return &quot;AutoInject&#123;&quot; +    &quot;user=&quot; + user +    &quot;, teacher=&quot; + teacher +    &#x27;&#125;&#x27;; &#125; public void setTeacher(User teacher) &#123;  this.teacher = teacher; &#125; public void setUser(User user) &#123;  this.user = user; &#125;&#125;\n¶根据属性名称自动注入\n🎶注入值 bean 的 id 值和类属性名称一样\n12345678910&lt;bean class=&quot;com.pineapple_man.spring.bean.AutoInject&quot; id=&quot;autoInject&quot; autowire=&quot;byName&quot;&gt;&lt;/bean&gt;&lt;bean class=&quot;com.pineapple_man.spring.bean.User&quot; id=&quot;user&quot;&gt;    &lt;property name=&quot;name&quot; value=&quot;tony&quot;&gt;&lt;/property&gt;    &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean class=&quot;com.pineapple_man.spring.bean.User&quot; id=&quot;teacher&quot;&gt;    &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt;    &lt;property name=&quot;name&quot; value=&quot;Dany&quot;&gt;&lt;/property&gt;&lt;/bean&gt;\n¶根据属性类型自动注入\n🎶类型自动注入只能应用在类中只有这样一种类型的属性，否则可能找不到注入属性\n12345678910&lt;bean class=&quot;com.pineapple_man.spring.bean.AutoInject&quot; id=&quot;autoInject&quot; autowire=&quot;byType&quot;&gt;&lt;/bean&gt;&lt;bean class=&quot;com.pineapple_man.spring.bean.User&quot; id=&quot;user&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;tony&quot;&gt;&lt;/property&gt; &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean class=&quot;com.pineapple_man.spring.bean.User&quot; id=&quot;teacher&quot;&gt; &lt;property name=&quot;age&quot; value=&quot;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;name&quot; value=&quot;Dany&quot;&gt;&lt;/property&gt;&lt;/bean&gt;\n¶外部属性文件\n将外部属性文件内的数据，导入到 Spring 配置文件中\n¶直接配置数据库信息\n123456&lt;bean class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; id=&quot;dataSource&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;    &lt;property name=&quot;url&quot; value=&quot;jdbc:///t_user&quot;&gt;&lt;/property&gt;    &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;    &lt;property name=&quot;password&quot; value=45&gt;&lt;/property&gt;&lt;/bean&gt;\n123456public void druidTest) &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;); DruidDataSource dataSource = applicationContext.getBean(&quot;dataSource&quot;, DruidDataSource.class); System.out.println(dataSource.getPassword()); System.out.println(dataSource.getUsername());&#125;\n¶外部属性文件配置数据库连接池\n¶增加 jdbc.properties 文件，保存数据库信息\n1234prop.driverClass=com.mysql.jdbc.Driverprop.url=jdbc:mysql:///prop.userName=rootprop.password456\n¶Spring 配置文件\n123456789101112131415&lt;?xml version=&quot;0&quot; encoding=&quot;UTF-?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www..org/0XMLSchema-instance&quot;       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;    &lt;!--引入外部文件--&gt;    &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;&gt;&lt;/context:property-placeholder&gt;    &lt;bean class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; id=&quot;dataSource&quot;&gt;        &lt;property name=&quot;name&quot; value=&quot;$&#123;prop.driverClass&#125;&quot;&gt;&lt;/property&gt;        &lt;property name=&quot;url&quot; value=&quot;$&#123;prop.url&#125;&quot;&gt;&lt;/property&gt;        &lt;property name=&quot;username&quot; value=&quot;$&#123;prop.userName&#125;&quot;&gt;&lt;/property&gt;        &lt;property name=&quot;password&quot; value=&quot;$&#123;prop.password&#125;&quot;&gt;&lt;/property&gt;    &lt;/bean&gt;&lt;/beans&gt;\n¶注解方式管理 Bean\n✨注解特点\n\n注解是特殊标记，格式@注解名称(属性名称=属性值,...)\n注解作用在类上面，方法上面，属性上面\n\n:+使用注解方式管理 bean 的优点\n\n简化 xml 配置\n便于程序阅读\n\n¶可用注解\n\n🎶Sping 创建对象的四个注解：\n@Component &gt; @Service\n. @Controller 4. @Repository\n\n🎶上面四个注解功能是一样的，都是可以用来创建 bean 实例\n¶.基于注解方式实现对象创建\n主要共分为三个步骤\n¶引入依赖\n在项目中引入spring-aop-5.RELEASE.jar包\n¶组件扫描配置\n在 Spring 配置文件中进行组件扫描配置\n12345678&lt;?xml version=&quot;0&quot; encoding=&quot;UTF-?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www..org/0XMLSchema-instance&quot;       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;    &lt;context:component-scan base-package=&quot;com.pineapple_man.spring.aop&quot;&gt;&lt;/context:component-scan&gt;&lt;/beans&gt;\n🎶组件扫描注意点\n\n如果扫描多个包，多个包之间使用逗号隔开\n如果一个目录中有多个类进行扫描，则配置自动扫描上层目录\n\n¶Spring 托管创建实例\n书写 Java Bean，在类上添加创建对象注解\n123456@Component(value = &quot;aopUserService&quot;)public class AopUserService &#123; public void method() &#123;  System.out.println(&quot;from AopUserService method&quot;); &#125;&#125;\n🎶@Component(value)中的value属性是可以省略不写的，默认值是：首字母小写的类名，如果书写了，value 等价与&lt;bean&gt;中的 id 属性\n¶组件扫描详细配置\n实现扫描过滤器配置，可以选择在包中，默认扫描那些类，不扫描那些类\n12345678910111213&lt;?xml version=&quot;0&quot; encoding=&quot;UTF-?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www..org/0XMLSchema-instance&quot;       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;    &lt;context:component-scan base-package=&quot;com.pineapple_man.spring.aop&quot;                            use-default-filters=&quot;false&quot;&gt;  &lt;!--默认仅扫描拥有 @Component 注解的类--&gt;        &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Component&quot;/&gt;        &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Component&quot;/&gt;    &lt;/context:component-scan&gt;&lt;/beans&gt;\n✨扫描过滤器特点\nuse-default-filters=&quot;false&quot;：表示不适用默认过滤器，用户自己配置过滤器\n&lt;context:include-filter type=&quot;&quot; expression=&quot;&quot;&gt;：设置那些内容进行扫描\n&lt;context:exclude-filter type=&quot;&quot; expression=&quot;&quot;&gt;：设置那些内容不进行扫描\n¶注解方式实现属性注入\n\n\n\n注解\n含义\n\n\n\n\n@Autowired\n根据属性类型进行自动装配\n\n\n@Qualifier\n根据名称进行注入，需要和@Autowired一起使用\n\n\n@Resource\n可以根据类型注入也可以根据名称注入\n\n\n@Value\n注入普通类型属性\n\n\n\n1234567@Repository(value = &quot;aopDao&quot;)public class AopDao &#123; public void method() &#123;  System.out.println(&quot;From aopDao method&quot;); &#125;&#125;\n¶@Autowired\n12345678910@Component(value = &quot;aopUserService&quot;)public class AopUserService &#123; @Autowired private AopDao aopDao; public void method() &#123;  System.out.println(&quot;from AopUserService method&quot;);  aopDao.method(); &#125;&#125;\n🎶@Autowired注解不需要属性具有setXxx()方法\n¶@Qualifier\n1234567891011@Component(value = &quot;aopUserService&quot;)public class AopUserService &#123; @Autowired @Qualifier(value = &quot;aopDao&quot;) private AopDao aopDao; public void method() &#123;  System.out.println(&quot;from AopUserService method&quot;);  aopDao.method(); &#125;&#125;\n🎶根据名称( id )注入，需要和@Autowired一起使用\n¶@Resource\n12345678910@Component(value = &quot;aopUserService&quot;)public class AopUserService &#123; @Resource(name = &quot;aopDao&quot;) private AopDao aopDao; public void method() &#123;  System.out.println(&quot;from AopUserService method&quot;);  aopDao.method(); &#125;&#125;\n🎶@Resource可以根据类型注入，也可以根据名称注入\n\n@Resource：根据类型进行注入\n@Resource(name = &quot;aopDao&quot;)：根据名称进行注入\n此注解所在的包是javax.annotation.Resource\n\n¶@Value\n123456789101112131415@Component(value = &quot;aopUserService&quot;)public class AopUserService &#123; @Resource(name = &quot;aopDao&quot;) private AopDao aopDao; @Value(&quot;pineapple-man&quot;) private String name; public void method() &#123;  System.out.println(&quot;from AopUserService method&quot;);  aopDao.method();  System.out.println(name); &#125;&#125;\n🎶对普通类型属性进行注入\n¶完全注解开发\n不再需要冗长的配置文件，使用一个配置类代替所有的配置文件\n¶注解配置类\n1234@Configuration@ComponentScan(basePackages = &#123;&quot;com.pineapple_man.spring.aop&quot;&#125;)public class SpringConfig &#123;&#125;\n✨注解类特点\n\n@Configuration配置类注解，声明当前类是配置类\n@ComponentScan(basePackages = &#123;&quot;com&quot;&#125;)自动扫描包注解\n\n¶测试方法\n12345public void annotationConfigTest() &#123; ApplicationContext applicationContext = new AnnotationConfigApplicationContext(SpringConfig.class); AopUserService aopUserService = applicationContext.getBean(&quot;aopUserService&quot;, AopUserService.class);  aopUserService.method();&#125;\n","dateCreated":"2021-10-23T15:55:39+00:00","dateModified":"2023-06-07T02:13:34+00:00","datePublished":"2021-10-23T15:55:39+00:00","description":"本文主要介绍 Spring 中的IoC容器使用方法（XML配置方式以及注解方式）","headline":"Spring IoC","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://pineapple-man.github.io/spring-ioc/"},"publisher":{"@type":"Organization","name":"pineapple-man","sameAs":["https://github.com/pineapple-man","mailto://mingchaohu720@gmail.com"],"image":"logo.png","logo":{"@type":"ImageObject","url":"logo.png"}},"url":"https://pineapple-man.github.io/spring-ioc/","keywords":"Spring"}</script><meta name="description" content="本文主要介绍 Spring 中的IoC容器使用方法（XML配置方式以及注解方式）"><meta property="og:type" content="blog"><meta property="og:title" content="Spring IoC"><meta property="og:url" content="https://pineapple-man.github.io/spring-ioc/"><meta property="og:site_name" content="pineapple-man"><meta property="og:description" content="本文主要介绍 Spring 中的IoC容器使用方法（XML配置方式以及注解方式）"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210607182210091.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/XML%E6%96%B9%E5%BC%8F%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7.png"><meta property="article:published_time" content="2021-10-23T15:55:39.000Z"><meta property="article:modified_time" content="2023-06-07T02:13:34.011Z"><meta property="article:author" content="pineapple-man"><meta property="article:tag" content="Spring"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210607182210091.png"><meta property="og:image" content="https://pineapple-man.github.io/assets/images/logo.png"><link rel="stylesheet" href="/assets/css/style-oth3meuzcjopbgwqbdvoxqknhcm0sy9wkullcc94zhkkop3pmfrpl5t4fzzz.min.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-210516333-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-210516333-1")</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"></head><body><div id="blog"><header id="header" data-behavior="5"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">pineapple-man</a></div><a class="header-right-picture" href="#about" aria-label="打开链接: /#about"><img class="header-picture" src="/assets/images/logo.png" alt="作者的图片"></a></header><nav id="sidebar" data-behavior="5"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="阅读有关作者的更多信息"><img class="sidebar-profile-picture" src="/assets/images/logo.png" alt="作者的图片"></a><h4 class="sidebar-profile-name">pineapple-man</h4><h5 class="sidebar-profile-bio"><p>做一个菠萝：站得笔直，头戴王冠，内心甜美</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" rel="noopener" title="首页"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">首页</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-categories" rel="noopener" title="分类"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">分类</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-tags" rel="noopener" title="标签"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">标签</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-archives" rel="noopener" title="归档"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">归档</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="#about" rel="noopener" title="关于"><i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i> <span class="sidebar-button-desc">关于</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/pineapple-man" target="_blank" rel="noopener" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="mailto://mingchaohu720@gmail.com" target="_blank" rel="noopener" title="邮箱"><i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i> <span class="sidebar-button-desc">邮箱</span></a></li></ul></div></nav><div id="main" data-behavior="5" class="hasCoverMetaIn"><article class="post"><div class="post-header main-content-wrap text-center"><h1 class="post-title">Spring IoC</h1><div class="post-meta"><time datetime="2021-10-23T15:55:39+00:00">10月 23, 2021 </time><span>发布在 </span><a class="category-link" href="/categories/Java/">Java</a> <i class="fas fa-book-open"></i> 本文共<span class="post-count"> 5.4k </span>字 <i class="far fa-clock"></i> 阅读预计<span class="post-count"> 66 </span>分钟</div></div><div class="post-content markdown"><div class="main-content-wrap"><h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-IoC"><span class="toc-text">Spring IoC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ApplicationContext-%E4%B8%BB%E8%A6%81%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-text">ApplicationContext 主要实现类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ConfigurableApplicationContext"><span class="toc-text">ConfigurableApplicationContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebApplicationContext"><span class="toc-text">WebApplicationContext</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bean-%E7%AE%A1%E7%90%86"><span class="toc-text">Bean 管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XML-%E6%96%B9%E5%BC%8F%E5%88%9B%E5%BB%BA-Bean-%E5%AF%B9%E8%B1%A1"><span class="toc-text">XML 方式创建 Bean 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Java-Bean"><span class="toc-text">创建 Java Bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">Spring 配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95"><span class="toc-text">代码测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XML-%E6%96%B9%E5%BC%8F%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7"><span class="toc-text">XML 方式注入属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#set-%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5"><span class="toc-text">set 方法注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%8F%82%E6%9E%84%E9%80%A0%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5"><span class="toc-text">有参构造进行注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#p-%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E6%B3%A8%E5%85%A5"><span class="toc-text">p 名称空间注入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XML-%E6%96%B9%E5%BC%8F%E6%B3%A8%E5%85%A5%E7%89%B9%E6%AE%8A%E5%80%BC"><span class="toc-text">XML 方式注入特殊值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5-null"><span class="toc-text">注入 null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7%E5%8C%85%E5%90%AB%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7"><span class="toc-text">注入属性包含特殊符号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%A4%96%E9%83%A8-bean"><span class="toc-text">注入外部 bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%86%85%E9%83%A8-bean"><span class="toc-text">注入内部 bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A7%E8%81%94%E8%B5%8B%E5%80%BC"><span class="toc-text">级联赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%A4%96%E9%83%A8-bean-%E6%96%B9%E5%BC%8F"><span class="toc-text">注入外部 bean 方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="toc-text">指定属性注入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E9%9B%86%E5%90%88%E5%B1%9E%E6%80%A7"><span class="toc-text">注入集合属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-text">常见类型注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bean-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-text">bean 类型注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E5%85%B1%E5%90%8C%E4%BB%A3%E7%A0%81"><span class="toc-text">提取共同代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FactoryBean"><span class="toc-text">FactoryBean</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bean-%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">Bean 作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">bean 生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-Bean"><span class="toc-text">Java Bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%A4%84%E7%90%86%E5%92%8C%E5%90%8E%E5%A4%84%E7%90%86%E7%B1%BB"><span class="toc-text">预处理和后处理类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring-%E9%85%8D%E7%BD%AE"><span class="toc-text">Spring 配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xml-%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-text">xml 自动装配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%B1%9E%E6%80%A7%E5%90%8D%E7%A7%B0%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5"><span class="toc-text">根据属性名称自动注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%B1%9E%E6%80%A7%E7%B1%BB%E5%9E%8B%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5"><span class="toc-text">根据属性类型自动注入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="toc-text">外部属性文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF"><span class="toc-text">直接配置数据库信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-text">外部属性文件配置数据库连接池</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0-jdbc-properties-%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF"><span class="toc-text">增加 jdbc.properties 文件，保存数据库信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-v2"><span class="toc-text">Spring 配置文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E7%AE%A1%E7%90%86-Bean"><span class="toc-text">注解方式管理 Bean</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-text">可用注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-text">.基于注解方式实现对象创建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E9%85%8D%E7%BD%AE"><span class="toc-text">组件扫描配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-%E6%89%98%E7%AE%A1%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B"><span class="toc-text">Spring 托管创建实例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE"><span class="toc-text">组件扫描详细配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="toc-text">注解方式实现属性注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Autowired"><span class="toc-text">@Autowired</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Qualifier"><span class="toc-text">@Qualifier</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Resource"><span class="toc-text">@Resource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Value"><span class="toc-text">@Value</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text">完全注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">注解配置类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95"><span class="toc-text">测试方法</span></a></li></ol></li></ol><h2 id="Spring-IoC"><a class="header-anchor" href="#Spring-IoC">¶</a>Spring IoC</h2><p>Spring 提供 IoC 容器实现两种方式（两个接口）：</p><ul><li><code>BeanFactory</code><br>IoC 容器基本实现，是 Spring <strong>内部使用接口</strong><br>不提倡开发人员进行使用<br>. 加载配置文件时不会创建对象，获取（使用）对象时才会创建对象</li><li><code>ApplicationContext</code><br><code>BeanFactory</code>的子接口<br>推荐开发人员使用<br>. 加载配置文件时，就会将配置文件中的对象进行创建</li></ul><p>❓为什么读取配置文件时，就创建对象？</p><ul><li>服务端，为了能够更快速高效的为用户提供服务；需要使用的对象，最好启动服务时就创建，以免出现请求时，对象才开始创建的现象</li></ul><h3 id="ApplicationContext-主要实现类"><a class="header-anchor" href="#ApplicationContext-主要实现类">¶</a>ApplicationContext 主要实现类</h3><table><thead><tr><th style="text-align:center">实现类</th><th style="text-align:center">区别</th></tr></thead><tbody><tr><td style="text-align:center">ClassPathXmlApplicationContext</td><td style="text-align:center">读取类路径下的 XML 格式的配置文件</td></tr><tr><td style="text-align:center">FileSystemXmlApplicationContext</td><td style="text-align:center">文件系统中的 XML 格式的配置文件</td></tr></tbody></table><p><img src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/image-20210607182210091.png" alt="ApplicationContext继承体系"></p><h3 id="ConfigurableApplicationContext"><a class="header-anchor" href="#ConfigurableApplicationContext">¶</a>ConfigurableApplicationContext</h3><p>✨<code>ConfigurableApplicationContext</code>类</p><ul><li>是<code>ApplicationContext</code>的子接口</li><li><code>refresh()</code>和<code>close()</code>让<code>ApplicationContext</code>具有启动、关闭和刷新上下文的能力</li></ul><h3 id="WebApplicationContext"><a class="header-anchor" href="#WebApplicationContext">¶</a>WebApplicationContext</h3><p>✨专门为 WEB 应用而准备，允许从相对于 WEB 根目录的路径中完成初始化工作</p><h2 id="Bean-管理"><a class="header-anchor" href="#Bean-管理">¶</a>Bean 管理</h2><p>✨IoC 中进行 Bean 管理，主要指的时两个操作：</p><ul><li>Spring <font style="color:red;font-weight:700">创建 Bean 对象</font></li><li>Spring <font style="color:red;font-weight:700">注入属性</font></li></ul><p>Bean 管理操作存在两种方式：</p><ul><li>基于 XML 配置文件方式实现（新手）</li><li>基于注解方式实现（老鸟）</li></ul><h2 id="XML-方式创建-Bean-对象"><a class="header-anchor" href="#XML-方式创建-Bean-对象">¶</a>XML 方式创建 Bean 对象</h2><p>Spring 项目的构建至少需要如下几个包</p><ul><li>spring-beans</li><li>spring-context</li><li>spring-core</li><li>spring-expression</li></ul><h3 id="创建-Java-Bean"><a class="header-anchor" href="#创建-Java-Bean">¶</a>创建 Java Bean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from User&#x27;s add method...&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Spring-配置文件"><a class="header-anchor" href="#Spring-配置文件">¶</a>Spring 配置文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;0&quot;</span> encoding=<span class="string">&quot;UTF-?&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;beans xmlns=&quot;</span>http://www.springframework.org/schema/beans<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:xsi=&quot;</span>http://www..org/0XMLSchema-instance<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xsi:schemaLocation=&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;bean id=&quot;</span>user<span class="string">&quot; class=&quot;</span>com.pineapple_man.spring.User<span class="string">&quot;&gt;&lt;/bean&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;/beans&gt;</span></span></span><br></pre></td></tr></table></figure><p>✨Spring 配置文件特点</p><ul><li>使用<code>&lt;bean&gt;</code>标签，实现对象创建</li><li><code>id</code>属性：唯一标识</li><li><code>class</code>属性：创建类的全路径</li></ul><p>🎶Spring 创建对象时，默认执行无参数构造方法完成对象创建</p><h3 id="代码测试"><a class="header-anchor" href="#代码测试">¶</a>代码测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beanxml&quot;</span>);</span><br><span class="line">        <span class="comment">//getBean()的第一个参数是 beanxml 中 bean 的 id</span></span><br><span class="line">  <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">  user.add();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="XML-方式注入属性"><a class="header-anchor" href="#XML-方式注入属性">¶</a>XML 方式注入属性</h2><p>对于大项目通常使用注解方式，XML 方式使得项目复杂并且难以管理，但是便于学习</p><p><img src="https://cdn.jsdelivr.net/gh/pineapple-man/blogImage@main/image/XML%E6%96%B9%E5%BC%8F%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7.png" alt="XML方式注入属性"></p><h3 id="set-方法注入"><a class="header-anchor" href="#set-方法注入">¶</a>set 方法注入</h3><p>创建类，定义属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from User&#x27;s add method...&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">    <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">    <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 Spring 配置文件配置对象创建，配置属性注入</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.User&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张三丰&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>🎶<code>&lt;property&gt;</code>标签中属性值含义</p><ul><li><code>name</code>类里面属性名称</li><li><code>value</code>向属性注入的值</li></ul><h3 id="有参构造进行注入"><a class="header-anchor" href="#有参构造进行注入">¶</a>有参构造进行注入</h3><p>创建有参数构造</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, Integer age)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">    <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">    <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 Spring 配置文件中进行配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.User&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;达摩老祖&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="p-名称空间注入"><a class="header-anchor" href="#p-名称空间注入">¶</a>p 名称空间注入</h3><p>添加 p 名称空间到配置文件中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;0&quot;</span> encoding=<span class="string">&quot;UTF-?&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;beans xmlns=&quot;</span>http://www.springframework.org/schema/beans<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:xsi=&quot;</span>http://www.worg/0XMLSchema-instance<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:p=&quot;</span>http://www.springframework.org/schema/p<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xsi:schemaLocation=&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;/beans&gt;</span></span></span><br></pre></td></tr></table></figure><p>进行属性注入</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.User&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot; p:name=&quot;</span><span class="attr">超哥</span>&quot;&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="XML-方式注入特殊值"><a class="header-anchor" href="#XML-方式注入特殊值">¶</a>XML 方式注入特殊值</h2><p>主要是通过 xml 注入其他类型的数据</p><h3 id="注入-null"><a class="header-anchor" href="#注入-null">¶</a>注入 null</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.User&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">null</span>&gt;</span><span class="tag">&lt;/<span class="name">null</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="注入属性包含特殊符号"><a class="header-anchor" href="#注入属性包含特殊符号">¶</a>注入属性包含特殊符号</h3><p>存在两种方式:</p><ul><li>使用转移字符(<code>&amp;lt</code>,<code>&amp;gt</code>)</li><li>将带特殊符号内容写到 CDATA 中</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.User&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="注入外部-bean"><a class="header-anchor" href="#注入外部-bean">¶</a>注入外部 bean</h3><p>在<code>Service</code>类的内部，调用了<code>dao</code>类方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"> <span class="type">UserDao</span> <span class="variable">dao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserImpl</span>();</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDao</span><span class="params">(UserDao dao)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.dao = dao;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from service update method.&quot;</span>);</span><br><span class="line">  dao.update();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from userimple update method&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置文件中进行配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.service.UserService&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.dao.impl.UserImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>✨<code>ref</code>属性：只想另一个<code>javaBean</code>的<code>id</code></p><h3 id="注入内部-bean"><a class="header-anchor" href="#注入内部-bean">¶</a>注入内部 bean</h3><p>书写对应实体类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Class</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> <span class="type">int</span> stuentsNumber;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuentsNumber</span><span class="params">(<span class="type">int</span> stuentsNumber)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.stuentsNumber = stuentsNumber;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Class&#123;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">    <span class="string">&quot;, stuentsNumber=&quot;</span> + stuentsNumber +</span><br><span class="line">    <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"> <span class="keyword">private</span> String gender;</span><br><span class="line"> <span class="comment">//一个学生属于一个班级</span></span><br><span class="line"> <span class="keyword">private</span> Class aClass;</span><br><span class="line"> <span class="comment">//内部注入，不需要getter方法</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setaClass</span><span class="params">(Class aClass)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.aClass = aClass;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">    <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">    <span class="string">&quot;, gender=&#x27;&quot;</span> + gender + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.gender = gender;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, Integer age, String gender)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">  <span class="built_in">this</span>.gender = gender;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>内部 bean 配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Tony&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;aClass&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;class&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.Class&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;S00&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuentsNumber&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="级联赋值"><a class="header-anchor" href="#级联赋值">¶</a>级联赋值</h3><p>级联赋值，用于向一个对象中注入另一个对象</p><h4 id="注入外部-bean-方式"><a class="header-anchor" href="#注入外部-bean-方式">¶</a>注入外部 bean 方式</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Tony&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--级联赋值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;aClass&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;class&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;class&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.Class&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;S00&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuentsNumber&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="指定属性注入"><a class="header-anchor" href="#指定属性注入">¶</a>指定属性注入</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Tony&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--级联赋值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;aClass&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;class&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;aClass.name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;S00&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;class&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.Class&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>🎶<code>ref</code>指定的类需要在当前类中存在<code>setter</code>和<code>getter</code>方法</p><h3 id="注入集合属性"><a class="header-anchor" href="#注入集合属性">¶</a>注入集合属性</h3><p>对集合类属性注入</p><h4 id="常见类型注入"><a class="header-anchor" href="#常见类型注入">¶</a>常见类型注入</h4><p>创建包含集合属性的类，拥有数组、<code>List</code>、<code>Map</code>、<code>Set</code>属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"> <span class="keyword">private</span> String gender;</span><br><span class="line"> <span class="keyword">private</span> String[] courses;</span><br><span class="line"> <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line"> <span class="keyword">private</span> Map&lt;String, String&gt; map;</span><br><span class="line"> <span class="keyword">private</span> Set&lt;String&gt; set;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSet</span><span class="params">(Set&lt;String&gt; set)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.set = set;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourses</span><span class="params">(String[] courses)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.courses = courses;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.list = list;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMap</span><span class="params">(Map&lt;String, String&gt; map)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.map = map;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>语文<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>数学<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>英语<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>语文<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>数学<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>英语<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>MySQL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>ELK<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;score&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;语文&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;数学&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="bean-类型注入"><a class="header-anchor" href="#bean-类型注入">¶</a>bean 类型注入</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user class=&quot;</span><span class="attr">com.pineapple_man.spring.bean.User</span>&quot;&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;超哥&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user class=&quot;</span><span class="attr">com.pineapple_man.spring.bean.User</span>&quot;&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;龙哥&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--注入list集合类型，值是对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;teachers&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;user&gt;&lt;/ref&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">            &lt;ref bean=&quot;</span><span class="attr">user</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> List&lt;User&gt; teachers;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTeachers</span><span class="params">(List&lt;User&gt; teachers)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.teachers = teachers;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="提取共同代码"><a class="header-anchor" href="#提取共同代码">¶</a>提取共同代码</h4><p>在 Spring 配置文件中引入名称空间<code>util</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.worg/0XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用<code>utils</code>标签完成 list 集合公共部分的提取</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user class=&quot;</span><span class="attr">com.pineapple_man.spring.bean.User</span>&quot;&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;龙哥&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user class=&quot;</span><span class="attr">com.pineapple_man.spring.bean.User</span>&quot;&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;超哥&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;teacherList&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;user&gt;&lt;/ref&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">    &lt;ref bean=&quot;</span><span class="attr">user</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu class=&quot;</span><span class="attr">com.pineapple_man.spring.bean.Student</span>&quot;&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;teachers&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;teacherList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="FactoryBean"><a class="header-anchor" href="#FactoryBean">¶</a>FactoryBean</h2><p>✨Spring 有两种类型<code>bean</code>：普通<code>bean</code>和<code>FactoryBean</code></p><ul><li>普通 bean：配置文件中定义<code>bean</code>类型就是返回类型</li><li>工厂 bean：配置文件定义<code>bean</code>类型可以和返回类型不同</li></ul><p>⛵FactoryBean 使用步骤：</p><ol><li>创建工厂 bean 类，实现<code>FactoryBean</code>接口</li><li>实现接口中的方法，在实现的方法中返回声明的 bean 类型</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">//定义返回的 bean 类型</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> User <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;龙哥&quot;</span>, );</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> java.lang.Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> FactoryBean.<span class="built_in">super</span>.isSingleton();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>书写配置文件</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;mybean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.MyBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>检查结果</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beanTest</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beanxml&quot;</span>);</span><br><span class="line"> User mybean= applicationContext.getBean(<span class="string">&quot;mybean&quot;</span>, User.class);</span><br><span class="line"> User mybean= applicationContext.getBean(<span class="string">&quot;mybean&quot;</span>, User.class);</span><br><span class="line"> System.out.println(mybeangetClass().hashCode());</span><br><span class="line"> System.out.println(mybeangetClass().hashCode());</span><br><span class="line">    <span class="comment">//mybean与 mybean的hash值相同</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Bean-作用域"><a class="header-anchor" href="#Bean-作用域">¶</a>Bean 作用域</h2><p>默认情况下，Spring 中 bean 是单实例对象，通过修改配置文件，可以选择是单实例还是多实例</p><p><code>scope</code>属性有两个值：<code>singleton</code>和<code>prototype</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;mybean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.MyBean&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>✨<code>singleton</code>和<code>prototype</code>的区别</p><ul><li><code>singleton</code>是单实例，<code>prototype</code>是多实例</li><li>scope 为<code>singleton</code>时，<strong>加载配置文件就会创建单实例对象</strong></li><li>scope 为<code>prototype</code>时，调用<code>getnBean()</code>方法时<strong>创建多实例对象</strong></li></ul><h2 id="bean-生命周期"><a class="header-anchor" href="#bean-生命周期">¶</a>bean 生命周期</h2><p>✨ bean 的生命周期（七个阶段）：</p><p>通过构造器创建<code>bean</code>实例（无参数构造）<br>为<code>bean</code>的属性注入以及对其他<code>bean</code>引用(调用<code>set()</code>方法) 3. 将<code>bean</code>实例传递给<code>bean</code>后置处理器的方法<code>postProcessBeforeInitialization</code> 4. 调用<code>bean</code>的初始化方法（需要进行配置初始化的方法） 5. 将<code>bean</code>实例传递给<code>bean</code>后置处理器方法<code>postProcessAfterInitialization</code><br>使用<code>bean</code><br>在容器关闭时，调用<code>bean</code>的销毁方法（需要配置销毁方法）</p><h3 id="Java-Bean"><a class="header-anchor" href="#Java-Bean">¶</a>Java Bean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LifeCycle</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> String step;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">LifeCycle</span><span class="params">()</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot; 来自于无参构造函数&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStep</span><span class="params">(String step)</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot; 来自于set方法&quot;</span>);</span><br><span class="line">      <span class="built_in">this</span>.step = step;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMethod</span><span class="params">()</span> &#123;</span><br><span class="line">      System.out.println(. 来自于initMethod<span class="string">&quot;);</span></span><br><span class="line"><span class="string">   &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   public void destoryMethod() &#123;</span></span><br><span class="line"><span class="string">      System.out.println(&quot;</span><span class="number">5.</span>来自destoryMethod<span class="string">&quot;);</span></span><br><span class="line"><span class="string">   &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="预处理和后处理类"><a class="header-anchor" href="#预处理和后处理类">¶</a>预处理和后处理类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PostProcess</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from postProcessBeforeInitialization&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> BeanPostProcessor.<span class="built_in">super</span>.postProcessBeforeInitialization(bean, beanName);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from postProcessAfterInitialization&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> BeanPostProcessor.<span class="built_in">super</span>.postProcessAfterInitialization(bean, beanName);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Spring-配置"><a class="header-anchor" href="#Spring-配置">¶</a>Spring 配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;0&quot;</span> encoding=<span class="string">&quot;UTF-?&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;beans xmlns=&quot;</span>http://www.springframework.org/schema/beans<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:xsi=&quot;</span>http://www..org/0XMLSchema-instance<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xsi:schemaLocation=&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;bean id=&quot;</span>lifecycle<span class="string">&quot; class=&quot;</span>com.pineapple_man.spring.bean.LifeCycle<span class="string">&quot; init-method=&quot;</span>initMethod<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">          destroy-method=&quot;</span>destoryMethod<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">        &lt;property name=&quot;</span>step<span class="string">&quot; value=&quot;</span>start<span class="string">&quot;&gt;&lt;/property&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;/bean&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;bean id=&quot;</span>postprocess<span class="string">&quot; class=&quot;</span>com.pineapple_man.spring.bean.PostProcess<span class="string">&quot;&gt;&lt;/bean&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;/beans&gt;</span></span></span><br></pre></td></tr></table></figure><p>🎶预处理和后处理将会作用在此文件的所有 bean 对象</p><h2 id="xml-自动装配"><a class="header-anchor" href="#xml-自动装配">¶</a>xml 自动装配</h2><p>✨自动状态就是——根据指定装配规则（属性名称或者属性类型），Spring 自动将匹配的属性值进行注入</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Java Bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoInject</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> User user;</span><br><span class="line"> <span class="keyword">private</span> User teacher;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">AutoInject</span><span class="params">()</span> &#123;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;AutoInject&#123;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;user=&quot;</span> + user +</span><br><span class="line">    <span class="string">&quot;, teacher=&quot;</span> + teacher +</span><br><span class="line">    <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTeacher</span><span class="params">(User teacher)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.teacher = teacher;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.user = user;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="根据属性名称自动注入"><a class="header-anchor" href="#根据属性名称自动注入">¶</a>根据属性名称自动注入</h3><p>🎶注入值 bean 的 id 值和类属性名称一样</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.AutoInject&quot;</span> <span class="attr">id</span>=<span class="string">&quot;autoInject&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.User&quot;</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tony&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.User&quot;</span> <span class="attr">id</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Dany&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="根据属性类型自动注入"><a class="header-anchor" href="#根据属性类型自动注入">¶</a>根据属性类型自动注入</h3><p>🎶类型自动注入只能应用在类中只有这样一种类型的属性，否则可能找不到注入属性</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.AutoInject&quot;</span> <span class="attr">id</span>=<span class="string">&quot;autoInject&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.User&quot;</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tony&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.pineapple_man.spring.bean.User&quot;</span> <span class="attr">id</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Dany&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="外部属性文件"><a class="header-anchor" href="#外部属性文件">¶</a>外部属性文件</h2><p>将外部属性文件内的数据，导入到 Spring 配置文件中</p><h3 id="直接配置数据库信息"><a class="header-anchor" href="#直接配置数据库信息">¶</a>直接配置数据库信息</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:///t_user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">45</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> druidTest) &#123;</span><br><span class="line"> <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line"> <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;dataSource&quot;</span>, DruidDataSource.class);</span><br><span class="line"> System.out.println(dataSource.getPassword());</span><br><span class="line"> System.out.println(dataSource.getUsername());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="外部属性文件配置数据库连接池"><a class="header-anchor" href="#外部属性文件配置数据库连接池">¶</a>外部属性文件配置数据库连接池</h3><h4 id="增加-jdbc-properties-文件，保存数据库信息"><a class="header-anchor" href="#增加-jdbc-properties-文件，保存数据库信息">¶</a>增加 jdbc.properties 文件，保存数据库信息</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">prop.driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">prop.url</span>=<span class="string">jdbc:mysql:///</span></span><br><span class="line"><span class="attr">prop.userName</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">prop.password456</span></span><br></pre></td></tr></table></figure><h4 id="Spring-配置文件-v2"><a class="header-anchor" href="#Spring-配置文件-v2">¶</a>Spring 配置文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;0&quot;</span> encoding=<span class="string">&quot;UTF-?&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;beans xmlns=&quot;</span>http://www.springframework.org/schema/beans<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:xsi=&quot;</span>http://www..org/0XMLSchema-instance<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:context=&quot;</span>http://www.springframework.org/schema/context<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xsi:schemaLocation=&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="meta">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;!--引入外部文件--&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;context:property-placeholder location=&quot;</span>classpath:jdbc.properties<span class="string">&quot;&gt;&lt;/context:property-placeholder&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;bean class=&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="string">&quot; id=&quot;</span>dataSource<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">        &lt;property name=&quot;</span>name<span class="string">&quot; value=&quot;</span>$&#123;prop.driverClass&#125;<span class="string">&quot;&gt;&lt;/property&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">        &lt;property name=&quot;</span>url<span class="string">&quot; value=&quot;</span>$&#123;prop.url&#125;<span class="string">&quot;&gt;&lt;/property&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">        &lt;property name=&quot;</span>username<span class="string">&quot; value=&quot;</span>$&#123;prop.userName&#125;<span class="string">&quot;&gt;&lt;/property&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">        &lt;property name=&quot;</span>password<span class="string">&quot; value=&quot;</span>$&#123;prop.password&#125;<span class="string">&quot;&gt;&lt;/property&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;/bean&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;/beans&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="注解方式管理-Bean"><a class="header-anchor" href="#注解方式管理-Bean">¶</a>注解方式管理 Bean</h2><p>✨注解特点</p><ul><li>注解是特殊标记，格式<code>@注解名称(属性名称=属性值,...)</code></li><li>注解作用在类上面，方法上面，属性上面</li></ul><p>:+使用注解方式管理 bean 的优点</p><ul><li>简化 xml 配置</li><li>便于程序阅读</li></ul><h3 id="可用注解"><a class="header-anchor" href="#可用注解">¶</a>可用注解</h3><blockquote><p>🎶Sping 创建对象的四个注解：</p><p><code>@Component</code> &gt; <code>@Service</code><br>. <code>@Controller</code> 4. <code>@Repository</code></p></blockquote><p>🎶上面四个注解功能是一样的，都是可以用来创建 bean 实例</p><h3 id="基于注解方式实现对象创建"><a class="header-anchor" href="#基于注解方式实现对象创建">¶</a>.基于注解方式实现对象创建</h3><p>主要共分为三个步骤</p><h4 id="引入依赖"><a class="header-anchor" href="#引入依赖">¶</a>引入依赖</h4><p>在项目中引入<code>spring-aop-5.RELEASE.jar</code>包</p><h4 id="组件扫描配置"><a class="header-anchor" href="#组件扫描配置">¶</a>组件扫描配置</h4><p>在 Spring 配置文件中进行组件扫描配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;0&quot;</span> encoding=<span class="string">&quot;UTF-?&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;beans xmlns=&quot;</span>http://www.springframework.org/schema/beans<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:xsi=&quot;</span>http://www..org/0XMLSchema-instance<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:context=&quot;</span>http://www.springframework.org/schema/context<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xsi:schemaLocation=&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="meta">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;context:component-scan base-package=&quot;</span>com.pineapple_man.spring.aop<span class="string">&quot;&gt;&lt;/context:component-scan&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;/beans&gt;</span></span></span><br></pre></td></tr></table></figure><p>🎶组件扫描注意点</p><ul><li>如果扫描多个包，多个包之间使用逗号隔开</li><li>如果一个目录中有多个类进行扫描，则配置自动扫描上层目录</li></ul><h4 id="Spring-托管创建实例"><a class="header-anchor" href="#Spring-托管创建实例">¶</a>Spring 托管创建实例</h4><p>书写 Java Bean，在类上添加创建对象注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;aopUserService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopUserService</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from AopUserService method&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>🎶<code>@Component(value)</code>中的<code>value</code>属性是可以省略不写的，默认值是：<strong>首字母小写的类名</strong>，如果书写了，value 等价与<code>&lt;bean&gt;</code>中的 id 属性</p><h3 id="组件扫描详细配置"><a class="header-anchor" href="#组件扫描详细配置">¶</a>组件扫描详细配置</h3><p>实现扫描过滤器配置，可以选择在包中，默认扫描那些类，不扫描那些类</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;0&quot;</span> encoding=<span class="string">&quot;UTF-?&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;beans xmlns=&quot;</span>http://www.springframework.org/schema/beans<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:xsi=&quot;</span>http://www..org/0XMLSchema-instance<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xmlns:context=&quot;</span>http://www.springframework.org/schema/context<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">       xsi:schemaLocation=&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="meta">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;context:component-scan base-package=&quot;</span>com.pineapple_man.spring.aop<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="meta">                            use-default-filters=&quot;</span>false<span class="string">&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">  &lt;!--默认仅扫描拥有 @Component 注解的类--&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">        &lt;context:include-filter type=&quot;</span>annotation<span class="string">&quot; expression=&quot;</span>org.springframework.stereotype.Component<span class="string">&quot;/&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">        &lt;context:exclude-filter type=&quot;</span>annotation<span class="string">&quot; expression=&quot;</span>org.springframework.stereotype.Component<span class="string">&quot;/&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">    &lt;/context:component-scan&gt;</span></span></span><br><span class="line"><span class="string"><span class="meta">&lt;/beans&gt;</span></span></span><br></pre></td></tr></table></figure><p>✨扫描过滤器特点</p><p><code>use-default-filters=&quot;false&quot;</code>：表示不适用默认过滤器，用户自己配置过滤器<br><code>&lt;context:include-filter type=&quot;&quot; expression=&quot;&quot;&gt;</code>：设置那些内容进行扫描<br><code>&lt;context:exclude-filter type=&quot;&quot; expression=&quot;&quot;&gt;</code>：设置那些内容不进行扫描</p><h2 id="注解方式实现属性注入"><a class="header-anchor" href="#注解方式实现属性注入">¶</a>注解方式实现属性注入</h2><table><thead><tr><th style="text-align:center">注解</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center"><code>@Autowired</code></td><td style="text-align:center">根据属性类型进行自动装配</td></tr><tr><td style="text-align:center"><code>@Qualifier</code></td><td style="text-align:center">根据名称进行注入，需要和<code>@Autowired</code>一起使用</td></tr><tr><td style="text-align:center"><code>@Resource</code></td><td style="text-align:center">可以根据类型注入也可以根据名称注入</td></tr><tr><td style="text-align:center"><code>@Value</code></td><td style="text-align:center">注入普通类型属性</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository(value = &quot;aopDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopDao</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;From aopDao method&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Autowired"><a class="header-anchor" href="#Autowired">¶</a>@Autowired</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;aopUserService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopUserService</span> &#123;</span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> AopDao aopDao;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from AopUserService method&quot;</span>);</span><br><span class="line">  aopDao.method();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>🎶<code>@Autowired</code>注解不需要属性具有<code>setXxx()</code>方法</p><h3 id="Qualifier"><a class="header-anchor" href="#Qualifier">¶</a>@Qualifier</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;aopUserService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopUserService</span> &#123;</span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="meta">@Qualifier(value = &quot;aopDao&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> AopDao aopDao;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from AopUserService method&quot;</span>);</span><br><span class="line">  aopDao.method();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>🎶根据名称( id )注入，需要和<code>@Autowired</code>一起使用</p><h3 id="Resource"><a class="header-anchor" href="#Resource">¶</a>@Resource</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;aopUserService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopUserService</span> &#123;</span><br><span class="line"> <span class="meta">@Resource(name = &quot;aopDao&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> AopDao aopDao;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from AopUserService method&quot;</span>);</span><br><span class="line">  aopDao.method();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>🎶<code>@Resource</code>可以根据类型注入，也可以根据名称注入</p><ul><li><code>@Resource</code>：根据类型进行注入</li><li><code>@Resource(name = &quot;aopDao&quot;)</code>：根据名称进行注入</li><li>此注解所在的包是<code>javax.annotation.Resource</code></li></ul><h3 id="Value"><a class="header-anchor" href="#Value">¶</a>@Value</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;aopUserService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopUserService</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Resource(name = &quot;aopDao&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> AopDao aopDao;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Value(&quot;pineapple-man&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;from AopUserService method&quot;</span>);</span><br><span class="line">  aopDao.method();</span><br><span class="line">  System.out.println(name);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>🎶对普通类型属性进行注入</p><h2 id="完全注解开发"><a class="header-anchor" href="#完全注解开发">¶</a>完全注解开发</h2><p>不再需要冗长的配置文件，使用一个配置类代替所有的配置文件</p><h3 id="注解配置类"><a class="header-anchor" href="#注解配置类">¶</a>注解配置类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.pineapple_man.spring.aop&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>✨注解类特点</p><ul><li><code>@Configuration</code>配置类注解，声明当前类是配置类</li><li><code>@ComponentScan(basePackages = &#123;&quot;com&quot;&#125;)</code>自动扫描包注解</li></ul><h3 id="测试方法"><a class="header-anchor" href="#测试方法">¶</a>测试方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">annotationConfigTest</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line"> <span class="type">AopUserService</span> <span class="variable">aopUserService</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;aopUserService&quot;</span>, AopUserService.class);</span><br><span class="line">  aopUserService.method();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">标签</span><br><a class="tag tag--primary tag--small t-none-link" href="/tags/Spring/" rel="tag">Spring</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/mybatis-%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/" data-tooltip="MyBatis 逆向工程" aria-label="上一篇: MyBatis 逆向工程"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E6%8C%91%E6%88%98/" data-tooltip="并发编程挑战" aria-label="下一篇: 并发编程挑战"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></article><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><footer id="footer" class="main-content-wrap"><span class="copyrights">Copyrights &copy; 2023 pineapple-man. All Rights Reserved.</span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><br>Total <span id="busuanzi_value_site_pv"></span> views. 您是pineapple-man的第<span id="busuanzi_value_site_uv"></span>个小伙伴<br><i class="fas fa-book-open"></i> <span class="post-count">博客字数统计：370.7k</span><script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script></footer></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="5"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/mybatis-%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/" data-tooltip="MyBatis 逆向工程" aria-label="上一篇: MyBatis 逆向工程"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E6%8C%91%E6%88%98/" data-tooltip="并发编程挑战" aria-label="下一篇: 并发编程挑战"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="/assets/images/logo.png" alt="作者的图片"><h4 id="about-card-name">pineapple-man</h4><div id="about-card-bio"><p>做一个菠萝：站得笔直，头戴王冠，内心甜美</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>刚毕业就失业</p></div><div id="about-card-location"><i class="fa fa-map-marker-alt"></i><br>西安</div></div></div><div id="cover" style="background-image:url(/assets/images/cover-v1.2.0.jpg)"></div><script src="/assets/js/script-kcoiyt1nxfue7qgcpkrcixymglcc3cuxeg98fy01hqww4nblnhd2ees6j6yc.min.js"></script></body></html>